(this.webpackJsonpschooladmin=this.webpackJsonpschooladmin||[]).push([[0],[,,,,,,,,,,,function(e,t,s){},,,,,,,,,,,,,function(e,t,s){},,function(e,t,s){},function(e,t,s){},,,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(16),l=s.n(c),n=(s(24),s(6)),i=s(5);function r(e){const t=e.startsWith("/")?e:"/".concat(e),s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:"localhost",WDS_SOCKET_PATH:"/ws",WDS_SOCKET_PORT:"3000",FAST_REFRESH:!0}).REACT_APP_API_BASE_URL;return s?"".concat(s).concat(t):"/api".concat(t)}function o(e){if(!e)throw new Error("Authentication token is required. Please log in again.");return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}function d(e){const t="".replace(/\/$/,""),s=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(s)}var j=s(0);const b=Object(a.createContext)(null),m=18e5;function h(e){let{children:t}=e;const[s,c]=Object(a.useState)(null),[l,n]=Object(a.useState)(null),[i,o]=Object(a.useState)(!1),d=Object(a.useRef)(null),h=Object(a.useRef)(Date.now());Object(a.useEffect)(()=>{try{const t=window.sessionStorage.getItem("authToken"),s=window.sessionStorage.getItem("authUser");if(t&&c(t),s)try{n(JSON.parse(s))}catch(e){n(null)}}catch(e){n(null)}o(!0)},[]),Object(a.useEffect)(()=>{if(!s)return;const e=()=>{window.sessionStorage.removeItem("authToken"),window.sessionStorage.removeItem("authUser")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[s]);const u=Object(a.useCallback)(async(e,t)=>{const s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:"localhost",WDS_SOCKET_PATH:"/ws",WDS_SOCKET_PORT:"3000",FAST_REFRESH:!0}).REACT_APP_LOGIN_ENDPOINT||r("/midland/auth/admin/login");try{const l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e,password:t})});if(!l.ok){const e=await l.text().catch(()=>"");if(404===l.status)throw new Error("Login endpoint not found (404). URL: ".concat(s,". Please check the API endpoint configuration."));if(403===l.status)throw new Error("Access forbidden (403). The server rejected the request. This may be a CORS or authentication issue. Check backend configuration.");try{const t=JSON.parse(e);throw new Error(t.message||t.error||"Login failed: ".concat(l.status," ").concat(l.statusText))}catch(a){throw new Error(e||"Login failed: ".concat(l.status," ").concat(l.statusText))}}const i=await l.json();if(!i)throw new Error("No response from server");const r=i.token||i.accessToken||i.jwt,o=i.username,d={email:e,username:o||e,role:i.role||"USER"};if(!r)throw new Error("No token returned by server");return window.sessionStorage.setItem("authToken",r),window.sessionStorage.setItem("authUser",JSON.stringify(d)),c(r),n(d),!0}catch(l){throw l}},[]),O=Object(a.useCallback)(async(e,t)=>u(e,t),[u]),x=Object(a.useCallback)(()=>{window.sessionStorage.removeItem("authToken"),window.sessionStorage.removeItem("authUser"),window.localStorage.removeItem("authToken"),window.localStorage.removeItem("authUser"),c(null),n(null)},[]);Object(a.useEffect)(()=>{if(!s)return void(d.current&&(clearTimeout(d.current),d.current=null));const e=()=>{h.current=Date.now(),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{Date.now()-h.current>=m&&x()},m)},t=["mousedown","mousemove","keypress","scroll","touchstart"];return t.forEach(t=>window.addEventListener(t,e,!0)),e(),()=>{t.forEach(t=>window.removeEventListener(t,e,!0)),d.current&&clearTimeout(d.current)}},[s,x]);const p={token:s,user:l,isReady:i,login:u,register:O,logout:x};return Object(j.jsx)(b.Provider,{value:p,children:t})}function u(){const e=Object(a.useContext)(b);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function O(e){let{children:t}=e;const{token:s,isReady:c}=u(),l=Object(i.q)();return Object(a.useEffect)(()=>{c&&!s&&l("/login",{replace:!0})},[s,c,l]),c?s?t:null:Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."})}const x=Object(a.createContext)(null);function p(e){let{children:t}=e;const[s,c]=Object(a.useState)(()=>{try{return window.localStorage.getItem("theme")||"light"}catch(e){return"light"}});Object(a.useEffect)(()=>{try{window.localStorage.setItem("theme",s),document.documentElement.setAttribute("data-theme",s)}catch(e){}},[s]);const l={theme:s,toggleTheme:()=>{c(e=>"light"===e?"dark":"light")},isDark:"dark"===s};return Object(j.jsx)(x.Provider,{value:l,children:t})}var g=s(2);s(11);var v=e=>{let{message:t,type:s="info",onClose:c,duration:l=5e3}=e;Object(a.useEffect)(()=>{if(l>0){const e=setTimeout(()=>{c()},l);return()=>clearTimeout(e)}},[l,c]);const n={success:g.m,error:g.b,warning:g.c,info:g.x},i=n[s]||n.info;return Object(j.jsxs)("div",{className:"toast toast-".concat(s),children:[Object(j.jsxs)("div",{className:"toast-content",children:[Object(j.jsx)(i,{className:"toast-icon",size:20}),Object(j.jsx)("span",{className:"toast-message",children:t})]}),Object(j.jsx)("button",{className:"toast-close",onClick:c,"aria-label":"Close",children:Object(j.jsx)(g.O,{size:18})})]})};function N(e){let{toasts:t,removeToast:s}=e;return Object(j.jsx)("div",{className:"toast-container",children:t.map(e=>Object(j.jsx)(v,{message:e.message,type:e.type,onClose:()=>s(e.id),duration:e.duration},e.id))})}const f=Object(a.createContext)(null);function y(e){let{children:t}=e;const[s,c]=Object(a.useState)([]),l=Object(a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const a=Date.now()+Math.random();return c(c=>[...c,{id:a,message:e,type:t,duration:s}]),a},[]),n=Object(a.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),i=Object(a.useCallback)((e,t)=>l(e,"success",t),[l]),r=Object(a.useCallback)((e,t)=>l(e,"error",t),[l]),o=Object(a.useCallback)((e,t)=>l(e,"warning",t),[l]),d=Object(a.useCallback)((e,t)=>l(e,"info",t),[l]),b={addToast:l,removeToast:n,success:i,error:r,warning:o,info:d};return Object(j.jsxs)(f.Provider,{value:b,children:[t,Object(j.jsx)(N,{toasts:s,removeToast:n})]})}function C(){const e=Object(a.useContext)(f);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function S(){return Object(j.jsx)(g.y,{className:"icon-left"})}function w(){return Object(j.jsx)(g.z,{className:"icon-left"})}function E(){const e=Object(i.q)(),t=u(),[s,c]=Object(a.useState)(""),[l,n]=Object(a.useState)(""),[r,o]=Object(a.useState)(!1),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)(!1);return Object(j.jsxs)("div",{className:"login-layout",children:[Object(j.jsx)("div",{className:"login-hero",style:{backgroundImage:"url(".concat(d("Images/home.jpg"),")")}}),Object(j.jsx)("div",{className:"auth-container",children:Object(j.jsxs)("div",{className:"auth-card",children:[Object(j.jsx)("div",{className:"logo-container",children:Object(j.jsx)("img",{src:d("Images/logo.png"),alt:"Logo"})}),b?Object(j.jsx)("div",{className:"auth-error",children:b}):null,Object(j.jsx)("h2",{className:"login-title",children:"Members Log in"}),Object(j.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),m("");try{O(!0),await t.login(s,l),e("/",{replace:!0})}catch(c){m(c.message||"Login failed")}finally{O(!1)}},className:"auth-form",children:[Object(j.jsxs)("label",{children:["Email",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(w,{}),Object(j.jsx)("input",{className:"with-icon",type:"email",value:s,onChange:e=>c(e.target.value),required:!0,placeholder:"admin@midland.edu"})]})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsxs)("div",{className:"input-group password-group",children:[Object(j.jsx)(S,{}),Object(j.jsx)("input",{className:"with-icon",type:r?"text":"password",value:l,onChange:e=>n(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),Object(j.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>o(!r),tabIndex:-1,children:r?Object(j.jsx)(g.s,{size:18}):Object(j.jsx)(g.r,{size:18})})]})]}),Object(j.jsx)("button",{type:"submit",className:"auth-button auth-button-red",disabled:h,children:h?"Logging in...":"Log In"})]})]})})]})}function k(){return Object(j.jsx)(g.L,{className:"icon-left"})}function A(){return Object(j.jsx)(g.y,{className:"icon-left"})}function L(){return Object(j.jsx)(g.z,{className:"icon-left"})}function T(){const e=Object(i.q)(),t=u(),[s,c]=Object(a.useState)(""),[l,n]=Object(a.useState)(""),[r,o]=Object(a.useState)(""),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)(""),[x,p]=Object(a.useState)(!1);return Object(j.jsxs)("div",{className:"login-layout",children:[Object(j.jsx)("div",{className:"login-hero",style:{backgroundImage:"url(".concat(d("Images/home.jpg"),")")}}),Object(j.jsx)("div",{className:"auth-container register-page",children:Object(j.jsxs)("div",{className:"auth-card wide",children:[Object(j.jsx)("div",{className:"logo-container",children:Object(j.jsx)("img",{src:d("Images/logo.png"),alt:"Logo"})}),h?Object(j.jsx)("div",{className:"auth-error",children:h}):null,Object(j.jsx)("h2",{className:"login-title",children:"Create Account"}),Object(j.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),O(""),r===b)try{p(!0),await t.register(l,r),e("/",{replace:!0})}catch(a){O(a.message||"Registration failed")}finally{p(!1)}else O("Passwords do not match")},className:"auth-form register-form-grid",children:[Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Username",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(k,{}),Object(j.jsx)("input",{className:"with-icon",type:"text",value:s,onChange:e=>c(e.target.value),required:!0,placeholder:"admin_username"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Email",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(L,{}),Object(j.jsx)("input",{className:"with-icon",type:"email",value:l,onChange:e=>n(e.target.value),required:!0,placeholder:"admin@school.com"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Password",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(A,{}),Object(j.jsx)("input",{className:"with-icon",type:"password",value:r,onChange:e=>o(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Confirm Password",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(A,{}),Object(j.jsx)("input",{className:"with-icon",type:"password",value:b,onChange:e=>m(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("button",{type:"submit",className:"auth-button",disabled:x,children:x?"Creating Account...":"Create Account"})})]})]})})]})}s(26);function P(){return Object(j.jsxs)("div",{className:"skeleton-card",children:[Object(j.jsx)("div",{className:"skeleton-icon"}),Object(j.jsxs)("div",{className:"skeleton-content",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-short"}),Object(j.jsx)("div",{className:"skeleton-line skeleton-line-long"})]})]})}function D(e){let{rows:t=5,columns:s=6}=e;return Object(j.jsxs)("div",{className:"skeleton-table-container",children:[Object(j.jsx)("div",{className:"skeleton-table-header",children:Array.from({length:s}).map((e,t)=>Object(j.jsx)("div",{className:"skeleton-header-cell"},t))}),Array.from({length:t}).map((e,t)=>Object(j.jsx)("div",{className:"skeleton-table-row",children:Array.from({length:s}).map((e,t)=>Object(j.jsx)("div",{className:"skeleton-cell"},t))},t))]})}function q(){return Object(j.jsx)("div",{className:"skeleton-form",children:Array.from({length:6}).map((e,t)=>Object(j.jsxs)("div",{className:"skeleton-form-group",children:[Object(j.jsx)("div",{className:"skeleton-label"}),Object(j.jsx)("div",{className:"skeleton-input"})]},t))})}function I(){return Object(j.jsxs)("div",{className:"skeleton-profile",children:[Object(j.jsxs)("div",{className:"skeleton-profile-header",children:[Object(j.jsx)("div",{className:"skeleton-avatar"}),Object(j.jsxs)("div",{className:"skeleton-profile-info",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-long"}),Object(j.jsx)("div",{className:"skeleton-line skeleton-line-medium"})]})]}),Object(j.jsx)("div",{className:"skeleton-profile-sections",children:Array.from({length:3}).map((e,t)=>Object(j.jsxs)("div",{className:"skeleton-section",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-short"}),Object(j.jsx)("div",{className:"skeleton-grid",children:Array.from({length:4}).map((e,t)=>Object(j.jsxs)("div",{className:"skeleton-grid-item",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-short"}),Object(j.jsx)("div",{className:"skeleton-line skeleton-line-medium"})]},t))})]},t))})]})}s(27);function z(){const{token:e}=u(),t=C(),s=Object(i.q)(),[c,l]=Object(a.useState)({students:0,teachers:0,admins:0,schools:6e3}),[n,d]=Object(a.useState)(!0),b=Object(a.useCallback)(async()=>{d(!0);try{let s=0;try{const t=r("/midland/admin/students/all"),a=await fetch(t,{headers:o(e)});if(a.ok){const e=await a.json();s=Array.isArray(e)?e.length:0}}catch(t){s=1250}let a=0;try{const t=r("/midland/admin/teachers/all"),s=await fetch(t,{headers:o(e)});if(s.ok){const e=await s.json();a=Array.isArray(e)?e.length:0}}catch(t){a=85}let c=0;try{const t=r("/midland/admin/all"),s=await fetch(t,{headers:o(e)});if(s.ok){const e=await s.json();c=Array.isArray(e)?e.length:0}}catch(t){c=12}l({students:s||1250,teachers:a||85,admins:c||12,schools:6e3})}catch(t){l({students:1250,teachers:85,admins:12,schools:6e3})}finally{d(!1)}},[e]);Object(a.useEffect)(()=>{b()},[b]);const m=[{label:"Total Schools",count:c.schools,icon:g.v,color:"#ef4444",bgGradient:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",link:"/",trend:{value:"+12%",direction:"up",caption:"vs last month"},subtitle:"Active institutions"},{label:"Students",count:c.students,icon:g.N,color:"#3b82f6",bgGradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",link:"/students",trend:{value:"+8%",direction:"up",caption:"vs last month"},subtitle:"Enrolled students"},{label:"Teachers",count:c.teachers,icon:g.M,color:"#10b981",bgGradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",link:"/teachers",trend:{value:"+5%",direction:"up",caption:"vs last month"},subtitle:"Active faculty"},{label:"Administrators",count:c.admins,icon:g.L,color:"#f59e0b",bgGradient:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",link:"/admin",trend:{value:"+2%",direction:"up",caption:"vs last month"},subtitle:"Admin staff"}],h=[{label:"Overall Attendance",value:"94.5%",icon:g.K,trend:"+2.3%",caption:"vs last term",color:"#10b981",change:"positive"},{label:"Active Classes",value:"156",icon:g.i,trend:"+5",caption:"new this month",color:"#3b82f6",change:"positive"},{label:"Upcoming Events",value:"8",icon:g.l,trend:"This month",caption:"Scheduled",color:"#f59e0b",change:"neutral"},{label:"Performance Rate",value:"87%",icon:g.h,trend:"-1.2%",caption:"needs attention",color:"#8b5cf6",change:"negative"}],O=[{icon:g.N,label:"Add Student",action:()=>s("/students/create"),color:"#ef4444",description:"Create a new student profile"},{icon:g.M,label:"Add Teacher",action:()=>s("/teachers/create"),color:"#3b82f6",description:"Onboard teaching staff"},{icon:g.L,label:"Add Admin",action:()=>s("/admin/create"),color:"#10b981",description:"Grant administrative access"},{icon:g.i,label:"View Subjects",action:()=>s("/subjects"),color:"#f59e0b",description:"Manage curriculum"},{icon:g.l,label:"Timetable",action:()=>s("/timetable"),color:"#8b5cf6",description:"Review daily schedule"},{icon:g.a,label:"Reports",action:()=>t.info("Analytics dashboard coming soon"),color:"#ec4899",description:"Analyze performance data"}],x=[{type:"student",message:"New student enrolled",time:"2 hours ago",icon:g.N},{type:"teacher",message:"Teacher profile updated",time:"5 hours ago",icon:g.M},{type:"event",message:"Parent meeting scheduled",time:"1 day ago",icon:g.l},{type:"admin",message:"System backup completed",time:"2 days ago",icon:g.a}];return Object(j.jsxs)("div",{className:"page dashboard-modern",children:[Object(j.jsxs)("div",{className:"dashboard-header-modern",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"dashboard-title",children:"Dashboard Overview"}),Object(j.jsx)("p",{className:"dashboard-subtitle",children:"Welcome back! Here's what's happening today."})]}),Object(j.jsxs)("div",{className:"dashboard-date",children:[Object(j.jsx)(g.p,{size:18}),Object(j.jsx)("span",{children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),n?Object(j.jsx)("div",{className:"dashboard-grid-modern",children:[1,2,3,4].map(e=>Object(j.jsx)(P,{},e))}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"dashboard-grid-modern",children:m.map((e,t)=>{const a=e.icon,c="down"===e.trend.direction?g.J:g.K,l="card-trend ".concat(e.trend.direction);return Object(j.jsxs)("div",{className:"dashboard-card-modern",onClick:()=>e.link&&s(e.link),style:{"--card-color":e.color},role:"button",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.link&&s(e.link))},children:[Object(j.jsx)("div",{className:"card-background",style:{background:e.bgGradient}}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"card-header",children:[Object(j.jsx)("div",{className:"card-icon-wrapper",style:{background:"".concat(e.color,"20")},children:Object(j.jsx)(a,{size:20,style:{color:e.color}})}),Object(j.jsxs)("div",{className:l,children:[Object(j.jsx)(c,{size:12}),Object(j.jsx)("strong",{children:e.trend.value}),Object(j.jsx)("span",{className:"trend-caption",children:e.trend.caption})]})]}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"card-count",children:e.count.toLocaleString()}),Object(j.jsx)("div",{className:"card-label",children:e.label}),Object(j.jsx)("div",{className:"card-subtitle",children:e.subtitle})]})]})]},t)})}),Object(j.jsx)("div",{className:"dashboard-stats-modern",children:h.map((e,t)=>{const s=e.icon;return Object(j.jsxs)("div",{className:"stat-card-modern",children:[Object(j.jsx)("div",{className:"stat-icon-modern",style:{background:"".concat(e.color,"15"),color:e.color},children:Object(j.jsx)(s,{size:20})}),Object(j.jsxs)("div",{className:"stat-content-modern",children:[Object(j.jsx)("div",{className:"stat-value-modern",style:{color:e.color},children:e.value}),Object(j.jsx)("div",{className:"stat-label-modern",children:e.label}),Object(j.jsxs)("div",{className:"stat-trend-modern ".concat(e.change),children:["positive"===e.change&&Object(j.jsx)(g.K,{size:12}),"negative"===e.change&&Object(j.jsx)(g.J,{size:12}),Object(j.jsx)("span",{children:e.trend}),Object(j.jsx)("small",{children:e.caption})]})]})]},t)})}),Object(j.jsxs)("div",{className:"dashboard-bottom-section",children:[Object(j.jsxs)("div",{className:"quick-actions-modern",children:[Object(j.jsx)("h3",{className:"section-title",children:"Quick Actions"}),Object(j.jsx)("div",{className:"quick-actions-grid-modern",children:O.map((e,t)=>{const s=e.icon;return Object(j.jsxs)("button",{type:"button",className:"quick-action-modern",onClick:e.action,style:{"--action-color":e.color},"aria-label":e.description,children:[Object(j.jsx)("div",{className:"action-icon-wrapper",style:{background:"".concat(e.color,"15")},children:Object(j.jsx)(s,{size:22,style:{color:e.color}})}),Object(j.jsxs)("div",{className:"quick-action-content",children:[Object(j.jsx)("span",{className:"quick-action-label",children:e.label}),Object(j.jsx)("span",{className:"quick-action-description",children:e.description})]})]},t)})})]}),Object(j.jsxs)("div",{className:"recent-activity-modern",children:[Object(j.jsx)("h3",{className:"section-title",children:"Recent Activity"}),Object(j.jsx)("div",{className:"activity-list",children:x.map((e,t)=>{const s=e.icon;return Object(j.jsxs)("div",{className:"activity-item",children:[Object(j.jsx)("div",{className:"activity-icon",children:Object(j.jsx)(s,{size:18})}),Object(j.jsxs)("div",{className:"activity-content",children:[Object(j.jsx)("div",{className:"activity-message",children:e.message}),Object(j.jsx)("div",{className:"activity-time",children:e.time})]})]},t)})})]})]})]})]})}var R=s(7),F=s.n(R);s(39);const U={students:g.N,teachers:g.N,admins:g.N,subjects:g.i,timetable:g.l,default:g.w};function B(e){let{type:t="default",title:s,message:a,actionLabel:c,onAction:l,icon:n}=e;const i=n||U[t]||U.default,r={students:{title:"No Students Found",message:"Get started by adding your first student to the system."},teachers:{title:"No Teachers Found",message:"Add teachers to manage classes and subjects."},admins:{title:"No Administrators Found",message:"Add administrators to manage the school system."},subjects:{title:"No Subjects Found",message:"Create subjects to organize your curriculum."},timetable:{title:"No Timetable Entries",message:"Create timetable entries to schedule classes."},default:{title:s||"No Data Available",message:a||"There is no data to display at this time."}},o=r[t]||r.default;return Object(j.jsxs)("div",{className:"empty-state",children:[Object(j.jsx)("div",{className:"empty-state-icon",children:Object(j.jsx)(i,{size:64})}),Object(j.jsx)("h3",{className:"empty-state-title",children:o.title}),Object(j.jsx)("p",{className:"empty-state-message",children:o.message}),l&&Object(j.jsx)("button",{className:"empty-state-action btn-secondary",onClick:l,children:c||"Add New"})]})}s(40);function G(e){let{status:t,variant:s="default"}=e;const a={active:{label:"Active",color:"green"},inactive:{label:"Inactive",color:"gray"},pending:{label:"Pending",color:"yellow"},completed:{label:"Completed",color:"green"},cancelled:{label:"Cancelled",color:"red"},default:{label:t||"Unknown",color:"gray"}},c=a[null===t||void 0===t?void 0:t.toLowerCase()]||a.default;return Object(j.jsx)("span",{className:"status-badge status-badge-".concat(c.color," status-badge-").concat(s),children:c.label})}s(41);function M(e){let{currentPage:t,totalPages:s,onPageChange:a}=e;if(s<=1)return null;const c=(()=>{const e=[];if(s<=5)for(let t=1;t<=s;t++)e.push(t);else if(t<=3)for(let t=1;t<=5;t++)e.push(t);else if(t>=s-2)for(let t=s-4;t<=s;t++)e.push(t);else for(let s=t-2;s<=t+2;s++)e.push(s);return e})();return Object(j.jsx)("div",{className:"pagination-container",children:Object(j.jsxs)("div",{className:"pagination-controls",children:[Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>a(t-1),disabled:1===t,"aria-label":"Previous page",children:Object(j.jsx)(g.n,{size:18})}),c[0]>1&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>a(1),children:"1"}),c[0]>2&&Object(j.jsx)("span",{className:"pagination-ellipsis",children:"..."})]}),c.map(e=>Object(j.jsx)("button",{className:"pagination-btn ".concat(t===e?"active":""),onClick:()=>a(e),children:e},e)),c[c.length-1]<s&&Object(j.jsxs)(j.Fragment,{children:[c[c.length-1]<s-1&&Object(j.jsx)("span",{className:"pagination-ellipsis",children:"..."}),Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>a(s),children:s})]}),Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>a(t+1),disabled:t===s,"aria-label":"Next page",children:Object(j.jsx)(g.o,{size:18})})]})})}s(42);function K(e){let{children:t,sortKey:s,currentSort:a=null,onSort:c,className:l=""}=e;const n=(null===a||void 0===a?void 0:a.key)===s,i=n&&null!==a&&void 0!==a&&a.direction?a.direction:null;return Object(j.jsx)("th",{className:"sortable-header ".concat(l," ").concat(n?"active":""," ").concat(c?"clickable":""),onClick:c?()=>{if(c){c(s,n&&"asc"===i?"desc":"asc")}}:void 0,children:Object(j.jsxs)("div",{className:"sortable-header-content",children:[Object(j.jsx)("span",{children:t}),c&&Object(j.jsx)("span",{className:"sort-icon",children:"asc"===i?Object(j.jsx)(g.g,{size:14}):"desc"===i?Object(j.jsx)(g.d,{size:14}):Object(j.jsxs)("span",{style:{display:"flex",flexDirection:"column",lineHeight:.5},children:[Object(j.jsx)(g.g,{size:10}),Object(j.jsx)(g.d,{size:10})]})})]})})}function _(){const e=Object(i.q)(),{token:t}=u(),s=C(),[c,l]=Object(a.useState)(""),[n,d]=Object(a.useState)(""),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)([]),[x,p]=Object(a.useState)(!1),[v,N]=Object(a.useState)(""),[f,y]=Object(a.useState)(!1),[S,w]=Object(a.useState)(""),[E,k]=Object(a.useState)(!1),[A,L]=Object(a.useState)(""),[T,P]=Object(a.useState)(1),[q,I]=Object(a.useState)({key:null,direction:"asc"}),z=Object(a.useCallback)(async()=>{p(!0),N("");try{const e=r("/midland/admin/students/all"),s=await fetch(e,{headers:o(t)});if(!s.ok)throw new Error("Failed to load students: ".concat(s.status," ").concat(s.statusText));const a=await s.json();O(Array.isArray(a)?a:[])}catch(e){const t=e.message||"Failed to load students";e.message&&(e.message.includes("CORS")||e.message.includes("Failed to fetch")||e.message.includes("NetworkError"))?(N("CORS error: The backend at http://4.198.16.72.nip.io needs to allow requests from your frontend origin. Please configure CORS headers on the backend."),s.error("Failed to load students. Please check your connection.")):(N(t),s.error(t))}finally{p(!1)}},[t,s]);Object(a.useEffect)(()=>{z()},[z]),Object(a.useEffect)(()=>{const e=e=>{"Escape"===e.key&&f&&!E&&(y(!1),L(""))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,E]),Object(a.useEffect)(()=>{try{F.a.setAppElement("#root")}catch(e){}},[]);const R=Object(a.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.gradeLevel||"").trim()).filter(Boolean))),[h]),U=Object(a.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.section||"").trim()).filter(Boolean))),[h]),_=(e,t)=>{I({key:e,direction:t}),P(1)},H=Object(a.useMemo)(()=>{const e=c.trim().toLowerCase();let t=h.filter(t=>{const s=String(t.admissionNumber||t.rollNo||"").toLowerCase(),a=String(t.fullName||"").toLowerCase(),c=String(t.schoolEmail||t.personalEmail||"").toLowerCase(),l=!e||s.includes(e)||a.includes(e)||c.includes(e),i=!n||String(t.gradeLevel||"")===n,r=!b||String(t.section||"")===b;return l&&i&&r}).map(e=>({key:e.admissionNumber||e.rollNo||e.studentUid||Math.random(),id:e.admissionNumber||e.rollNo||"-",name:e.fullName||"-",email:e.schoolEmail||e.personalEmail||"-",class:e.gradeLevel||"-",section:e.section||"-",status:e.status||"Active",emailKey:e.schoolEmail||e.personalEmail||""}));return q.key&&t.sort((e,t)=>{let s=e[q.key],a=t[q.key];return"string"===typeof s&&(s=s.toLowerCase(),a=a.toLowerCase()),s<a?"asc"===q.direction?-1:1:s>a?"asc"===q.direction?1:-1:0}),t},[h,c,n,b,q]),Y=Math.ceil(H.length/6),J=6*(T-1),W=J+6,V=H.slice(J,W);return Object(a.useEffect)(()=>{T>Y&&Y>0&&P(1)},[Y,T]),Object(j.jsxs)("div",{className:"page students",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Students"}),Object(j.jsx)("div",{className:"meta",children:x?"Loading\u2026":"".concat(H.length," student").concat(1!==H.length?"s":"")})]}),Object(j.jsxs)("button",{className:"btn-primary",onClick:()=>e("/students/create"),children:[Object(j.jsx)(g.E,{size:18,style:{marginRight:8}}),"Add Student"]})]}),v&&Object(j.jsx)("div",{className:"alert alert-error",children:v}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsxs)("div",{className:"filter-input-wrapper",children:[Object(j.jsx)(g.F,{className:"filter-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search by ID, name, or email...",value:c,onChange:e=>l(e.target.value),className:"filter-input"})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.i,{className:"filter-icon"}),Object(j.jsxs)("select",{value:n,onChange:e=>d(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Classes"}),R.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.u,{className:"filter-icon"}),Object(j.jsxs)("select",{value:b,onChange:e=>m(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Sections"}),U.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]})]}),x?Object(j.jsx)(D,{rows:5,columns:7}):0===H.length?Object(j.jsx)(B,{type:"students",actionLabel:"Add Student",onAction:()=>e("/students/create")}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(K,{sortKey:"id",currentSort:q,onSort:_,children:"ID"}),Object(j.jsx)(K,{sortKey:"name",currentSort:q,onSort:_,children:"Name"}),Object(j.jsx)(K,{sortKey:"email",currentSort:q,onSort:_,children:"Email"}),Object(j.jsx)(K,{sortKey:"class",currentSort:q,onSort:_,children:"Class"}),Object(j.jsx)(K,{sortKey:"section",currentSort:q,onSort:_,children:"Section"}),Object(j.jsx)(K,{sortKey:"status",currentSort:q,onSort:_,children:"Status"}),Object(j.jsx)(K,{className:"actions-column",children:"Actions"})]})}),Object(j.jsx)("tbody",{children:V.map(t=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"cell-id",children:t.id}),Object(j.jsx)("td",{className:"cell-name",children:Object(j.jsx)("button",{className:"name-link",onClick:()=>e("/students/".concat(t.emailKey||t.id)),title:"View Profile",children:t.name})}),Object(j.jsx)("td",{className:"cell-email",children:t.email}),Object(j.jsx)("td",{className:"cell-small",children:t.class}),Object(j.jsx)("td",{className:"cell-small",children:t.section}),Object(j.jsx)("td",{className:"cell-status",children:Object(j.jsx)(G,{status:t.status})}),Object(j.jsx)("td",{className:"cell-actions",children:Object(j.jsxs)("div",{className:"action-buttons",children:[Object(j.jsx)("button",{className:"btn-icon",onClick:()=>e("/students/".concat(t.emailKey||t.id,"/edit")),title:"Edit","aria-label":"Edit student",children:Object(j.jsx)(g.q,{size:18})}),Object(j.jsx)("button",{className:"btn-icon btn-danger",onClick:()=>{w(t.emailKey),y(!0)},title:"Delete","aria-label":"Delete student",children:Object(j.jsx)(g.I,{size:18})})]})})]},t.key))})]})}),!x&&H.length>0&&Object(j.jsx)(M,{currentPage:T,totalPages:Y,onPageChange:P}),Object(j.jsx)(F.a,{isOpen:f,onRequestClose:()=>!E&&y(!1),className:"modal",overlayClassName:"modal-overlay",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h3",{children:"Delete Student"}),Object(j.jsx)("p",{children:"Are you sure you want to delete this student? This action cannot be undone."}),A&&Object(j.jsx)("div",{className:"alert alert-error",style:{marginBottom:16},children:A}),Object(j.jsxs)("div",{className:"modal-actions",children:[Object(j.jsx)("button",{className:"btn-secondary",onClick:()=>y(!1),disabled:E,children:"Cancel"}),Object(j.jsx)("button",{className:"btn-danger",disabled:E,onClick:async()=>{if(S){k(!0),L("");try{const e=encodeURIComponent(S),a=r("/midland/admin/students/delete/".concat(e)),c=await fetch(a,{method:"DELETE",headers:o(t)});if(!c.ok){const e=await c.text().catch(()=>"");throw new Error(e||"Failed to delete: ".concat(c.status))}y(!1),s.success("Student deleted successfully"),z()}catch(e){const t=e.message||"Failed to delete student";L(t),s.error(t)}finally{k(!1)}}},children:E?"Deleting\u2026":"Delete"})]})]})})]})}var H=s(3);const Y=e=>{if(!e)return null;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:"Please enter a valid email address"},J=e=>{if(!e)return null;if(!/^[\d\s\-+()]+$/.test(e))return"Please enter a valid phone number";const t=e.replace(/\D/g,"");return t.length<10||t.length>15?"Phone number must be between 10 and 15 digits":null},W=e=>{if(!e||""===e.trim())return"Username is required";const t=e.trim();if(t.length<3)return"Username must be at least 3 characters";if(t.length>50)return"Username must be less than 50 characters";return/^[a-zA-Z0-9._-]+$/.test(t)?null:"Username can only contain letters, numbers, dots, underscores, and hyphens"},V=e=>e&&""!==e.trim()?e.length<6?"Password must be at least 6 characters":e.length>100?"Password must be less than 100 characters":null:"Password is required",$=(e,t)=>!e||"string"===typeof e&&""===e.trim()?"".concat(t," is required"):null,Z=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const a=new Date(e);if(isNaN(a.getTime()))return"Please enter a valid ".concat(t);if(!s&&a>new Date)return"".concat(t," cannot be in the future");const c=new Date;return c.setFullYear(c.getFullYear()-150),a<c?"".concat(t," is too old"):null},Q=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;if(!e)return null;const c=e.trim();return s>0&&c.length<s?"".concat(t," must be at least ").concat(s," characters"):c.length>a?"".concat(t," must be less than ").concat(a," characters"):null},X=(e,t)=>{if(!e||""===e.trim())return"".concat(t," is required");const s=e.trim();return s.length<1?"".concat(t," is required"):s.length>50?"".concat(t," must be less than 50 characters"):null},ee=e=>{if(!e||""===e.trim())return"School code is required";const t=e.trim();return t.length<2?"School code must be at least 2 characters":t.length>20?"School code must be less than 20 characters":null},te=e=>{if(!e||""===e.trim())return"Full name is required";const t=e.trim();if(t.length<2)return"Full name must be at least 2 characters";if(t.length>100)return"Full name must be less than 100 characters";return/^[a-zA-Z\s\-'.]+$/.test(t)?null:"Full name can only contain letters, spaces, hyphens, apostrophes, and dots"};function se(){const e=Object(i.q)(),{token:t}=u(),s=C(),[c,l]=Object(a.useState)({username:"",password:"",fullName:"",gender:"",dateOfBirth:"",bloodGroup:"",nationality:"",motherTongue:"",languagePreference:"",gradeLevel:"",section:"",academicYear:"",admissionDate:"",status:"Active",admissionNumber:"",rollNo:"",phoneNumber:"",schoolEmail:"",personalEmail:"",guardianName:"",guardianRelation:"",guardianContact:"",schoolCode:"",address:"",city:"",state:"",country:"",pinCode:"",profileImage:""}),[n,d]=Object(a.useState)(!1),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)({}),x=(e,t)=>{l(Object(H.a)(Object(H.a)({},c),{},{[e]:t})),h[e]&&O(Object(H.a)(Object(H.a)({},h),{},{[e]:""}))};return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Create New Student"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/students"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),b&&Object(j.jsx)("div",{className:"alert alert-error",children:b}),Object(j.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),m(""),O({}),(()=>{const e={};let t=!0;const s=W(c.username);s&&(e.username=s,t=!1);const a=V(c.password);a&&(e.password=a,t=!1);const l=te(c.fullName);l&&(e.fullName=l,t=!1);const n=$(c.gender,"Gender");n&&(e.gender=n,t=!1);const i=Z(c.dateOfBirth,"Date of birth");if(i&&(e.dateOfBirth=i,t=!1),c.bloodGroup){const s=Q(c.bloodGroup,"Blood group",0,10);s&&(e.bloodGroup=s,t=!1)}if(c.nationality){const s=Q(c.nationality,"Nationality",0,50);s&&(e.nationality=s,t=!1)}if(c.motherTongue){const s=Q(c.motherTongue,"Mother tongue",0,50);s&&(e.motherTongue=s,t=!1)}if(c.languagePreference){const s=Q(c.languagePreference,"Language preference",0,50);s&&(e.languagePreference=s,t=!1)}const r=ee(c.schoolCode);r&&(e.schoolCode=r,t=!1);const o=$(c.gradeLevel,"Class");o&&(e.gradeLevel=o,t=!1);const d=$(c.section,"Section");d&&(e.section=d,t=!1);const j=$(c.academicYear,"Academic year");j&&(e.academicYear=j,t=!1);const b=Z(c.admissionDate,"Admission date",!0);b&&(e.admissionDate=b,t=!1);const m=X(c.admissionNumber,"Admission number");m&&(e.admissionNumber=m,t=!1);const h=X(c.rollNo,"Roll number");if(h&&(e.rollNo=h,t=!1),c.phoneNumber){const s=J(c.phoneNumber);s&&(e.phoneNumber=s,t=!1)}const u=Y(c.schoolEmail);if(u?(e.schoolEmail=u,t=!1):c.schoolEmail&&""!==c.schoolEmail.trim()||(e.schoolEmail="School email is required",t=!1),c.personalEmail){const s=Y(c.personalEmail);s&&(e.personalEmail=s,t=!1)}if(c.guardianName){const s=Q(c.guardianName,"Guardian name",2,100);s&&(e.guardianName=s,t=!1)}if(c.guardianRelation){const s=Q(c.guardianRelation,"Guardian relation",0,50);s&&(e.guardianRelation=s,t=!1)}if(c.guardianContact){const s=J(c.guardianContact);s&&(e.guardianContact=s,t=!1)}if(c.address){const s=Q(c.address,"Address",0,255);s&&(e.address=s,t=!1)}if(c.city){const s=Q(c.city,"City",0,100);s&&(e.city=s,t=!1)}if(c.state){const s=Q(c.state,"State",0,100);s&&(e.state=s,t=!1)}if(c.country){const s=Q(c.country,"Country",0,100);s&&(e.country=s,t=!1)}if(c.pinCode){const s=Q(c.pinCode,"Pin code",0,20);s&&(e.pinCode=s,t=!1)}if(c.profileImage)try{new URL(c.profileImage)}catch(x){e.profileImage="Please enter a valid URL",t=!1}return O(e),t})()){d(!0);try{const a={username:String(c.username||"").trim(),password:String(c.password||"").trim(),fullName:String(c.fullName||"").trim(),gender:String(c.gender||"").trim(),dateOfBirth:String(c.dateOfBirth||"").trim(),bloodGroup:String(c.bloodGroup||"").trim(),nationality:String(c.nationality||"").trim(),motherTongue:String(c.motherTongue||"").trim(),languagePreference:String(c.languagePreference||"").trim(),gradeLevel:String(c.gradeLevel||"").trim(),section:String(c.section||"").trim(),academicYear:String(c.academicYear||"").trim(),admissionDate:String(c.admissionDate||"").trim(),status:String(c.status||"Active").trim(),admissionNumber:String(c.admissionNumber||"").trim(),rollNo:String(c.rollNo||"").trim(),phoneNumber:String(c.phoneNumber||"").trim(),schoolEmail:String(c.schoolEmail||"").trim(),personalEmail:String(c.personalEmail||"").trim(),guardianName:String(c.guardianName||"").trim(),guardianRelation:String(c.guardianRelation||"").trim(),guardianContact:String(c.guardianContact||"").trim(),schoolCode:String(c.schoolCode||"").trim(),address:String(c.address||"").trim(),city:String(c.city||"").trim(),state:String(c.state||"").trim(),country:String(c.country||"").trim(),pinCode:String(c.pinCode||"").trim(),profileImage:String(c.profileImage||"").trim()},i=r("/midland/admin/students/create"),d=await fetch(i,{method:"POST",headers:o(t),body:JSON.stringify(a)});if(!d.ok){let e="Failed to create student (".concat(d.status,")");try{const t=await d.json();if(t.message){e=t.message;const s=e.toLowerCase();if(s.includes("username")&&s.includes("already exists"))O(Object(H.a)(Object(H.a)({},h),{},{username:e}));else if(s.includes("school_code")||s.includes("school code")||s.includes("foreign key constraint")&&s.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code that exists in the system.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}else(s.includes("roll")||s.includes("admission"))&&(s.includes("roll")&&O(Object(H.a)(Object(H.a)({},h),{},{rollNo:e})),s.includes("admission")&&O(Object(H.a)(Object(H.a)({},h),{},{admissionNumber:e})))}else if(t.error){e=t.error;const s=e.toLowerCase();if(s.includes("school_code")||s.includes("foreign key")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}}catch(l){const t=await d.text().catch(()=>"");if(t)try{const s=JSON.parse(t);e=s.message||s.error||t;const a=e.toLowerCase();if(a.includes("school_code")||a.includes("foreign key")&&a.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}catch(n){const s=t.toLowerCase();if(s.includes("school_code")||s.includes("foreign key")&&s.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}else e=t||e}}throw new Error(e)}s.success("Student created successfully"),e("/students",{replace:!0})}catch(i){const e=i.message||"Failed to create student";m(e),s.error(e)}finally{d(!1)}}else s.error("Please fix the errors in the form")},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:c.username,onChange:e=>x("username",e.target.value),className:h.username?"input-error":"",required:!0}),h.username&&Object(j.jsx)("span",{className:"field-error",children:h.username})]}),Object(j.jsxs)("label",{children:["Password *",Object(j.jsx)("input",{type:"password",value:c.password,onChange:e=>x("password",e.target.value),className:h.password?"input-error":"",required:!0}),h.password&&Object(j.jsx)("span",{className:"field-error",children:h.password})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:c.fullName,onChange:e=>x("fullName",e.target.value),className:h.fullName?"input-error":"",required:!0}),h.fullName&&Object(j.jsx)("span",{className:"field-error",children:h.fullName})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:c.gender,onChange:e=>x("gender",e.target.value),className:h.gender?"input-error":"",required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]}),h.gender&&Object(j.jsx)("span",{className:"field-error",children:h.gender})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:c.dateOfBirth,onChange:e=>x("dateOfBirth",e.target.value),className:h.dateOfBirth?"input-error":"",required:!0}),h.dateOfBirth&&Object(j.jsx)("span",{className:"field-error",children:h.dateOfBirth})]}),Object(j.jsxs)("label",{children:["Blood Group",Object(j.jsx)("input",{value:c.bloodGroup,onChange:e=>x("bloodGroup",e.target.value),className:h.bloodGroup?"input-error":""}),h.bloodGroup&&Object(j.jsx)("span",{className:"field-error",children:h.bloodGroup})]}),Object(j.jsxs)("label",{children:["Nationality",Object(j.jsx)("input",{value:c.nationality,onChange:e=>x("nationality",e.target.value),className:h.nationality?"input-error":""}),h.nationality&&Object(j.jsx)("span",{className:"field-error",children:h.nationality})]}),Object(j.jsxs)("label",{children:["Mother Tongue",Object(j.jsx)("input",{value:c.motherTongue,onChange:e=>x("motherTongue",e.target.value),className:h.motherTongue?"input-error":""}),h.motherTongue&&Object(j.jsx)("span",{className:"field-error",children:h.motherTongue})]}),Object(j.jsxs)("label",{children:["Profile Image URL",Object(j.jsx)("input",{type:"url",value:c.profileImage,onChange:e=>x("profileImage",e.target.value),className:h.profileImage?"input-error":"",placeholder:"https://example.com/image.png"}),h.profileImage&&Object(j.jsx)("span",{className:"field-error",children:h.profileImage})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.i,{}),"Academic Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:c.schoolCode,onChange:e=>x("schoolCode",e.target.value),className:h.schoolCode?"input-error":"",required:!0}),h.schoolCode&&Object(j.jsx)("span",{className:"field-error",children:h.schoolCode})]}),Object(j.jsxs)("label",{children:["Class *",Object(j.jsx)("input",{value:c.gradeLevel,onChange:e=>x("gradeLevel",e.target.value),className:h.gradeLevel?"input-error":"",required:!0}),h.gradeLevel&&Object(j.jsx)("span",{className:"field-error",children:h.gradeLevel})]}),Object(j.jsxs)("label",{children:["Section *",Object(j.jsx)("input",{value:c.section,onChange:e=>x("section",e.target.value),className:h.section?"input-error":"",required:!0}),h.section&&Object(j.jsx)("span",{className:"field-error",children:h.section})]}),Object(j.jsxs)("label",{children:["Academic Year *",Object(j.jsx)("input",{value:c.academicYear,onChange:e=>x("academicYear",e.target.value),className:h.academicYear?"input-error":"",required:!0}),h.academicYear&&Object(j.jsx)("span",{className:"field-error",children:h.academicYear})]}),Object(j.jsxs)("label",{children:["Admission Date *",Object(j.jsx)("input",{type:"date",value:c.admissionDate,onChange:e=>x("admissionDate",e.target.value),className:h.admissionDate?"input-error":"",required:!0}),h.admissionDate&&Object(j.jsx)("span",{className:"field-error",children:h.admissionDate})]}),Object(j.jsxs)("label",{children:["Status",Object(j.jsxs)("select",{value:c.status,onChange:e=>l(Object(H.a)(Object(H.a)({},c),{},{status:e.target.value})),children:[Object(j.jsx)("option",{value:"Active",children:"Active"}),Object(j.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),Object(j.jsxs)("label",{children:["Admission No *",Object(j.jsx)("input",{value:c.admissionNumber,onChange:e=>x("admissionNumber",e.target.value),className:h.admissionNumber?"input-error":"",required:!0}),h.admissionNumber&&Object(j.jsx)("span",{className:"field-error",children:h.admissionNumber})]}),Object(j.jsxs)("label",{children:["Roll No *",Object(j.jsx)("input",{value:c.rollNo,onChange:e=>x("rollNo",e.target.value),className:h.rollNo?"input-error":"",required:!0}),h.rollNo&&Object(j.jsx)("span",{className:"field-error",children:h.rollNo})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.v,{}),"Address"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Address",Object(j.jsx)("input",{value:c.address,onChange:e=>x("address",e.target.value),className:h.address?"input-error":"",placeholder:"123, Street Name"}),h.address&&Object(j.jsx)("span",{className:"field-error",children:h.address})]}),Object(j.jsxs)("label",{children:["City",Object(j.jsx)("input",{value:c.city,onChange:e=>x("city",e.target.value),className:h.city?"input-error":""}),h.city&&Object(j.jsx)("span",{className:"field-error",children:h.city})]}),Object(j.jsxs)("label",{children:["State",Object(j.jsx)("input",{value:c.state,onChange:e=>x("state",e.target.value),className:h.state?"input-error":""}),h.state&&Object(j.jsx)("span",{className:"field-error",children:h.state})]}),Object(j.jsxs)("label",{children:["Country",Object(j.jsx)("input",{value:c.country,onChange:e=>x("country",e.target.value),className:h.country?"input-error":""}),h.country&&Object(j.jsx)("span",{className:"field-error",children:h.country})]}),Object(j.jsxs)("label",{children:["Pin Code",Object(j.jsx)("input",{value:c.pinCode,onChange:e=>x("pinCode",e.target.value),className:h.pinCode?"input-error":"",placeholder:"500081"}),h.pinCode&&Object(j.jsx)("span",{className:"field-error",children:h.pinCode})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:c.phoneNumber,onChange:e=>x("phoneNumber",e.target.value),className:h.phoneNumber?"input-error":""}),h.phoneNumber&&Object(j.jsx)("span",{className:"field-error",children:h.phoneNumber})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:c.schoolEmail,onChange:e=>x("schoolEmail",e.target.value),className:h.schoolEmail?"input-error":"",required:!0}),h.schoolEmail&&Object(j.jsx)("span",{className:"field-error",children:h.schoolEmail})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:c.personalEmail,onChange:e=>x("personalEmail",e.target.value),className:h.personalEmail?"input-error":""}),h.personalEmail&&Object(j.jsx)("span",{className:"field-error",children:h.personalEmail})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.N,{}),"Guardian Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Guardian Name",Object(j.jsx)("input",{value:c.guardianName,onChange:e=>x("guardianName",e.target.value),className:h.guardianName?"input-error":""}),h.guardianName&&Object(j.jsx)("span",{className:"field-error",children:h.guardianName})]}),Object(j.jsxs)("label",{children:["Guardian Relation",Object(j.jsx)("input",{value:c.guardianRelation,onChange:e=>x("guardianRelation",e.target.value),className:h.guardianRelation?"input-error":""}),h.guardianRelation&&Object(j.jsx)("span",{className:"field-error",children:h.guardianRelation})]}),Object(j.jsxs)("label",{children:["Guardian Contact",Object(j.jsx)("input",{value:c.guardianContact,onChange:e=>x("guardianContact",e.target.value),className:h.guardianContact?"input-error":""}),h.guardianContact&&Object(j.jsx)("span",{className:"field-error",children:h.guardianContact})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/students"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Creating...":"Create Student"})]})]})]})}function ae(){const e=Object(i.q)(),{id:t}=Object(i.s)(),{token:s}=u(),c=C(),[l,n]=Object(a.useState)({}),[d,b]=Object(a.useState)(!0),[m,h]=Object(a.useState)(!1),[O,x]=Object(a.useState)("");if(Object(a.useEffect)(()=>{let e=!0;return async function(){b(!0),x("");try{const a=r("/midland/admin/students/all"),l=await fetch(a,{headers:o(s)});if(!l.ok)throw new Error("Failed to load student");const i=await l.json(),d=(Array.isArray(i)?i:[]).find(e=>String(e.schoolEmail)===t||String(e.personalEmail)===t||String(e.admissionNumber)===t||String(e.rollNo)===t);e&&(d?n(d):(x("Student not found"),c.error("Student not found")))}catch(a){const t=a.message||"Failed to load student";e&&x(t),c.error(t)}finally{e&&b(!1)}}(),()=>{e=!1}},[t,s,c]),d)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(q,{})});if(O&&!l.schoolEmail)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:O})});const p=l.schoolEmail||l.personalEmail||t;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Edit Student"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/students"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),O&&Object(j.jsx)("div",{className:"alert alert-error",children:O}),Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),x(""),h(!0);try{const t=Object(H.a)({},l),a=r("/midland/admin/students/update/".concat(encodeURIComponent(p))),n=await fetch(a,{method:"PUT",headers:o(s),body:JSON.stringify(t)});if(!n.ok){const e=await n.text().catch(()=>"");throw new Error(e||"Failed to update: ".concat(n.status))}c.success("Student updated successfully"),e("/students",{replace:!0})}catch(a){const e=a.message||"Failed to update student";x(e),c.error(e)}finally{h(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:l.username||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{type:"password",value:l.password||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{password:e.target.value})),placeholder:"Leave blank to keep current password"})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:l.fullName||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:l.gender||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:l.dateOfBirth||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{dateOfBirth:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Blood Group",Object(j.jsx)("input",{value:l.bloodGroup||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{bloodGroup:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Nationality",Object(j.jsx)("input",{value:l.nationality||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{nationality:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Mother Tongue",Object(j.jsx)("input",{value:l.motherTongue||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{motherTongue:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.i,{}),"Academic Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:l.schoolCode||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{schoolCode:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Class *",Object(j.jsx)("input",{value:l.gradeLevel||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{gradeLevel:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Section *",Object(j.jsx)("input",{value:l.section||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{section:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Academic Year *",Object(j.jsx)("input",{value:l.academicYear||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{academicYear:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Admission Date *",Object(j.jsx)("input",{type:"date",value:l.admissionDate||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{admissionDate:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Status",Object(j.jsxs)("select",{value:l.status||"Active",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{status:e.target.value})),children:[Object(j.jsx)("option",{value:"Active",children:"Active"}),Object(j.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),Object(j.jsxs)("label",{children:["Admission No *",Object(j.jsx)("input",{value:l.admissionNumber||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{admissionNumber:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Roll No *",Object(j.jsx)("input",{value:l.rollNo||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{rollNo:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:l.phoneNumber||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:l.schoolEmail||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:l.personalEmail||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.N,{}),"Guardian Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Guardian Name",Object(j.jsx)("input",{value:l.guardianName||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{guardianName:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Guardian Relation",Object(j.jsx)("input",{value:l.guardianRelation||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{guardianRelation:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Guardian Contact",Object(j.jsx)("input",{value:l.guardianContact||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{guardianContact:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/students"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Updating...":"Update Student"})]})]})]})}s(43);function ce(){const{id:e}=Object(i.s)(),t=Object(i.q)(),{token:s}=u(),c=C(),[l,n]=Object(a.useState)(null),[d,b]=Object(a.useState)(!0),[m,h]=Object(a.useState)(""),[O,x]=Object(a.useState)("basic");Object(a.useEffect)(()=>{let t=!0;return async function(){b(!0),h("");try{let l=null;try{const t=r("/midland/admin/students/admission/".concat(e)),a=await fetch(t,{headers:o(s)});a.ok&&(l=await a.json())}catch(a){}if(!l){const t=r("/midland/admin/students/all"),a=await fetch(t,{headers:o(s)});if(!a.ok)throw new Error("Failed to load student");const c=await a.json(),n=Array.isArray(c)?c:[];l=n.find(t=>String(t.studentUid)===e||String(t.admissionNumber)===e||String(t.rollNo)===e||String(t.schoolEmail)===e||String(t.personalEmail)===e)||null}t&&(n(l),l||(h("Student not found"),c.error("Student not found")))}catch(a){const e=a.message||"Failed to load student";t&&h(e),c.error(e)}finally{t&&b(!1)}}(),()=>{t=!1}},[e,s,c]);const p=Object(a.useMemo)(()=>{const e=((null===l||void 0===l?void 0:l.fullName)||"").trim();if(!e)return"??";const t=e.split(/\s+/);return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},[l]),v=(null===l||void 0===l?void 0:l.profileImage)||(null===l||void 0===l?void 0:l.profile_image)||null,[N,f]=Object(a.useState)(!1);if(Object(a.useEffect)(()=>{f(!1)},[null===l||void 0===l?void 0:l.profileImage,null===l||void 0===l?void 0:l.profile_image]),d)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(I,{})});if(m||!l)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:m||"Student not found"})});const y=l.phoneNumber||"",S=l.schoolEmail||l.personalEmail||"",w=y?"tel:".concat(String(y).replace(/\s+/g,"")):null,E=S?"mailto:".concat(S):null,k=[{id:"basic",label:"Basic",icon:g.L},{id:"academic",label:"Academic",icon:g.j},{id:"contact",label:"Contact",icon:g.D},{id:"guardian",label:"Guardian",icon:g.N}];return Object(j.jsxs)("div",{className:"page student-profile-page",children:[Object(j.jsxs)("div",{className:"profile-header-section",children:[Object(j.jsxs)("div",{className:"profile-header-left",children:[Object(j.jsx)("button",{className:"back-button",onClick:()=>t("/students"),children:Object(j.jsx)(g.e,{size:20})}),Object(j.jsx)("h1",{children:"Student Profile"})]}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>t("/students/".concat(e,"/edit")),children:[Object(j.jsx)(g.q,{size:16,style:{marginRight:8}}),"Edit Profile"]})]}),Object(j.jsxs)("div",{className:"profile-top-card",children:[Object(j.jsx)("div",{className:"profile-avatar-large",children:v&&!N?Object(j.jsx)("img",{src:v,alt:l.fullName||"Student",onError:()=>f(!0)}):Object(j.jsx)("div",{children:p})}),Object(j.jsxs)("div",{className:"profile-info-main",children:[Object(j.jsx)("h2",{className:"profile-name",children:l.fullName||"-"}),Object(j.jsxs)("div",{className:"profile-badges",children:[Object(j.jsxs)("div",{className:"info-badge purple",children:[Object(j.jsx)(g.l,{size:14}),Object(j.jsxs)("span",{children:["Class ",l.gradeLevel||"-"," \u2022 Sec ",l.section||"-"]})]}),Object(j.jsx)(G,{status:l.status||"Active"}),Object(j.jsxs)("div",{className:"info-badge orange",children:[Object(j.jsx)(g.u,{size:14}),Object(j.jsxs)("span",{children:["# ",l.admissionNumber||l.rollNo||"-"]})]})]}),Object(j.jsxs)("div",{className:"contact-cards",children:[Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.C,{size:18}),y?Object(j.jsx)("a",{className:"contact-card-link",href:w,children:y}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.z,{size:18}),S?Object(j.jsx)("a",{className:"contact-card-link",href:E,children:S}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.v,{size:18}),Object(j.jsx)("span",{children:l.address||"N/A"})]})]})]})]}),Object(j.jsxs)("div",{className:"profile-metrics-grid",children:[Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"CLASS"}),Object(j.jsx)("div",{className:"metric-value",children:l.gradeLevel||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SECTION"}),Object(j.jsx)("div",{className:"metric-value",children:l.section||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"ACADEMIC YEAR"}),Object(j.jsx)("div",{className:"metric-value",children:l.academicYear||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"STATUS"}),Object(j.jsx)("div",{className:"metric-value",children:l.status||"Active"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"ATTENDANCE"}),Object(j.jsx)("div",{className:"metric-value",children:"86%"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"FEES DUE"}),Object(j.jsx)("div",{className:"metric-value",children:"\u20b9 0"})]})]}),Object(j.jsxs)("div",{className:"profile-content-layout",children:[Object(j.jsxs)("div",{className:"profile-tabs-section",children:[Object(j.jsx)("div",{className:"profile-tabs",children:k.map(e=>{const t=e.icon;return Object(j.jsxs)("button",{className:"profile-tab ".concat(O===e.id?"active":""),onClick:()=>x(e.id),type:"button",children:[Object(j.jsx)(t,{size:16}),Object(j.jsx)("span",{children:e.label})]},e.id)})}),Object(j.jsxs)("div",{className:"profile-tab-content",children:["basic"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Full Name"}),Object(j.jsx)("div",{className:"field-value",children:l.fullName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Gender"}),Object(j.jsx)("div",{className:"field-value",children:l.gender||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Date of Birth"}),Object(j.jsx)("div",{className:"field-value",children:l.dateOfBirth||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Blood Group"}),Object(j.jsx)("div",{className:"field-value",children:l.bloodGroup||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Nationality"}),Object(j.jsx)("div",{className:"field-value",children:l.nationality||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Mother Tongue"}),Object(j.jsx)("div",{className:"field-value",children:l.motherTongue||"-"})]})]}),"academic"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Admission Number"}),Object(j.jsx)("div",{className:"field-value",children:l.admissionNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Roll No"}),Object(j.jsx)("div",{className:"field-value",children:l.rollNo||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Class"}),Object(j.jsx)("div",{className:"field-value",children:l.gradeLevel||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Section"}),Object(j.jsx)("div",{className:"field-value",children:l.section||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Academic Year"}),Object(j.jsx)("div",{className:"field-value",children:l.academicYear||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Admission Date"}),Object(j.jsx)("div",{className:"field-value",children:l.admissionDate||"-"})]})]}),"contact"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Phone Number"}),Object(j.jsx)("div",{className:"field-value",children:l.phoneNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Email"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Personal Email"}),Object(j.jsx)("div",{className:"field-value",children:l.personalEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Address"}),Object(j.jsx)("div",{className:"field-value",children:l.address||"-"})]})]}),"guardian"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Guardian Name"}),Object(j.jsx)("div",{className:"field-value",children:l.guardianName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Relation"}),Object(j.jsx)("div",{className:"field-value",children:l.guardianRelation||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Guardian Contact"}),Object(j.jsx)("div",{className:"field-value",children:l.guardianContact||"-"})]})]})]})]}),Object(j.jsxs)("div",{className:"attendance-summary-card",children:[Object(j.jsx)("h3",{children:"Attendance Summary"}),Object(j.jsxs)("div",{className:"attendance-percentage",children:[Object(j.jsx)("strong",{children:"86%"}),Object(j.jsx)("span",{children:"Overall attendance"})]}),Object(j.jsxs)("div",{className:"attendance-bars",children:[Object(j.jsxs)("div",{className:"attendance-bar-item",children:[Object(j.jsx)("div",{className:"bar-label",children:"PRESENT"}),Object(j.jsx)("div",{className:"bar-container",children:Object(j.jsx)("div",{className:"bar-fill present",style:{width:"86%"}})})]}),Object(j.jsxs)("div",{className:"attendance-bar-item",children:[Object(j.jsx)("div",{className:"bar-label",children:"ABSENT"}),Object(j.jsx)("div",{className:"bar-container",children:Object(j.jsx)("div",{className:"bar-fill absent",style:{width:"14%"}})})]})]})]})]})]})}function le(){const e=Object(i.q)(),{token:t}=u(),s=C(),[c,l]=Object(a.useState)(""),[n,d]=Object(a.useState)(""),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)([]),[x,p]=Object(a.useState)(!1),[v,N]=Object(a.useState)(""),[f,y]=Object(a.useState)(!1),[S,w]=Object(a.useState)(""),[E,k]=Object(a.useState)(!1),[A,L]=Object(a.useState)(""),[T,P]=Object(a.useState)(1),[q,I]=Object(a.useState)({key:null,direction:"asc"}),z=Object(a.useCallback)(async()=>{p(!0),N("");try{const e=r("/midland/admin/teachers/all"),s=await fetch(e,{headers:o(t)});if(!s.ok)throw new Error("Failed to load teachers: ".concat(s.status," ").concat(s.statusText));const a=await s.json();O(Array.isArray(a)?a:[])}catch(e){const t=e.message||"Failed to load teachers";N(t),s.error(t)}finally{p(!1)}},[t,s]);Object(a.useEffect)(()=>{z()},[z]),Object(a.useEffect)(()=>{try{F.a.setAppElement("#root")}catch(e){}},[]);const R=Object(a.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.department||"").trim()).filter(Boolean))),[h]),U=Object(a.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.designation||"").trim()).filter(Boolean))),[h]),_=(e,t)=>{I({key:e,direction:t}),P(1)},H=Object(a.useMemo)(()=>{const e=c.trim().toLowerCase();let t=h.filter(t=>{const s=String(t.fullName||"").toLowerCase(),a=String(t.schoolEmail||t.personalEmail||"").toLowerCase(),c=!e||s.includes(e)||a.includes(e),l=!n||String(t.department||"")===n,i=!b||String(t.designation||"")===b;return c&&l&&i}).map(e=>({key:e.teacherCode||e.schoolEmail||Math.random(),id:e.teacherCode||e.schoolEmail||"-",name:e.fullName||"-",email:e.schoolEmail||e.personalEmail||"-",department:e.department||"-",designation:e.designation||"-",status:e.status||"Active",emailKey:e.schoolEmail||e.personalEmail||""}));return q.key&&t.sort((e,t)=>{let s=e[q.key],a=t[q.key];return"string"===typeof s&&(s=s.toLowerCase(),a=a.toLowerCase()),s<a?"asc"===q.direction?-1:1:s>a?"asc"===q.direction?1:-1:0}),t},[h,c,n,b,q]),Y=Math.ceil(H.length/6),J=6*(T-1),W=J+6,V=H.slice(J,W);return Object(a.useEffect)(()=>{T>Y&&Y>0&&P(1)},[Y,T]),Object(j.jsxs)("div",{className:"page teachers",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Teachers"}),Object(j.jsx)("div",{className:"meta",children:x?"Loading\u2026":"".concat(H.length," teacher").concat(1!==H.length?"s":"")})]}),Object(j.jsxs)("button",{className:"btn-primary",onClick:()=>e("/teachers/create"),children:[Object(j.jsx)(g.E,{size:18,style:{marginRight:8}}),"Add Teacher"]})]}),v&&Object(j.jsx)("div",{className:"alert alert-error",children:v}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsxs)("div",{className:"filter-input-wrapper",children:[Object(j.jsx)(g.F,{className:"filter-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:e=>l(e.target.value),className:"filter-input"})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.k,{className:"filter-icon"}),Object(j.jsxs)("select",{value:n,onChange:e=>d(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Departments"}),R.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.H,{className:"filter-icon"}),Object(j.jsxs)("select",{value:b,onChange:e=>m(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Designations"}),U.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]})]}),x?Object(j.jsx)(D,{rows:5,columns:5}):0===H.length?Object(j.jsx)(B,{type:"teachers",actionLabel:"Add Teacher",onAction:()=>e("/teachers/create")}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(K,{sortKey:"id",currentSort:q,onSort:_,children:"ID"}),Object(j.jsx)(K,{sortKey:"name",currentSort:q,onSort:_,children:"Name"}),Object(j.jsx)(K,{sortKey:"email",currentSort:q,onSort:_,children:"Email"}),Object(j.jsx)(K,{sortKey:"department",currentSort:q,onSort:_,children:"Department"}),Object(j.jsx)(K,{sortKey:"designation",currentSort:q,onSort:_,children:"Designation"}),Object(j.jsx)(K,{sortKey:"status",currentSort:q,onSort:_,children:"Status"}),Object(j.jsx)(K,{className:"actions-column",children:"Actions"})]})}),Object(j.jsx)("tbody",{children:V.map(t=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"cell-id",children:t.id}),Object(j.jsx)("td",{className:"cell-name",children:Object(j.jsx)("button",{className:"name-link",onClick:()=>e("/teachers/".concat(t.emailKey||t.id)),title:"View Profile",children:t.name})}),Object(j.jsx)("td",{className:"cell-email",children:t.email}),Object(j.jsx)("td",{className:"cell-small",children:t.department}),Object(j.jsx)("td",{className:"cell-small",children:t.designation}),Object(j.jsx)("td",{className:"cell-status",children:Object(j.jsx)(G,{status:t.status})}),Object(j.jsx)("td",{className:"cell-actions",children:Object(j.jsxs)("div",{className:"action-buttons",children:[Object(j.jsx)("button",{className:"btn-icon",onClick:()=>e("/teachers/".concat(t.emailKey||t.key,"/edit")),title:"Edit","aria-label":"Edit teacher",children:Object(j.jsx)(g.q,{size:18})}),Object(j.jsx)("button",{className:"btn-icon btn-danger",onClick:()=>{w(t.emailKey),y(!0)},title:"Delete","aria-label":"Delete teacher",children:Object(j.jsx)(g.I,{size:18})})]})})]},t.key))})]})}),!x&&H.length>0&&Object(j.jsx)(M,{currentPage:T,totalPages:Y,onPageChange:P}),Object(j.jsx)(F.a,{isOpen:f,onRequestClose:()=>!E&&y(!1),className:"modal",overlayClassName:"modal-overlay",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h3",{children:"Delete Teacher"}),Object(j.jsx)("p",{children:"Are you sure you want to delete this teacher? This action cannot be undone."}),A&&Object(j.jsx)("div",{className:"alert alert-error",style:{marginBottom:16},children:A}),Object(j.jsxs)("div",{className:"modal-actions",children:[Object(j.jsx)("button",{className:"btn-secondary",onClick:()=>y(!1),disabled:E,children:"Cancel"}),Object(j.jsx)("button",{className:"btn-danger",disabled:E,onClick:async()=>{if(S){k(!0),L("");try{const e=encodeURIComponent(S),s=r("/midland/admin/teachers/delete/".concat(e)),a=await fetch(s,{method:"DELETE",headers:o(t)});if(!a.ok){const e=await a.text().catch(()=>"");throw new Error(e||"Failed to delete: ".concat(a.status))}y(!1),z()}catch(e){L(e.message||"Failed to delete teacher")}finally{k(!1)}}},children:E?"Deleting\u2026":"Delete"})]})]})})]})}function ne(){const e=Object(i.q)(),{token:t}=u(),s=C(),[c,l]=Object(a.useState)({username:"",password:"",fullName:"",gender:"",dateOfBirth:"",department:"",designation:"",teacherCode:"",schoolEmail:"",personalEmail:"",phoneNumber:"",schoolCode:""}),[n,d]=Object(a.useState)(!1),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)({}),x=(e,t)=>{l(Object(H.a)(Object(H.a)({},c),{},{[e]:t})),h[e]&&O(Object(H.a)(Object(H.a)({},h),{},{[e]:""}))};return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Create New Teacher"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/teachers"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),b&&Object(j.jsx)("div",{className:"alert alert-error",children:b}),Object(j.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),m(""),O({}),(()=>{const e={};let t=!0;const s=W(c.username);s&&(e.username=s,t=!1);const a=V(c.password);a&&(e.password=a,t=!1);const l=te(c.fullName);l&&(e.fullName=l,t=!1);const n=$(c.gender,"Gender");n&&(e.gender=n,t=!1);const i=Z(c.dateOfBirth,"Date of birth");i&&(e.dateOfBirth=i,t=!1);const r=$(c.department,"Department");r&&(e.department=r,t=!1);const o=$(c.designation,"Designation");o&&(e.designation=o,t=!1);const d=(e=>{if(!e||""===e.trim())return"Teacher code is required";const t=e.trim();return t.length<2?"Teacher code must be at least 2 characters":t.length>20?"Teacher code must be less than 20 characters":null})(c.teacherCode);d&&(e.teacherCode=d,t=!1);const j=ee(c.schoolCode);if(j&&(e.schoolCode=j,t=!1),c.phoneNumber){const s=J(c.phoneNumber);s&&(e.phoneNumber=s,t=!1)}const b=Y(c.schoolEmail);if(b?(e.schoolEmail=b,t=!1):c.schoolEmail&&""!==c.schoolEmail.trim()||(e.schoolEmail="School email is required",t=!1),c.personalEmail){const s=Y(c.personalEmail);s&&(e.personalEmail=s,t=!1)}return O(e),t})()){d(!0);try{const a={username:String(c.username||"").trim(),password:String(c.password||"").trim(),fullName:String(c.fullName||"").trim(),gender:String(c.gender||"").trim(),dateOfBirth:String(c.dateOfBirth||"").trim(),department:String(c.department||"").trim(),designation:String(c.designation||"").trim(),teacherCode:String(c.teacherCode||"").trim(),schoolEmail:String(c.schoolEmail||"").trim(),personalEmail:String(c.personalEmail||"").trim(),phoneNumber:String(c.phoneNumber||"").trim(),schoolCode:String(c.schoolCode||"").trim()},i=r("/midland/admin/teachers/create"),d=await fetch(i,{method:"POST",headers:o(t),body:JSON.stringify(a)});if(!d.ok){let e="Failed to create teacher (".concat(d.status,")");try{const t=await d.json();if(t.message){e=t.message;const s=e.toLowerCase();if(s.includes("username")&&s.includes("already exists"))O(Object(H.a)(Object(H.a)({},h),{},{username:e}));else if(s.includes("school_code")||s.includes("school code")||s.includes("foreign key constraint")&&s.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code that exists in the system.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}else if(t.error){e=t.error;const s=e.toLowerCase();if(s.includes("school_code")||s.includes("foreign key")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}}catch(l){const t=await d.text().catch(()=>"");if(t)try{const s=JSON.parse(t);e=s.message||s.error||t;const a=e.toLowerCase();if(a.includes("school_code")||a.includes("foreign key")&&a.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}catch(n){const s=t.toLowerCase();if(s.includes("school_code")||s.includes("foreign key")&&s.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}else e=t||e}}throw new Error(e)}s.success("Teacher created successfully"),e("/teachers",{replace:!0})}catch(i){const e=i.message||"Failed to create teacher";m(e),s.error(e)}finally{d(!1)}}else s.error("Please fix the errors in the form")},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:c.username,onChange:e=>{l(Object(H.a)(Object(H.a)({},c),{},{username:e.target.value})),h.username&&O(Object(H.a)(Object(H.a)({},h),{},{username:""}))},className:h.username?"input-error":"",required:!0}),h.username&&Object(j.jsx)("span",{className:"field-error",children:h.username})]}),Object(j.jsxs)("label",{children:["Password *",Object(j.jsx)("input",{type:"password",value:c.password,onChange:e=>x("password",e.target.value),className:h.password?"input-error":"",required:!0}),h.password&&Object(j.jsx)("span",{className:"field-error",children:h.password})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:c.fullName,onChange:e=>x("fullName",e.target.value),className:h.fullName?"input-error":"",required:!0}),h.fullName&&Object(j.jsx)("span",{className:"field-error",children:h.fullName})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:c.gender,onChange:e=>x("gender",e.target.value),className:h.gender?"input-error":"",required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]}),h.gender&&Object(j.jsx)("span",{className:"field-error",children:h.gender})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:c.dateOfBirth,onChange:e=>x("dateOfBirth",e.target.value),className:h.dateOfBirth?"input-error":"",required:!0}),h.dateOfBirth&&Object(j.jsx)("span",{className:"field-error",children:h.dateOfBirth})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.k,{}),"Professional Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Department *",Object(j.jsx)("input",{value:c.department,onChange:e=>x("department",e.target.value),className:h.department?"input-error":"",required:!0}),h.department&&Object(j.jsx)("span",{className:"field-error",children:h.department})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:c.designation,onChange:e=>x("designation",e.target.value),className:h.designation?"input-error":"",required:!0}),h.designation&&Object(j.jsx)("span",{className:"field-error",children:h.designation})]}),Object(j.jsxs)("label",{children:["Teacher Code *",Object(j.jsx)("input",{value:c.teacherCode,onChange:e=>x("teacherCode",e.target.value),className:h.teacherCode?"input-error":"",required:!0}),h.teacherCode&&Object(j.jsx)("span",{className:"field-error",children:h.teacherCode})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:c.schoolCode,onChange:e=>x("schoolCode",e.target.value),className:h.schoolCode?"input-error":"",required:!0}),h.schoolCode&&Object(j.jsx)("span",{className:"field-error",children:h.schoolCode})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:c.phoneNumber,onChange:e=>x("phoneNumber",e.target.value),className:h.phoneNumber?"input-error":""}),h.phoneNumber&&Object(j.jsx)("span",{className:"field-error",children:h.phoneNumber})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:c.schoolEmail,onChange:e=>x("schoolEmail",e.target.value),className:h.schoolEmail?"input-error":"",required:!0}),h.schoolEmail&&Object(j.jsx)("span",{className:"field-error",children:h.schoolEmail})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:c.personalEmail,onChange:e=>x("personalEmail",e.target.value),className:h.personalEmail?"input-error":""}),h.personalEmail&&Object(j.jsx)("span",{className:"field-error",children:h.personalEmail})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/teachers"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Creating...":"Create Teacher"})]})]})]})}function ie(){const e=Object(i.q)(),{id:t}=Object(i.s)(),{token:s}=u(),c=C(),[l,n]=Object(a.useState)({}),[d,b]=Object(a.useState)(!0),[m,h]=Object(a.useState)(!1),[O,x]=Object(a.useState)("");if(Object(a.useEffect)(()=>{let e=!0;return async function(){b(!0),x("");try{const a=r("/midland/admin/teachers/all"),l=await fetch(a,{headers:o(s)});if(!l.ok)throw new Error("Failed to load teacher");const i=await l.json(),d=(Array.isArray(i)?i:[]).find(e=>String(e.schoolEmail)===t||String(e.personalEmail)===t||String(e.teacherCode)===t);e&&(d?n(d):(x("Teacher not found"),c.error("Teacher not found")))}catch(a){const t=a.message||"Failed to load teacher";e&&x(t),c.error(t)}finally{e&&b(!1)}}(),()=>{e=!1}},[t,s,c]),d)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(q,{})});if(O&&!l.schoolEmail)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:O})});const p=l.schoolEmail||l.personalEmail||t;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Edit Teacher"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/teachers"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),O&&Object(j.jsx)("div",{className:"alert alert-error",children:O}),Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),x(""),h(!0);try{const t=Object(H.a)({},l),a=r("/midland/admin/teachers/update/".concat(encodeURIComponent(p))),n=await fetch(a,{method:"PUT",headers:o(s),body:JSON.stringify(t)});if(!n.ok){const e=await n.text().catch(()=>"");throw new Error(e||"Failed to update: ".concat(n.status))}c.success("Teacher updated successfully"),e("/teachers",{replace:!0})}catch(a){const e=a.message||"Failed to update teacher";x(e),c.error(e)}finally{h(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:l.username||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{type:"password",value:l.password||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{password:e.target.value})),placeholder:"Leave blank to keep current password"})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:l.fullName||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:l.gender||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:l.dateOfBirth||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{dateOfBirth:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.k,{}),"Professional Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Department *",Object(j.jsx)("input",{value:l.department||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{department:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:l.designation||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{designation:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Teacher Code *",Object(j.jsx)("input",{value:l.teacherCode||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{teacherCode:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:l.schoolCode||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{schoolCode:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:l.phoneNumber||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:l.schoolEmail||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:l.personalEmail||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/teachers"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Updating...":"Update Teacher"})]})]})]})}s(44);function re(){const{id:e}=Object(i.s)(),t=Object(i.q)(),{token:s}=u(),c=C(),[l,n]=Object(a.useState)(null),[d,b]=Object(a.useState)(!0),[m,h]=Object(a.useState)(""),[O,x]=Object(a.useState)("basic");Object(a.useEffect)(()=>{let t=!0;return async function(){b(!0),h("");try{const a=r("/midland/admin/teachers/all"),l=await fetch(a,{headers:o(s)});if(!l.ok)throw new Error("Failed to load teacher");const i=await l.json(),d=(Array.isArray(i)?i:[]).find(t=>String(t.schoolEmail)===e||String(t.personalEmail)===e||String(t.teacherCode)===e);t&&(n(d||null),d||(h("Teacher not found"),c.error("Teacher not found")))}catch(a){const e=a.message||"Failed to load teacher";t&&h(e),c.error(e)}finally{t&&b(!1)}}(),()=>{t=!1}},[e,s,c]);const p=Object(a.useMemo)(()=>{const e=((null===l||void 0===l?void 0:l.fullName)||"").trim();if(!e)return"??";const t=e.split(/\s+/);return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},[l]);if(d)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(I,{})});if(m||!l)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:m||"Teacher not found"})});const v=l.phoneNumber||"",N=l.schoolEmail||l.personalEmail||"",f=v?"tel:".concat(String(v).replace(/\s+/g,"")):null,y=N?"mailto:".concat(N):null,S=[{id:"basic",label:"Basic",icon:g.L},{id:"professional",label:"Professional",icon:g.k},{id:"contact",label:"Contact",icon:g.D}],w=[{label:"Status",value:l.status||"Active"},{label:"School Code",value:l.schoolCode||"-"},{label:"Joined",value:l.joinDate||"N/A"}];return Object(j.jsxs)("div",{className:"page teacher-profile-page",children:[Object(j.jsxs)("div",{className:"profile-header-section",children:[Object(j.jsxs)("div",{className:"profile-header-left",children:[Object(j.jsx)("button",{className:"back-button",onClick:()=>t("/teachers"),children:Object(j.jsx)(g.e,{size:20})}),Object(j.jsx)("h1",{children:"Teacher Profile"})]}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>t("/teachers/".concat(e,"/edit")),children:[Object(j.jsx)(g.q,{size:16,style:{marginRight:8}}),"Edit Profile"]})]}),Object(j.jsxs)("div",{className:"profile-top-card",children:[Object(j.jsx)("div",{className:"profile-avatar-large",children:p}),Object(j.jsxs)("div",{className:"profile-info-main",children:[Object(j.jsx)("h2",{className:"profile-name",children:l.fullName||"-"}),Object(j.jsxs)("div",{className:"profile-badges",children:[Object(j.jsxs)("div",{className:"info-badge purple",children:[Object(j.jsx)(g.k,{size:14}),Object(j.jsxs)("span",{children:[l.department||"-"," \u2022 ",l.designation||"-"]})]}),Object(j.jsx)(G,{status:l.status||"Active"}),Object(j.jsxs)("div",{className:"info-badge orange",children:[Object(j.jsx)(g.u,{size:14}),Object(j.jsxs)("span",{children:["# ",l.teacherCode||"-"]})]})]}),Object(j.jsxs)("div",{className:"contact-cards",children:[Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.C,{size:18}),v?Object(j.jsx)("a",{className:"contact-card-link",href:f,children:v}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.z,{size:18}),N?Object(j.jsx)("a",{className:"contact-card-link",href:y,children:N}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.v,{size:18}),Object(j.jsx)("span",{children:l.address||"N/A"})]})]})]})]}),Object(j.jsxs)("div",{className:"profile-metrics-grid",children:[Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.k,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"DEPARTMENT"}),Object(j.jsx)("div",{className:"metric-value",children:l.department||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"DESIGNATION"}),Object(j.jsx)("div",{className:"metric-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.u,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"TEACHER CODE"}),Object(j.jsx)("div",{className:"metric-value",children:l.teacherCode||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"STATUS"}),Object(j.jsx)("div",{className:"metric-value",children:l.status||"Active"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SCHOOL CODE"}),Object(j.jsx)("div",{className:"metric-value",children:l.schoolCode||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"JOIN DATE"}),Object(j.jsx)("div",{className:"metric-value",children:l.joinDate||"-"})]})]}),Object(j.jsxs)("div",{className:"profile-content-layout",children:[Object(j.jsxs)("div",{className:"profile-tabs-section",children:[Object(j.jsx)("div",{className:"profile-tabs",children:S.map(e=>{const t=e.icon;return Object(j.jsxs)("button",{className:"profile-tab ".concat(O===e.id?"active":""),onClick:()=>x(e.id),type:"button",children:[Object(j.jsx)(t,{size:16}),Object(j.jsx)("span",{children:e.label})]},e.id)})}),Object(j.jsxs)("div",{className:"profile-tab-content",children:["basic"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Full Name"}),Object(j.jsx)("div",{className:"field-value",children:l.fullName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Gender"}),Object(j.jsx)("div",{className:"field-value",children:l.gender||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Date of Birth"}),Object(j.jsx)("div",{className:"field-value",children:l.dateOfBirth||"-"})]})]}),"professional"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Teacher Code"}),Object(j.jsx)("div",{className:"field-value",children:l.teacherCode||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Department"}),Object(j.jsx)("div",{className:"field-value",children:l.department||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Designation"}),Object(j.jsx)("div",{className:"field-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Code"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolCode||"-"})]})]}),"contact"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Phone Number"}),Object(j.jsx)("div",{className:"field-value",children:l.phoneNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Email"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Personal Email"}),Object(j.jsx)("div",{className:"field-value",children:l.personalEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Address"}),Object(j.jsx)("div",{className:"field-value",children:l.address||"-"})]})]})]})]}),Object(j.jsxs)("div",{className:"attendance-summary-card teacher-summary-card",children:[Object(j.jsx)("h3",{children:"Profile Highlights"}),Object(j.jsx)("ul",{className:"summary-list",children:w.map(e=>Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:e.label}),Object(j.jsx)("strong",{children:e.value})]},e.label))})]})]})]})}function oe(){const e=Object(i.q)(),{token:t}=u(),s=C(),[c,l]=Object(a.useState)(""),[n,d]=Object(a.useState)(""),[b,m]=Object(a.useState)([]),[h,O]=Object(a.useState)(!1),[x,p]=Object(a.useState)(""),[v,N]=Object(a.useState)(!1),[f,y]=Object(a.useState)(""),[S,w]=Object(a.useState)(!1),[E,k]=Object(a.useState)(""),[A,L]=Object(a.useState)(1),[T,P]=Object(a.useState)({key:null,direction:"asc"}),q=Object(a.useCallback)(async()=>{O(!0),p("");try{const e=r("/midland/admin/all"),s=await fetch(e,{headers:o(t)});if(!s.ok)throw new Error("Failed to load admins: ".concat(s.status," ").concat(s.statusText));const a=await s.json();m(Array.isArray(a)?a:[])}catch(e){const t=e.message||"Failed to load admins";p(t),s.error(t)}finally{O(!1)}},[t,s]);Object(a.useEffect)(()=>{q()},[q]),Object(a.useEffect)(()=>{try{F.a.setAppElement("#root")}catch(e){}},[]);const I=Object(a.useMemo)(()=>Array.from(new Set(b.map(e=>String(e.designation||"").trim()).filter(Boolean))),[b]),z=(e,t)=>{P({key:e,direction:t}),L(1)},R=Object(a.useMemo)(()=>{const e=c.trim().toLowerCase();let t=b.filter(t=>{const s=String(t.fullName||t.firstName||t.lastName||"").toLowerCase(),a=String(t.email||t.schoolEmail||t.personalEmail||"").toLowerCase(),c=!e||s.includes(e)||a.includes(e),l=!n||String(t.designation||"")===n;return c&&l}).map(e=>({key:e.email||e.schoolEmail||e.personalEmail||e.id||Math.random(),id:e.adminCode||e.id||e.email||e.schoolEmail||"-",name:e.fullName||e.firstName||e.lastName||"-",email:e.email||e.schoolEmail||e.personalEmail||"-",designation:e.designation||"-",schoolCode:e.schoolCode||"-",status:void 0!==e.isActive?e.isActive?"Active":"Inactive":e.status||"Active",emailKey:e.email||e.schoolEmail||e.personalEmail||e.id||""}));return T.key&&t.sort((e,t)=>{let s=e[T.key],a=t[T.key];return"string"===typeof s&&(s=s.toLowerCase(),a=a.toLowerCase()),s<a?"asc"===T.direction?-1:1:s>a?"asc"===T.direction?1:-1:0}),t},[b,c,n,T]),U=Math.ceil(R.length/6),_=6*(A-1),H=_+6,Y=R.slice(_,H);return Object(a.useEffect)(()=>{A>U&&U>0&&L(1)},[U,A]),Object(j.jsxs)("div",{className:"page admins",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Administrators"}),Object(j.jsx)("div",{className:"meta",children:h?"Loading\u2026":"".concat(R.length," admin").concat(1!==R.length?"s":"")})]}),Object(j.jsxs)("button",{className:"btn-primary",onClick:()=>e("/admin/create"),children:[Object(j.jsx)(g.E,{size:18,style:{marginRight:8}}),"Add Admin"]})]}),x&&Object(j.jsx)("div",{className:"alert alert-error",children:x}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsxs)("div",{className:"filter-input-wrapper",children:[Object(j.jsx)(g.F,{className:"filter-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:e=>l(e.target.value),className:"filter-input"})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.k,{className:"filter-icon"}),Object(j.jsxs)("select",{value:n,onChange:e=>d(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Designations"}),I.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]})]}),h?Object(j.jsx)(D,{rows:5,columns:4}):0===R.length?Object(j.jsx)(B,{type:"admins",actionLabel:"Add Admin",onAction:()=>e("/admin/create")}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(K,{sortKey:"id",currentSort:T,onSort:z,children:"ID"}),Object(j.jsx)(K,{sortKey:"name",currentSort:T,onSort:z,children:"Name"}),Object(j.jsx)(K,{sortKey:"email",currentSort:T,onSort:z,children:"Email"}),Object(j.jsx)(K,{sortKey:"designation",currentSort:T,onSort:z,children:"Designation"}),Object(j.jsx)(K,{sortKey:"schoolCode",currentSort:T,onSort:z,children:"School Code"}),Object(j.jsx)(K,{sortKey:"status",currentSort:T,onSort:z,children:"Status"}),Object(j.jsx)(K,{className:"actions-column",children:"Actions"})]})}),Object(j.jsx)("tbody",{children:Y.map(t=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"cell-id",children:t.id}),Object(j.jsx)("td",{className:"cell-name",children:Object(j.jsx)("button",{className:"name-link",onClick:()=>{const s=t.emailKey||t.id;s&&"-"!==s&&e("/admin/".concat(encodeURIComponent(s)))},title:"View Profile",disabled:!t.emailKey||"-"===t.emailKey,children:t.name})}),Object(j.jsx)("td",{className:"cell-email",children:t.email}),Object(j.jsx)("td",{className:"cell-small",children:t.designation}),Object(j.jsx)("td",{className:"cell-small",children:t.schoolCode}),Object(j.jsx)("td",{className:"cell-status",children:Object(j.jsx)(G,{status:t.status})}),Object(j.jsx)("td",{className:"cell-actions",children:Object(j.jsxs)("div",{className:"action-buttons",children:[Object(j.jsx)("button",{className:"btn-icon",onClick:()=>{const s=t.emailKey||t.id;s&&"-"!==s&&e("/admin/".concat(encodeURIComponent(s),"/edit"))},title:"Edit","aria-label":"Edit admin",disabled:!t.emailKey||"-"===t.emailKey,children:Object(j.jsx)(g.q,{size:18})}),Object(j.jsx)("button",{className:"btn-icon btn-danger",onClick:()=>{y(t.emailKey),N(!0)},title:"Delete","aria-label":"Delete admin",children:Object(j.jsx)(g.I,{size:18})})]})})]},t.key))})]})}),!h&&R.length>0&&Object(j.jsx)(M,{currentPage:A,totalPages:U,onPageChange:L}),Object(j.jsx)(F.a,{isOpen:v,onRequestClose:()=>!S&&N(!1),className:"modal",overlayClassName:"modal-overlay",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h3",{children:"Delete Administrator"}),Object(j.jsx)("p",{children:"Are you sure you want to delete this administrator? This action cannot be undone."}),E&&Object(j.jsx)("div",{className:"alert alert-error",style:{marginBottom:16},children:E}),Object(j.jsxs)("div",{className:"modal-actions",children:[Object(j.jsx)("button",{className:"btn-secondary",onClick:()=>N(!1),disabled:S,children:"Cancel"}),Object(j.jsx)("button",{className:"btn-danger",disabled:S,onClick:async()=>{if(f){w(!0),k("");try{const e=encodeURIComponent(f),a=r("/midland/admin/delete/".concat(e)),c=await fetch(a,{method:"DELETE",headers:o(t)});if(!c.ok){const e=await c.text().catch(()=>"");throw new Error(e||"Failed to delete: ".concat(c.status))}N(!1),s.success("Administrator deleted successfully"),q()}catch(e){const t=e.message||"Failed to delete admin";k(t),s.error(t)}finally{w(!1)}}},children:S?"Deleting\u2026":"Delete"})]})]})})]})}function de(){const e=Object(i.q)(),{token:t}=u(),s=C(),[c,l]=Object(a.useState)({username:"",password:"",fullName:"",gender:"",designation:"",schoolEmail:"",personalEmail:"",phoneNumber:"",schoolCode:""}),[n,d]=Object(a.useState)(!1),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)({}),x=(e,t)=>{l(Object(H.a)(Object(H.a)({},c),{},{[e]:t})),h[e]&&O(Object(H.a)(Object(H.a)({},h),{},{[e]:""}))};return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Create New Administrator"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/admin"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),b&&Object(j.jsx)("div",{className:"alert alert-error",children:b}),Object(j.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),m(""),O({}),!t)return m("Authentication required. Please log in again."),void s.error("Authentication required. Please log in again.");if((()=>{const e={};let t=!0;const s=W(c.username);s&&(e.username=s,t=!1);const a=V(c.password);a&&(e.password=a,t=!1);const l=te(c.fullName);l&&(e.fullName=l,t=!1);const n=$(c.gender,"Gender");n&&(e.gender=n,t=!1);const i=$(c.designation,"Designation");i&&(e.designation=i,t=!1);const r=ee(c.schoolCode);if(r&&(e.schoolCode=r,t=!1),c.phoneNumber){const s=J(c.phoneNumber);s&&(e.phoneNumber=s,t=!1)}const o=Y(c.schoolEmail);if(o?(e.schoolEmail=o,t=!1):c.schoolEmail&&""!==c.schoolEmail.trim()||(e.schoolEmail="School email is required",t=!1),c.personalEmail){const s=Y(c.personalEmail);s&&(e.personalEmail=s,t=!1)}return O(e),t})()){d(!0);try{const a={username:String(c.username||"").trim(),password:String(c.password||"").trim(),fullName:String(c.fullName||"").trim(),gender:String(c.gender||"").trim(),designation:String(c.designation||"").trim(),schoolEmail:String(c.schoolEmail||"").trim(),personalEmail:String(c.personalEmail||"").trim(),phoneNumber:String(c.phoneNumber||"").trim(),schoolCode:String(c.schoolCode||"").trim()},i=r("/midland/admin/create"),d=await fetch(i,{method:"POST",headers:o(t),body:JSON.stringify(a)});if(!d.ok){let e="Failed to create administrator (".concat(d.status,")");try{const t=await d.json();if(t.message){e=t.message;const s=e.toLowerCase();if(s.includes("username")&&s.includes("already exists"))O(Object(H.a)(Object(H.a)({},h),{},{username:e}));else if(s.includes("school_code")||s.includes("school code")||s.includes("foreign key constraint")&&s.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code that exists in the system.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}else if(t.error){e=t.error;const s=e.toLowerCase();if(s.includes("school_code")||s.includes("foreign key")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}}catch(l){const t=await d.text().catch(()=>"");if(t)try{const s=JSON.parse(t);e=s.message||s.error||t;const a=e.toLowerCase();if(a.includes("school_code")||a.includes("foreign key")&&a.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}}catch(n){const s=t.toLowerCase();if(s.includes("school_code")||s.includes("foreign key")&&s.includes("school")){const t='School code "'.concat(c.schoolCode,'" does not exist. Please enter a valid school code.');O(Object(H.a)(Object(H.a)({},h),{},{schoolCode:t})),e=t}else e=t||e}}throw new Error(e)}s.success("Administrator created successfully"),e("/admin",{replace:!0})}catch(i){const e=i.message||"Failed to create admin";m(e),s.error(e)}finally{d(!1)}}else s.error("Please fix the errors in the form")},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:c.username,onChange:e=>{l(Object(H.a)(Object(H.a)({},c),{},{username:e.target.value})),h.username&&O(Object(H.a)(Object(H.a)({},h),{},{username:""}))},className:h.username?"input-error":"",required:!0}),h.username&&Object(j.jsx)("span",{className:"field-error",children:h.username})]}),Object(j.jsxs)("label",{children:["Password *",Object(j.jsx)("input",{type:"password",value:c.password,onChange:e=>x("password",e.target.value),className:h.password?"input-error":"",required:!0}),h.password&&Object(j.jsx)("span",{className:"field-error",children:h.password})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:c.fullName,onChange:e=>x("fullName",e.target.value),className:h.fullName?"input-error":"",required:!0}),h.fullName&&Object(j.jsx)("span",{className:"field-error",children:h.fullName})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:c.gender,onChange:e=>x("gender",e.target.value),className:h.gender?"input-error":"",required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]}),h.gender&&Object(j.jsx)("span",{className:"field-error",children:h.gender})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:c.designation,onChange:e=>x("designation",e.target.value),className:h.designation?"input-error":"",required:!0}),h.designation&&Object(j.jsx)("span",{className:"field-error",children:h.designation})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:c.schoolCode,onChange:e=>x("schoolCode",e.target.value),className:h.schoolCode?"input-error":"",required:!0}),h.schoolCode&&Object(j.jsx)("span",{className:"field-error",children:h.schoolCode})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:c.phoneNumber,onChange:e=>x("phoneNumber",e.target.value),className:h.phoneNumber?"input-error":""}),h.phoneNumber&&Object(j.jsx)("span",{className:"field-error",children:h.phoneNumber})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:c.schoolEmail,onChange:e=>x("schoolEmail",e.target.value),className:h.schoolEmail?"input-error":"",required:!0}),h.schoolEmail&&Object(j.jsx)("span",{className:"field-error",children:h.schoolEmail})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:c.personalEmail,onChange:e=>x("personalEmail",e.target.value),className:h.personalEmail?"input-error":""}),h.personalEmail&&Object(j.jsx)("span",{className:"field-error",children:h.personalEmail})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/admin"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Creating...":"Create Administrator"})]})]})]})}function je(){const e=Object(i.q)(),{id:t}=Object(i.s)(),{token:s}=u(),c=C(),[l,n]=Object(a.useState)({}),[d,b]=Object(a.useState)(!0),[m,h]=Object(a.useState)(!1),[O,x]=Object(a.useState)("");if(Object(a.useEffect)(()=>{let e=!0;return async function(){if(s){b(!0),x("");try{const l=decodeURIComponent(t||"");if(!l||"-"===l||""===l.trim())return void(e&&(x("Invalid administrator identifier"),b(!1),c.error("Invalid administrator identifier")));let i=null;if(l.includes("@"))try{const e=r("/midland/admin/email/".concat(encodeURIComponent(l))),t=await fetch(e,{method:"GET",headers:o(s)});t.ok&&(i=await t.json())}catch(a){}if(!i)try{const e=r("/midland/admin/".concat(encodeURIComponent(l))),t=await fetch(e,{method:"GET",headers:o(s)});t.ok&&(i=await t.json())}catch(a){}if(!i){const e=r("/midland/admin/all"),t=await fetch(e,{headers:o(s)});if(!t.ok)throw new Error("Failed to load admin");const a=await t.json(),c=Array.isArray(a)?a:[];i=c.find(e=>{if(!e)return!1;const t=String(e.email||"").trim(),s=String(e.schoolEmail||"").trim(),a=String(e.personalEmail||"").trim(),c=String(e.adminCode||"").trim(),n=String(e.id||"").trim(),i=l.toLowerCase().trim();return!(!t||t.toLowerCase()!==i)||(!(!s||s.toLowerCase()!==i)||(!(!a||a.toLowerCase()!==i)||(!(!c||c.toLowerCase()!==i)||(!(!n||n.toLowerCase()!==i)||(!(!t||t!==l)||(!(!s||s!==l)||(!(!a||a!==l)||(!(!c||c!==l)||!(!n||n!==l)))))))))})||null}e&&(i?n(i):(x("Admin not found"),c.error("Admin not found")))}catch(a){const t=a.message||"Failed to load admin";e&&x(t),c.error(t)}finally{e&&b(!1)}}else e&&(x("Authentication required"),b(!1))}(),()=>{e=!1}},[t,s,c]),d)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(q,{})});if(O&&!l.email&&!l.schoolEmail&&!l.personalEmail)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:O})});const p=decodeURIComponent(t||"");return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Edit Administrator"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/admin"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),O&&Object(j.jsx)("div",{className:"alert alert-error",children:O}),Object(j.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),x(""),!s)return x("Authentication required. Please log in again."),void c.error("Authentication required. Please log in again.");h(!0);try{const t=Object(H.a)({},l),a=r("/midland/admin/update/".concat(encodeURIComponent(p))),n=await fetch(a,{method:"PUT",headers:o(s),body:JSON.stringify(t)});if(!n.ok){const e=await n.text().catch(()=>"");throw new Error(e||"Failed to update: ".concat(n.status))}c.success("Administrator updated successfully"),e("/admin",{replace:!0})}catch(a){const e=a.message||"Failed to update admin";x(e),c.error(e)}finally{h(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:l.username||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{type:"password",value:l.password||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{password:e.target.value})),placeholder:"Leave blank to keep current password"})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:l.fullName||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:l.gender||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:l.designation||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{designation:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:l.schoolCode||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{schoolCode:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:l.phoneNumber||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:l.schoolEmail||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:l.personalEmail||"",onChange:e=>n(Object(H.a)(Object(H.a)({},l),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/admin"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Updating...":"Update Administrator"})]})]})]})}s(45);function be(){const{id:e}=Object(i.s)(),t=Object(i.q)(),{token:s}=u(),c=C(),[l,n]=Object(a.useState)(null),[d,b]=Object(a.useState)(!0),[m,h]=Object(a.useState)("");Object(a.useEffect)(()=>{let t=!0;return async function(){if(s){b(!0),h("");try{const l=decodeURIComponent(e);if(!l||"-"===l||""===l.trim())return void(t&&(h("Invalid administrator identifier"),b(!1),c.error("Invalid administrator identifier")));let i=null;if(l.includes("@"))try{const e=r("/midland/admin/email/".concat(encodeURIComponent(l))),t=await fetch(e,{method:"GET",headers:o(s)});t.ok&&(i=await t.json())}catch(a){}if(!i)try{const e=r("/midland/admin/".concat(encodeURIComponent(l))),t=await fetch(e,{method:"GET",headers:o(s)});t.ok&&(i=await t.json())}catch(a){}if(!i){const e=r("/midland/admin/all"),t=await fetch(e,{method:"GET",headers:o(s)});if(!t.ok)throw new Error("Failed to load administrator");const a=await t.json(),c=Array.isArray(a)?a:[];i=c.find(e=>{if(!e)return!1;const t=String(e.email||"").trim(),s=String(e.schoolEmail||"").trim(),a=String(e.personalEmail||"").trim(),c=String(e.adminCode||"").trim(),n=String(e.id||"").trim(),i=l.toLowerCase().trim();return!(!t||t.toLowerCase()!==i)||(!(!s||s.toLowerCase()!==i)||(!(!a||a.toLowerCase()!==i)||(!(!c||c.toLowerCase()!==i)||(!(!n||n.toLowerCase()!==i)||(!(!t||t!==l)||(!(!s||s!==l)||(!(!a||a!==l)||(!(!c||c!==l)||!(!n||n!==l)))))))))})||null,!i&&c.length>0&&(console.log("AdminProfile: Could not find admin with ID:",l),console.log("AdminProfile: Available admins:",c.map(e=>({schoolEmail:e.schoolEmail,personalEmail:e.personalEmail,adminCode:e.adminCode}))))}t&&(n(i),i||(h("Administrator not found"),c.error("Administrator not found")))}catch(a){const e=a.message||"Failed to load administrator";t&&h(e),c.error(e)}finally{t&&b(!1)}}else t&&(h("Authentication required"),b(!1))}(),()=>{t=!1}},[e,s,c]);const[O,x]=Object(a.useState)(!1),p=Object(a.useMemo)(()=>{const e=((null===l||void 0===l?void 0:l.fullName)||(null===l||void 0===l?void 0:l.firstName)||(null===l||void 0===l?void 0:l.lastName)||"").trim();if(!e)return"??";const t=e.split(/\s+/);return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},[l]);if(Object(a.useEffect)(()=>{x(!1)},[null===l||void 0===l?void 0:l.profileImage,null===l||void 0===l?void 0:l.profile_image]),d)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(I,{})});if(m||!l)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:m||"Administrator not found"})});const v=l.email||l.schoolEmail||l.personalEmail||"",N=void 0!==l.isActive?l.isActive?"Active":"Inactive":l.status||"Active",f=l.phoneNumber?"tel:".concat(String(l.phoneNumber).replace(/\s+/g,"")):null,y=v?"mailto:".concat(v):null,S=l.profileImage||l.profile_image||null;return Object(j.jsxs)("div",{className:"page admin-profile-page",children:[Object(j.jsxs)("div",{className:"profile-header-section",children:[Object(j.jsxs)("div",{className:"profile-header-left",children:[Object(j.jsx)("button",{className:"back-button",onClick:()=>t("/admin"),children:Object(j.jsx)(g.e,{size:20})}),Object(j.jsx)("h1",{children:"Administrator Profile"})]}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>t("/admin/".concat(encodeURIComponent(v||l.adminCode||e),"/edit")),children:[Object(j.jsx)(g.q,{size:16,style:{marginRight:8}}),"Edit Profile"]})]}),Object(j.jsxs)("div",{className:"profile-top-card",children:[Object(j.jsx)("div",{className:"profile-avatar-large",children:S&&!O?Object(j.jsx)("img",{src:S,alt:l.fullName||"Administrator",onError:()=>x(!0)}):Object(j.jsx)("div",{children:p})}),Object(j.jsxs)("div",{className:"profile-info-main",children:[Object(j.jsx)("h2",{className:"profile-name",children:l.fullName||l.firstName||l.lastName||"-"}),Object(j.jsxs)("div",{className:"profile-badges",children:[Object(j.jsxs)("div",{className:"info-badge purple",children:[Object(j.jsx)(g.k,{size:14}),Object(j.jsx)("span",{children:l.designation||"Administrator"})]}),Object(j.jsx)(G,{status:N}),Object(j.jsxs)("div",{className:"info-badge orange",children:[Object(j.jsx)(g.u,{size:14}),Object(j.jsxs)("span",{children:["# ",l.id||l.adminCode||"-"]})]})]}),Object(j.jsxs)("div",{className:"contact-cards",children:[Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.C,{size:18}),l.phoneNumber?Object(j.jsx)("a",{className:"contact-card-link",href:f,children:l.phoneNumber}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.z,{size:18}),v?Object(j.jsx)("a",{className:"contact-card-link",href:y,children:v}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.v,{size:18}),Object(j.jsx)("span",{children:l.address||"N/A"})]})]})]})]}),Object(j.jsxs)("div",{className:"profile-metrics-grid",children:[Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.L,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"USERNAME"}),Object(j.jsx)("div",{className:"metric-value",children:l.username||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.k,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"DESIGNATION"}),Object(j.jsx)("div",{className:"metric-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.u,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SCHOOL CODE"}),Object(j.jsx)("div",{className:"metric-value",children:l.schoolCode||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.z,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"EMAIL"}),Object(j.jsx)("div",{className:"metric-value",children:v||"-"})]}),l.personalEmail&&l.personalEmail!==v&&Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.z,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"PERSONAL EMAIL"}),Object(j.jsx)("div",{className:"metric-value",children:l.personalEmail||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.C,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"PHONE"}),Object(j.jsx)("div",{className:"metric-value",children:l.phoneNumber||"-"})]})]}),Object(j.jsxs)("div",{className:"profile-content-layout",children:[Object(j.jsxs)("div",{className:"profile-tabs-section",children:[Object(j.jsx)("div",{className:"profile-tabs single",children:Object(j.jsx)("button",{className:"profile-tab active",type:"button",children:"Overview"})}),Object(j.jsx)("div",{className:"profile-tab-content",children:Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"ID"}),Object(j.jsx)("div",{className:"field-value",children:l.id||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Full Name"}),Object(j.jsx)("div",{className:"field-value",children:l.fullName||(l.firstName&&l.lastName?"".concat(l.firstName," ").concat(l.lastName):l.firstName||l.lastName||"-")})]}),(l.firstName||l.lastName)&&l.fullName&&Object(j.jsxs)(j.Fragment,{children:[l.firstName&&Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"First Name"}),Object(j.jsx)("div",{className:"field-value",children:l.firstName||"-"})]}),l.lastName&&Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Last Name"}),Object(j.jsx)("div",{className:"field-value",children:l.lastName||"-"})]})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Username"}),Object(j.jsx)("div",{className:"field-value",children:l.username||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Email"}),Object(j.jsx)("div",{className:"field-value",children:v||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Phone Number"}),Object(j.jsx)("div",{className:"field-value",children:l.phoneNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Gender"}),Object(j.jsx)("div",{className:"field-value",children:l.gender||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Designation"}),Object(j.jsx)("div",{className:"field-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Code"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolCode||"-"})]}),l.notes&&Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Notes"}),Object(j.jsx)("div",{className:"field-value",children:l.notes||"-"})]})]})})]}),Object(j.jsxs)("div",{className:"admin-summary-card",children:[Object(j.jsx)("h3",{children:"Profile Highlights"}),Object(j.jsxs)("ul",{className:"summary-list",children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Status"}),Object(j.jsx)("strong",{children:N})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Username"}),Object(j.jsx)("strong",{children:l.username||"-"})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Created"}),Object(j.jsx)("strong",{children:l.createdAt?new Date(l.createdAt).toLocaleDateString():"\u2014"})]}),l.updatedAt&&Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Last Updated"}),Object(j.jsx)("strong",{children:new Date(l.updatedAt).toLocaleDateString()})]})]})]})]})]})}function me(){const{token:e}=u(),t=C(),[s,c]=Object(a.useState)("TCH2025"),[l,n]=Object(a.useState)(""),[i,d]=Object(a.useState)([]),[b,m]=Object(a.useState)(!1),[h,O]=Object(a.useState)(""),x=Object(a.useCallback)(async()=>{m(!0),O("");try{const t=r("/midland/users/timetables/teacher/".concat(encodeURIComponent(s))),a=await fetch(t,{headers:o(e)});if(!a.ok)throw new Error("HTTP ".concat(a.status));const c=await a.json();d(Array.isArray(c)?c:[])}catch(a){const e=a.message||"Failed to load timetable";O(e),t.error(e)}finally{m(!1)}},[s,e,t]);Object(a.useEffect)(()=>{x()},[x]);const p=Object(a.useMemo)(()=>Array.from(new Set(i.map(e=>e.dayOfWeek))),[i]),g=Object(a.useMemo)(()=>{const e=l.trim();return i.filter(t=>!e||t.dayOfWeek===e).sort((e,t)=>e.dayOfWeek.localeCompare(t.dayOfWeek)||e.periodNumber-t.periodNumber)},[i,l]);return Object(j.jsxs)("div",{className:"page timetable",children:[Object(j.jsx)("div",{className:"page-header",children:Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Timetable"}),Object(j.jsx)("div",{className:"meta",children:b?"Loading\u2026":"".concat(g.length," periods")})]})}),h&&Object(j.jsx)("div",{className:"alert alert-error",children:h}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsx)("input",{value:s,onChange:e=>c(e.target.value),placeholder:"Teacher Code (e.g., TCH2025)",className:"filter-input"}),Object(j.jsxs)("select",{value:l,onChange:e=>n(e.target.value),disabled:b,className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Days"}),p.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),b?Object(j.jsx)(D,{rows:5,columns:7}):0===g.length?Object(j.jsx)(B,{type:"timetable"}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Day"}),Object(j.jsx)("th",{children:"Period"}),Object(j.jsx)("th",{children:"Time"}),Object(j.jsx)("th",{children:"Subject"}),Object(j.jsx)("th",{children:"Class"}),Object(j.jsx)("th",{children:"Section"}),Object(j.jsx)("th",{children:"Room"})]})}),Object(j.jsx)("tbody",{children:g.map((e,t)=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.dayOfWeek||"-"}),Object(j.jsx)("td",{children:e.periodNumber||"-"}),Object(j.jsx)("td",{children:e.startTime&&e.endTime?"".concat(e.startTime," - ").concat(e.endTime):"-"}),Object(j.jsx)("td",{children:e.subjectName||e.subjectCode||"-"}),Object(j.jsx)("td",{children:e.gradeLevel||"-"}),Object(j.jsx)("td",{children:e.section||"-"}),Object(j.jsx)("td",{children:e.roomNumber||"-"})]},t))})]})})]})}function he(){const{token:e}=u(),t=C(),[s,c]=Object(a.useState)(""),[l,n]=Object(a.useState)(""),[i,d]=Object(a.useState)(""),[b,m]=Object(a.useState)([]),[h,O]=Object(a.useState)(!1),[x,p]=Object(a.useState)("");Object(a.useEffect)(()=>{let s=!0;return async function(){O(!0),p("");try{const t=r("/midland/users/subjects/all"),a=await fetch(t,{headers:o(e)});if(!a.ok)throw new Error("Request failed ".concat(a.status));const c=await a.json();s&&m(Array.isArray(c)?c:[])}catch(a){const e=a.message||"Failed to load subjects";s&&p(e),t.error(e)}finally{s&&O(!1)}}(),()=>{s=!1}},[e,t]);const g=Object(a.useMemo)(()=>Array.from(new Set(b.map(e=>String(e.gradeLevel||"").trim()).filter(Boolean))),[b]),v=Object(a.useMemo)(()=>Array.from(new Set(b.map(e=>String(e.curriculumType||"").trim()).filter(Boolean))),[b]),N=Object(a.useMemo)(()=>{const e=s.trim().toLowerCase();return b.filter(t=>{const s=String(t.subjectName||"").toLowerCase(),a=String(t.subjectCode||"").toLowerCase(),c=!l||String(t.gradeLevel||"")===l,n=!i||String(t.curriculumType||"")===i,r=!e||s.includes(e)||a.includes(e);return c&&n&&r}).map(e=>({key:e.subjectCode||e.subjectName,subjectName:e.subjectName||"-",subjectCode:e.subjectCode||"-",curriculumType:e.curriculumType||"-",gradeLevel:e.gradeLevel||"-",teacherCode:e.teacherCode||"-"}))},[b,s,l,i]);return Object(j.jsxs)("div",{className:"page subjects",children:[Object(j.jsx)("div",{className:"page-header",children:Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Subjects"}),Object(j.jsx)("div",{className:"meta",children:h?"Loading\u2026":"".concat(N.length," subject").concat(1!==N.length?"s":"")})]})}),x&&Object(j.jsx)("div",{className:"alert alert-error",children:x}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsx)("input",{type:"text",placeholder:"Search by name or code...",value:s,onChange:e=>c(e.target.value),className:"filter-input"}),Object(j.jsxs)("select",{value:l,onChange:e=>n(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Grades"}),g.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]}),Object(j.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Curricula"}),v.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),h?Object(j.jsx)(D,{rows:5,columns:5}):0===N.length?Object(j.jsx)(B,{type:"subjects"}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Subject Name"}),Object(j.jsx)("th",{children:"Subject Code"}),Object(j.jsx)("th",{children:"Grade Level"}),Object(j.jsx)("th",{children:"Curriculum"}),Object(j.jsx)("th",{children:"Teacher Code"})]})}),Object(j.jsx)("tbody",{children:N.map(e=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.subjectName}),Object(j.jsx)("td",{children:e.subjectCode}),Object(j.jsx)("td",{children:e.gradeLevel}),Object(j.jsx)("td",{children:e.curriculumType}),Object(j.jsx)("td",{children:e.teacherCode})]},e.key))})]})})]})}function ue(e){let{children:t}=e;const{logout:s}=u(),{toggleTheme:c,isDark:l}=function(){const e=Object(a.useContext)(x);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}(),r=Object(i.q)(),o=Object(i.o)(),[b,m]=Object(a.useState)(""),[h,O]=Object(a.useState)(window.innerWidth>=768),[p,v]=Object(a.useState)(window.innerWidth<768);Object(a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<768;v(e),e&&h&&O(!1),e||h||O(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[h]);const N=[{path:"/",label:"Dashboard",icon:g.v},{path:"/students",label:"Students",icon:g.N},{path:"/teachers",label:"Teachers",icon:g.M},{path:"/admin",label:"Admins",icon:g.L},{path:"/subjects",label:"Subjects",icon:g.i},{path:"/timetable",label:"Timetable",icon:g.l}],f=()=>{O(!h)};return Object(j.jsxs)("div",{className:"dashboard-layout ".concat(l?"dark-theme":"light-theme"," ").concat(h?"sidebar-open":"sidebar-closed"),children:[h&&p&&Object(j.jsx)("div",{className:"sidebar-overlay",onClick:f}),Object(j.jsxs)("aside",{className:"dashboard-sidebar ".concat(h?"open":"closed"),children:[Object(j.jsx)("div",{className:"dashboard-sidebar-header",children:Object(j.jsxs)("div",{className:"dashboard-logo-container",children:[Object(j.jsx)("img",{src:d("Images/logo.png"),alt:"Midland International School",className:"dashboard-logo dashboard-logo-big"}),Object(j.jsx)("img",{src:d("Images/sideLogo.png"),alt:"Midland International School",className:"dashboard-logo dashboard-logo-small"})]})}),Object(j.jsx)("nav",{className:"dashboard-sidebar-nav",children:N.map(e=>{const t=e.icon,s="/"===e.path?"/"===o.pathname:o.pathname.startsWith(e.path);return Object(j.jsxs)(n.b,{to:e.path,className:"dashboard-nav-link ".concat(s?"active":""),title:e.label,onClick:t=>{o.pathname===e.path&&t.preventDefault(),p&&O(!1)},children:[Object(j.jsx)(t,{size:20}),Object(j.jsx)("span",{children:e.label})]},e.path)})}),Object(j.jsx)("div",{className:"dashboard-sidebar-footer",children:Object(j.jsxs)("button",{onClick:()=>{s(),r("/login")},className:"dashboard-logout-btn",title:"Logout",children:[Object(j.jsx)("span",{children:"Logout"}),Object(j.jsx)(g.f,{size:16})]})})]}),Object(j.jsxs)("div",{className:"dashboard-content-wrapper",children:[Object(j.jsxs)("header",{className:"dashboard-topbar",children:[Object(j.jsxs)("div",{className:"topbar-left",children:[Object(j.jsx)("button",{className:"topbar-menu-btn","aria-label":"Menu",onClick:f,children:Object(j.jsx)(g.A,{size:20})}),Object(j.jsxs)("div",{className:"topbar-search",children:[Object(j.jsx)(g.F,{size:18,className:"search-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search",value:b,onChange:e=>m(e.target.value),className:"search-input"})]})]}),Object(j.jsxs)("div",{className:"topbar-right",children:[Object(j.jsx)("button",{className:"topbar-icon-btn","aria-label":"Grid",children:Object(j.jsx)(g.t,{size:20})}),Object(j.jsx)("button",{className:"topbar-icon-btn theme-toggle",onClick:c,"aria-label":"Toggle theme",children:l?Object(j.jsx)(g.G,{size:20}):Object(j.jsx)(g.B,{size:20})})]})]}),Object(j.jsx)("main",{className:"dashboard-main",children:t})]})]})}s(46);var Oe=function(){return Object(j.jsx)(p,{children:Object(j.jsx)(y,{children:Object(j.jsx)(h,{children:Object(j.jsx)(n.a,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/login",element:Object(j.jsx)(E,{})}),Object(j.jsx)(i.b,{path:"/register",element:Object(j.jsx)(T,{})}),Object(j.jsx)(i.b,{path:"/*",element:Object(j.jsx)(O,{children:Object(j.jsx)(ue,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/",element:Object(j.jsx)(z,{})}),Object(j.jsx)(i.b,{path:"/students",element:Object(j.jsx)(_,{})}),Object(j.jsx)(i.b,{path:"/students/create",element:Object(j.jsx)(se,{})}),Object(j.jsx)(i.b,{path:"/students/:id",element:Object(j.jsx)(ce,{})}),Object(j.jsx)(i.b,{path:"/students/:id/edit",element:Object(j.jsx)(ae,{})}),Object(j.jsx)(i.b,{path:"/teachers",element:Object(j.jsx)(le,{})}),Object(j.jsx)(i.b,{path:"/teachers/create",element:Object(j.jsx)(ne,{})}),Object(j.jsx)(i.b,{path:"/teachers/:id",element:Object(j.jsx)(re,{})}),Object(j.jsx)(i.b,{path:"/teachers/:id/edit",element:Object(j.jsx)(ie,{})}),Object(j.jsx)(i.b,{path:"/admin",element:Object(j.jsx)(oe,{})}),Object(j.jsx)(i.b,{path:"/admin/create",element:Object(j.jsx)(de,{})}),Object(j.jsx)(i.b,{path:"/admin/:id",element:Object(j.jsx)(be,{})}),Object(j.jsx)(i.b,{path:"/admin/:id/edit",element:Object(j.jsx)(je,{})}),Object(j.jsx)(i.b,{path:"/timetable",element:Object(j.jsx)(me,{})}),Object(j.jsx)(i.b,{path:"/subjects",element:Object(j.jsx)(he,{})}),Object(j.jsx)(i.b,{path:"*",element:Object(j.jsx)(i.a,{to:"/",replace:!0})})]})})})})]})})})})})};l.a.createRoot(document.getElementById("root")).render(Object(j.jsx)(Oe,{}))}],[[47,1,2]]]);