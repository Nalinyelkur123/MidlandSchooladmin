(this.webpackJsonpschooladmin=this.webpackJsonpschooladmin||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(16),l=a.n(c),i=(a(24),a(6)),n=a(5);function r(e){const t=e.startsWith("/")?e:"/".concat(e);return"/api".concat(t)}function d(e){if(!e)throw new Error("Authentication token is required. Please log in again.");return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}function o(e){const t="".replace(/\/$/,""),a=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(a)}var j=a(0);const b=Object(s.createContext)(null),m=18e5;function h(e){let{children:t}=e;const[a,c]=Object(s.useState)(null),[l,i]=Object(s.useState)(null),[n,d]=Object(s.useState)(!1),o=Object(s.useRef)(null),h=Object(s.useRef)(Date.now());Object(s.useEffect)(()=>{try{const t=window.sessionStorage.getItem("authToken"),a=window.sessionStorage.getItem("authUser");if(t&&c(t),a)try{i(JSON.parse(a))}catch(e){i(null)}}catch(e){i(null)}d(!0)},[]),Object(s.useEffect)(()=>{if(!a)return;const e=()=>{window.sessionStorage.removeItem("authToken"),window.sessionStorage.removeItem("authUser")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[a]);const u=Object(s.useCallback)(async(e,t)=>{const a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:"localhost",WDS_SOCKET_PATH:"/ws",WDS_SOCKET_PORT:"3000",FAST_REFRESH:!0}).REACT_APP_LOGIN_ENDPOINT||r("/midland/auth/admin/login");try{const l=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e,password:t})});if(!l.ok){const e=await l.text().catch(()=>"");if(404===l.status)throw new Error("Login endpoint not found (404). URL: ".concat(a,". Please check the API endpoint configuration."));if(403===l.status)throw new Error("Access forbidden (403). The server rejected the request. This may be a CORS or authentication issue. Check backend configuration.");try{const t=JSON.parse(e);throw new Error(t.message||t.error||"Login failed: ".concat(l.status," ").concat(l.statusText))}catch(s){throw new Error(e||"Login failed: ".concat(l.status," ").concat(l.statusText))}}const n=await l.json();if(!n)throw new Error("No response from server");const r=n.token||n.accessToken||n.jwt,d=n.username,o={email:e,username:d||e,role:n.role||"USER"};if(!r)throw new Error("No token returned by server");return window.sessionStorage.setItem("authToken",r),window.sessionStorage.setItem("authUser",JSON.stringify(o)),c(r),i(o),!0}catch(l){throw l}},[]),O=Object(s.useCallback)(async(e,t)=>u(e,t),[u]),x=Object(s.useCallback)(()=>{window.sessionStorage.removeItem("authToken"),window.sessionStorage.removeItem("authUser"),window.localStorage.removeItem("authToken"),window.localStorage.removeItem("authUser"),c(null),i(null)},[]);Object(s.useEffect)(()=>{if(!a)return void(o.current&&(clearTimeout(o.current),o.current=null));const e=()=>{h.current=Date.now(),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{Date.now()-h.current>=m&&x()},m)},t=["mousedown","mousemove","keypress","scroll","touchstart"];return t.forEach(t=>window.addEventListener(t,e,!0)),e(),()=>{t.forEach(t=>window.removeEventListener(t,e,!0)),o.current&&clearTimeout(o.current)}},[a,x]);const v={token:a,user:l,isReady:n,login:u,register:O,logout:x};return Object(j.jsx)(b.Provider,{value:v,children:t})}function u(){const e=Object(s.useContext)(b);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function O(e){let{children:t}=e;const{token:a,isReady:c}=u(),l=Object(n.q)();return Object(s.useEffect)(()=>{c&&!a&&l("/login",{replace:!0})},[a,c,l]),c?a?t:null:Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."})}const x=Object(s.createContext)(null);function v(e){let{children:t}=e;const[a,c]=Object(s.useState)(()=>{try{return window.localStorage.getItem("theme")||"light"}catch(e){return"light"}});Object(s.useEffect)(()=>{try{window.localStorage.setItem("theme",a),document.documentElement.setAttribute("data-theme",a)}catch(e){}},[a]);const l={theme:a,toggleTheme:()=>{c(e=>"light"===e?"dark":"light")},isDark:"dark"===a};return Object(j.jsx)(x.Provider,{value:l,children:t})}var g=a(2);a(11);var p=e=>{let{message:t,type:a="info",onClose:c,duration:l=5e3}=e;Object(s.useEffect)(()=>{if(l>0){const e=setTimeout(()=>{c()},l);return()=>clearTimeout(e)}},[l,c]);const i={success:g.m,error:g.b,warning:g.c,info:g.x},n=i[a]||i.info;return Object(j.jsxs)("div",{className:"toast toast-".concat(a),children:[Object(j.jsxs)("div",{className:"toast-content",children:[Object(j.jsx)(n,{className:"toast-icon",size:20}),Object(j.jsx)("span",{className:"toast-message",children:t})]}),Object(j.jsx)("button",{className:"toast-close",onClick:c,"aria-label":"Close",children:Object(j.jsx)(g.O,{size:18})})]})};function N(e){let{toasts:t,removeToast:a}=e;return Object(j.jsx)("div",{className:"toast-container",children:t.map(e=>Object(j.jsx)(p,{message:e.message,type:e.type,onClose:()=>a(e.id),duration:e.duration},e.id))})}const f=Object(s.createContext)(null);function y(e){let{children:t}=e;const[a,c]=Object(s.useState)([]),l=Object(s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const s=Date.now()+Math.random();return c(c=>[...c,{id:s,message:e,type:t,duration:a}]),s},[]),i=Object(s.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),n=Object(s.useCallback)((e,t)=>l(e,"success",t),[l]),r=Object(s.useCallback)((e,t)=>l(e,"error",t),[l]),d=Object(s.useCallback)((e,t)=>l(e,"warning",t),[l]),o=Object(s.useCallback)((e,t)=>l(e,"info",t),[l]),b={addToast:l,removeToast:i,success:n,error:r,warning:d,info:o};return Object(j.jsxs)(f.Provider,{value:b,children:[t,Object(j.jsx)(N,{toasts:a,removeToast:i})]})}function C(){const e=Object(s.useContext)(f);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function S(){return Object(j.jsx)(g.y,{className:"icon-left"})}function w(){return Object(j.jsx)(g.z,{className:"icon-left"})}function k(){const e=Object(n.q)(),t=u(),[a,c]=Object(s.useState)(""),[l,i]=Object(s.useState)(""),[r,d]=Object(s.useState)(!1),[b,m]=Object(s.useState)(""),[h,O]=Object(s.useState)(!1);return Object(j.jsxs)("div",{className:"login-layout",children:[Object(j.jsx)("div",{className:"login-hero",style:{backgroundImage:"url(".concat(o("Images/home.jpg"),")")}}),Object(j.jsx)("div",{className:"auth-container",children:Object(j.jsxs)("div",{className:"auth-card",children:[Object(j.jsx)("div",{className:"logo-container",children:Object(j.jsx)("img",{src:o("Images/logo.png"),alt:"Logo"})}),b?Object(j.jsx)("div",{className:"auth-error",children:b}):null,Object(j.jsx)("h2",{className:"login-title",children:"Members Log in"}),Object(j.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),m("");try{O(!0),await t.login(a,l),e("/",{replace:!0})}catch(c){m(c.message||"Login failed")}finally{O(!1)}},className:"auth-form",children:[Object(j.jsxs)("label",{children:["Email",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(w,{}),Object(j.jsx)("input",{className:"with-icon",type:"email",value:a,onChange:e=>c(e.target.value),required:!0,placeholder:"admin@midland.edu"})]})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsxs)("div",{className:"input-group password-group",children:[Object(j.jsx)(S,{}),Object(j.jsx)("input",{className:"with-icon",type:r?"text":"password",value:l,onChange:e=>i(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),Object(j.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>d(!r),tabIndex:-1,children:r?Object(j.jsx)(g.s,{size:18}):Object(j.jsx)(g.r,{size:18})})]})]}),Object(j.jsx)("button",{type:"submit",className:"auth-button auth-button-red",disabled:h,children:h?"Logging in...":"Log In"})]})]})})]})}function E(){return Object(j.jsx)(g.L,{className:"icon-left"})}function A(){return Object(j.jsx)(g.y,{className:"icon-left"})}function T(){return Object(j.jsx)(g.z,{className:"icon-left"})}function L(){const e=Object(n.q)(),t=u(),[a,c]=Object(s.useState)(""),[l,i]=Object(s.useState)(""),[r,d]=Object(s.useState)(""),[b,m]=Object(s.useState)(""),[h,O]=Object(s.useState)(""),[x,v]=Object(s.useState)(!1);return Object(j.jsxs)("div",{className:"login-layout",children:[Object(j.jsx)("div",{className:"login-hero",style:{backgroundImage:"url(".concat(o("Images/home.jpg"),")")}}),Object(j.jsx)("div",{className:"auth-container register-page",children:Object(j.jsxs)("div",{className:"auth-card wide",children:[Object(j.jsx)("div",{className:"logo-container",children:Object(j.jsx)("img",{src:o("Images/logo.png"),alt:"Logo"})}),h?Object(j.jsx)("div",{className:"auth-error",children:h}):null,Object(j.jsx)("h2",{className:"login-title",children:"Create Account"}),Object(j.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),O(""),r===b)try{v(!0),await t.register(l,r),e("/",{replace:!0})}catch(s){O(s.message||"Registration failed")}finally{v(!1)}else O("Passwords do not match")},className:"auth-form register-form-grid",children:[Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Username",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(E,{}),Object(j.jsx)("input",{className:"with-icon",type:"text",value:a,onChange:e=>c(e.target.value),required:!0,placeholder:"admin_username"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Email",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(T,{}),Object(j.jsx)("input",{className:"with-icon",type:"email",value:l,onChange:e=>i(e.target.value),required:!0,placeholder:"admin@school.com"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Password",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(A,{}),Object(j.jsx)("input",{className:"with-icon",type:"password",value:r,onChange:e=>d(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("label",{children:["Confirm Password",Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)(A,{}),Object(j.jsx)("input",{className:"with-icon",type:"password",value:b,onChange:e=>m(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("button",{type:"submit",className:"auth-button",disabled:x,children:x?"Creating Account...":"Create Account"})})]})]})})]})}a(26);function D(){return Object(j.jsxs)("div",{className:"skeleton-card",children:[Object(j.jsx)("div",{className:"skeleton-icon"}),Object(j.jsxs)("div",{className:"skeleton-content",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-short"}),Object(j.jsx)("div",{className:"skeleton-line skeleton-line-long"})]})]})}function q(e){let{rows:t=5,columns:a=6}=e;return Object(j.jsxs)("div",{className:"skeleton-table-container",children:[Object(j.jsx)("div",{className:"skeleton-table-header",children:Array.from({length:a}).map((e,t)=>Object(j.jsx)("div",{className:"skeleton-header-cell"},t))}),Array.from({length:t}).map((e,t)=>Object(j.jsx)("div",{className:"skeleton-table-row",children:Array.from({length:a}).map((e,t)=>Object(j.jsx)("div",{className:"skeleton-cell"},t))},t))]})}function z(){return Object(j.jsx)("div",{className:"skeleton-form",children:Array.from({length:6}).map((e,t)=>Object(j.jsxs)("div",{className:"skeleton-form-group",children:[Object(j.jsx)("div",{className:"skeleton-label"}),Object(j.jsx)("div",{className:"skeleton-input"})]},t))})}function P(){return Object(j.jsxs)("div",{className:"skeleton-profile",children:[Object(j.jsxs)("div",{className:"skeleton-profile-header",children:[Object(j.jsx)("div",{className:"skeleton-avatar"}),Object(j.jsxs)("div",{className:"skeleton-profile-info",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-long"}),Object(j.jsx)("div",{className:"skeleton-line skeleton-line-medium"})]})]}),Object(j.jsx)("div",{className:"skeleton-profile-sections",children:Array.from({length:3}).map((e,t)=>Object(j.jsxs)("div",{className:"skeleton-section",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-short"}),Object(j.jsx)("div",{className:"skeleton-grid",children:Array.from({length:4}).map((e,t)=>Object(j.jsxs)("div",{className:"skeleton-grid-item",children:[Object(j.jsx)("div",{className:"skeleton-line skeleton-line-short"}),Object(j.jsx)("div",{className:"skeleton-line skeleton-line-medium"})]},t))})]},t))})]})}a(27);function F(){const{token:e}=u(),t=C(),a=Object(n.q)(),[c,l]=Object(s.useState)({students:0,teachers:0,admins:0,schools:6e3}),[i,o]=Object(s.useState)(!0),b=Object(s.useCallback)(async()=>{o(!0);try{let a=0;try{const t=r("/midland/admin/students/all"),s=await fetch(t,{headers:d(e)});if(s.ok){const e=await s.json();a=Array.isArray(e)?e.length:0}}catch(t){a=1250}let s=0;try{const t=r("/midland/admin/teachers/all"),a=await fetch(t,{headers:d(e)});if(a.ok){const e=await a.json();s=Array.isArray(e)?e.length:0}}catch(t){s=85}let c=0;try{const t=r("/midland/admin/all"),a=await fetch(t,{headers:d(e)});if(a.ok){const e=await a.json();c=Array.isArray(e)?e.length:0}}catch(t){c=12}l({students:a||1250,teachers:s||85,admins:c||12,schools:6e3})}catch(t){l({students:1250,teachers:85,admins:12,schools:6e3})}finally{o(!1)}},[e]);Object(s.useEffect)(()=>{b()},[b]);const m=[{label:"Total Schools",count:c.schools,icon:g.v,color:"#ef4444",bgGradient:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",link:"/",trend:{value:"+12%",direction:"up",caption:"vs last month"},subtitle:"Active institutions"},{label:"Students",count:c.students,icon:g.N,color:"#3b82f6",bgGradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",link:"/students",trend:{value:"+8%",direction:"up",caption:"vs last month"},subtitle:"Enrolled students"},{label:"Teachers",count:c.teachers,icon:g.M,color:"#10b981",bgGradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",link:"/teachers",trend:{value:"+5%",direction:"up",caption:"vs last month"},subtitle:"Active faculty"},{label:"Administrators",count:c.admins,icon:g.L,color:"#f59e0b",bgGradient:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",link:"/admin",trend:{value:"+2%",direction:"up",caption:"vs last month"},subtitle:"Admin staff"}],h=[{label:"Overall Attendance",value:"94.5%",icon:g.K,trend:"+2.3%",caption:"vs last term",color:"#10b981",change:"positive"},{label:"Active Classes",value:"156",icon:g.i,trend:"+5",caption:"new this month",color:"#3b82f6",change:"positive"},{label:"Upcoming Events",value:"8",icon:g.l,trend:"This month",caption:"Scheduled",color:"#f59e0b",change:"neutral"},{label:"Performance Rate",value:"87%",icon:g.h,trend:"-1.2%",caption:"needs attention",color:"#8b5cf6",change:"negative"}],O=[{icon:g.N,label:"Add Student",action:()=>a("/students/create"),color:"#ef4444",description:"Create a new student profile"},{icon:g.M,label:"Add Teacher",action:()=>a("/teachers/create"),color:"#3b82f6",description:"Onboard teaching staff"},{icon:g.L,label:"Add Admin",action:()=>a("/admin/create"),color:"#10b981",description:"Grant administrative access"},{icon:g.i,label:"View Subjects",action:()=>a("/subjects"),color:"#f59e0b",description:"Manage curriculum"},{icon:g.l,label:"Timetable",action:()=>a("/timetable"),color:"#8b5cf6",description:"Review daily schedule"},{icon:g.a,label:"Reports",action:()=>t.info("Analytics dashboard coming soon"),color:"#ec4899",description:"Analyze performance data"}],x=[{type:"student",message:"New student enrolled",time:"2 hours ago",icon:g.N},{type:"teacher",message:"Teacher profile updated",time:"5 hours ago",icon:g.M},{type:"event",message:"Parent meeting scheduled",time:"1 day ago",icon:g.l},{type:"admin",message:"System backup completed",time:"2 days ago",icon:g.a}];return Object(j.jsxs)("div",{className:"page dashboard-modern",children:[Object(j.jsxs)("div",{className:"dashboard-header-modern",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"dashboard-title",children:"Dashboard Overview"}),Object(j.jsx)("p",{className:"dashboard-subtitle",children:"Welcome back! Here's what's happening today."})]}),Object(j.jsxs)("div",{className:"dashboard-date",children:[Object(j.jsx)(g.p,{size:18}),Object(j.jsx)("span",{children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),i?Object(j.jsx)("div",{className:"dashboard-grid-modern",children:[1,2,3,4].map(e=>Object(j.jsx)(D,{},e))}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"dashboard-grid-modern",children:m.map((e,t)=>{const s=e.icon,c="down"===e.trend.direction?g.J:g.K,l="card-trend ".concat(e.trend.direction);return Object(j.jsxs)("div",{className:"dashboard-card-modern",onClick:()=>e.link&&a(e.link),style:{"--card-color":e.color},role:"button",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.link&&a(e.link))},children:[Object(j.jsx)("div",{className:"card-background",style:{background:e.bgGradient}}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"card-header",children:[Object(j.jsx)("div",{className:"card-icon-wrapper",style:{background:"".concat(e.color,"20")},children:Object(j.jsx)(s,{size:20,style:{color:e.color}})}),Object(j.jsxs)("div",{className:l,children:[Object(j.jsx)(c,{size:12}),Object(j.jsx)("strong",{children:e.trend.value}),Object(j.jsx)("span",{className:"trend-caption",children:e.trend.caption})]})]}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"card-count",children:e.count.toLocaleString()}),Object(j.jsx)("div",{className:"card-label",children:e.label}),Object(j.jsx)("div",{className:"card-subtitle",children:e.subtitle})]})]})]},t)})}),Object(j.jsx)("div",{className:"dashboard-stats-modern",children:h.map((e,t)=>{const a=e.icon;return Object(j.jsxs)("div",{className:"stat-card-modern",children:[Object(j.jsx)("div",{className:"stat-icon-modern",style:{background:"".concat(e.color,"15"),color:e.color},children:Object(j.jsx)(a,{size:20})}),Object(j.jsxs)("div",{className:"stat-content-modern",children:[Object(j.jsx)("div",{className:"stat-value-modern",style:{color:e.color},children:e.value}),Object(j.jsx)("div",{className:"stat-label-modern",children:e.label}),Object(j.jsxs)("div",{className:"stat-trend-modern ".concat(e.change),children:["positive"===e.change&&Object(j.jsx)(g.K,{size:12}),"negative"===e.change&&Object(j.jsx)(g.J,{size:12}),Object(j.jsx)("span",{children:e.trend}),Object(j.jsx)("small",{children:e.caption})]})]})]},t)})}),Object(j.jsxs)("div",{className:"dashboard-bottom-section",children:[Object(j.jsxs)("div",{className:"quick-actions-modern",children:[Object(j.jsx)("h3",{className:"section-title",children:"Quick Actions"}),Object(j.jsx)("div",{className:"quick-actions-grid-modern",children:O.map((e,t)=>{const a=e.icon;return Object(j.jsxs)("button",{type:"button",className:"quick-action-modern",onClick:e.action,style:{"--action-color":e.color},"aria-label":e.description,children:[Object(j.jsx)("div",{className:"action-icon-wrapper",style:{background:"".concat(e.color,"15")},children:Object(j.jsx)(a,{size:22,style:{color:e.color}})}),Object(j.jsxs)("div",{className:"quick-action-content",children:[Object(j.jsx)("span",{className:"quick-action-label",children:e.label}),Object(j.jsx)("span",{className:"quick-action-description",children:e.description})]})]},t)})})]}),Object(j.jsxs)("div",{className:"recent-activity-modern",children:[Object(j.jsx)("h3",{className:"section-title",children:"Recent Activity"}),Object(j.jsx)("div",{className:"activity-list",children:x.map((e,t)=>{const a=e.icon;return Object(j.jsxs)("div",{className:"activity-item",children:[Object(j.jsx)("div",{className:"activity-icon",children:Object(j.jsx)(a,{size:18})}),Object(j.jsxs)("div",{className:"activity-content",children:[Object(j.jsx)("div",{className:"activity-message",children:e.message}),Object(j.jsx)("div",{className:"activity-time",children:e.time})]})]},t)})})]})]})]})]})}var I=a(7),R=a.n(I);a(39);const M={students:g.N,teachers:g.N,admins:g.N,subjects:g.i,timetable:g.l,default:g.w};function U(e){let{type:t="default",title:a,message:s,actionLabel:c,onAction:l,icon:i}=e;const n=i||M[t]||M.default,r={students:{title:"No Students Found",message:"Get started by adding your first student to the system."},teachers:{title:"No Teachers Found",message:"Add teachers to manage classes and subjects."},admins:{title:"No Administrators Found",message:"Add administrators to manage the school system."},subjects:{title:"No Subjects Found",message:"Create subjects to organize your curriculum."},timetable:{title:"No Timetable Entries",message:"Create timetable entries to schedule classes."},default:{title:a||"No Data Available",message:s||"There is no data to display at this time."}},d=r[t]||r.default;return Object(j.jsxs)("div",{className:"empty-state",children:[Object(j.jsx)("div",{className:"empty-state-icon",children:Object(j.jsx)(n,{size:64})}),Object(j.jsx)("h3",{className:"empty-state-title",children:d.title}),Object(j.jsx)("p",{className:"empty-state-message",children:d.message}),l&&Object(j.jsx)("button",{className:"empty-state-action btn-secondary",onClick:l,children:c||"Add New"})]})}a(40);function B(e){let{status:t,variant:a="default"}=e;const s={active:{label:"Active",color:"green"},inactive:{label:"Inactive",color:"gray"},pending:{label:"Pending",color:"yellow"},completed:{label:"Completed",color:"green"},cancelled:{label:"Cancelled",color:"red"},default:{label:t||"Unknown",color:"gray"}},c=s[null===t||void 0===t?void 0:t.toLowerCase()]||s.default;return Object(j.jsx)("span",{className:"status-badge status-badge-".concat(c.color," status-badge-").concat(a),children:c.label})}a(41);function G(e){let{currentPage:t,totalPages:a,onPageChange:s}=e;if(a<=1)return null;const c=(()=>{const e=[];if(a<=5)for(let t=1;t<=a;t++)e.push(t);else if(t<=3)for(let t=1;t<=5;t++)e.push(t);else if(t>=a-2)for(let t=a-4;t<=a;t++)e.push(t);else for(let a=t-2;a<=t+2;a++)e.push(a);return e})();return Object(j.jsx)("div",{className:"pagination-container",children:Object(j.jsxs)("div",{className:"pagination-controls",children:[Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>s(t-1),disabled:1===t,"aria-label":"Previous page",children:Object(j.jsx)(g.n,{size:18})}),c[0]>1&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>s(1),children:"1"}),c[0]>2&&Object(j.jsx)("span",{className:"pagination-ellipsis",children:"..."})]}),c.map(e=>Object(j.jsx)("button",{className:"pagination-btn ".concat(t===e?"active":""),onClick:()=>s(e),children:e},e)),c[c.length-1]<a&&Object(j.jsxs)(j.Fragment,{children:[c[c.length-1]<a-1&&Object(j.jsx)("span",{className:"pagination-ellipsis",children:"..."}),Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>s(a),children:a})]}),Object(j.jsx)("button",{className:"pagination-btn",onClick:()=>s(t+1),disabled:t===a,"aria-label":"Next page",children:Object(j.jsx)(g.o,{size:18})})]})})}a(42);function K(e){let{children:t,sortKey:a,currentSort:s=null,onSort:c,className:l=""}=e;const i=(null===s||void 0===s?void 0:s.key)===a,n=i&&null!==s&&void 0!==s&&s.direction?s.direction:null;return Object(j.jsx)("th",{className:"sortable-header ".concat(l," ").concat(i?"active":""," ").concat(c?"clickable":""),onClick:c?()=>{if(c){c(a,i&&"asc"===n?"desc":"asc")}}:void 0,children:Object(j.jsxs)("div",{className:"sortable-header-content",children:[Object(j.jsx)("span",{children:t}),c&&Object(j.jsx)("span",{className:"sort-icon",children:"asc"===n?Object(j.jsx)(g.g,{size:14}):"desc"===n?Object(j.jsx)(g.d,{size:14}):Object(j.jsxs)("span",{style:{display:"flex",flexDirection:"column",lineHeight:.5},children:[Object(j.jsx)(g.g,{size:10}),Object(j.jsx)(g.d,{size:10})]})})]})})}function H(){const e=Object(n.q)(),{token:t}=u(),a=C(),[c,l]=Object(s.useState)(""),[i,o]=Object(s.useState)(""),[b,m]=Object(s.useState)(""),[h,O]=Object(s.useState)([]),[x,v]=Object(s.useState)(!1),[p,N]=Object(s.useState)(""),[f,y]=Object(s.useState)(!1),[S,w]=Object(s.useState)(""),[k,E]=Object(s.useState)(!1),[A,T]=Object(s.useState)(""),[L,D]=Object(s.useState)(1),[z,P]=Object(s.useState)({key:null,direction:"asc"}),F=Object(s.useCallback)(async()=>{v(!0),N("");try{const e=r("/midland/admin/students/all"),a=await fetch(e,{headers:d(t)});if(!a.ok)throw new Error("Failed to load students: ".concat(a.status," ").concat(a.statusText));const s=await a.json();O(Array.isArray(s)?s:[])}catch(e){const t=e.message||"Failed to load students";e.message&&(e.message.includes("CORS")||e.message.includes("Failed to fetch")||e.message.includes("NetworkError"))?(N("CORS error: The backend at http://4.198.16.72.nip.io needs to allow requests from your frontend origin. Please configure CORS headers on the backend."),a.error("Failed to load students. Please check your connection.")):(N(t),a.error(t))}finally{v(!1)}},[t,a]);Object(s.useEffect)(()=>{F()},[F]),Object(s.useEffect)(()=>{const e=e=>{"Escape"===e.key&&f&&!k&&(y(!1),T(""))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,k]),Object(s.useEffect)(()=>{try{R.a.setAppElement("#root")}catch(e){}},[]);const I=Object(s.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.gradeLevel||"").trim()).filter(Boolean))),[h]),M=Object(s.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.section||"").trim()).filter(Boolean))),[h]),H=(e,t)=>{P({key:e,direction:t}),D(1)},J=Object(s.useMemo)(()=>{const e=c.trim().toLowerCase();let t=h.filter(t=>{const a=String(t.admissionNumber||t.rollNo||"").toLowerCase(),s=String(t.fullName||"").toLowerCase(),c=String(t.schoolEmail||t.personalEmail||"").toLowerCase(),l=!e||a.includes(e)||s.includes(e)||c.includes(e),n=!i||String(t.gradeLevel||"")===i,r=!b||String(t.section||"")===b;return l&&n&&r}).map(e=>({key:e.admissionNumber||e.rollNo||e.studentUid||Math.random(),id:e.admissionNumber||e.rollNo||"-",name:e.fullName||"-",email:e.schoolEmail||e.personalEmail||"-",class:e.gradeLevel||"-",section:e.section||"-",status:e.status||"Active",emailKey:e.schoolEmail||e.personalEmail||""}));return z.key&&t.sort((e,t)=>{let a=e[z.key],s=t[z.key];return"string"===typeof a&&(a=a.toLowerCase(),s=s.toLowerCase()),a<s?"asc"===z.direction?-1:1:a>s?"asc"===z.direction?1:-1:0}),t},[h,c,i,b,z]),W=Math.ceil(J.length/6),Y=6*(L-1),_=Y+6,V=J.slice(Y,_);return Object(s.useEffect)(()=>{L>W&&W>0&&D(1)},[W,L]),Object(j.jsxs)("div",{className:"page students",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Students"}),Object(j.jsx)("div",{className:"meta",children:x?"Loading\u2026":"".concat(J.length," student").concat(1!==J.length?"s":"")})]}),Object(j.jsxs)("button",{className:"btn-primary",onClick:()=>e("/students/create"),children:[Object(j.jsx)(g.E,{size:18,style:{marginRight:8}}),"Add Student"]})]}),p&&Object(j.jsx)("div",{className:"alert alert-error",children:p}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsxs)("div",{className:"filter-input-wrapper",children:[Object(j.jsx)(g.F,{className:"filter-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search by ID, name, or email...",value:c,onChange:e=>l(e.target.value),className:"filter-input"})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.i,{className:"filter-icon"}),Object(j.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Classes"}),I.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.u,{className:"filter-icon"}),Object(j.jsxs)("select",{value:b,onChange:e=>m(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Sections"}),M.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]})]}),x?Object(j.jsx)(q,{rows:5,columns:7}):0===J.length?Object(j.jsx)(U,{type:"students",actionLabel:"Add Student",onAction:()=>e("/students/create")}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(K,{sortKey:"id",currentSort:z,onSort:H,children:"ID"}),Object(j.jsx)(K,{sortKey:"name",currentSort:z,onSort:H,children:"Name"}),Object(j.jsx)(K,{sortKey:"email",currentSort:z,onSort:H,children:"Email"}),Object(j.jsx)(K,{sortKey:"class",currentSort:z,onSort:H,children:"Class"}),Object(j.jsx)(K,{sortKey:"section",currentSort:z,onSort:H,children:"Section"}),Object(j.jsx)(K,{sortKey:"status",currentSort:z,onSort:H,children:"Status"}),Object(j.jsx)(K,{className:"actions-column",children:"Actions"})]})}),Object(j.jsx)("tbody",{children:V.map(t=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"cell-id",children:t.id}),Object(j.jsx)("td",{className:"cell-name",children:Object(j.jsx)("button",{className:"name-link",onClick:()=>e("/students/".concat(t.emailKey||t.id)),title:"View Profile",children:t.name})}),Object(j.jsx)("td",{className:"cell-email",children:t.email}),Object(j.jsx)("td",{className:"cell-small",children:t.class}),Object(j.jsx)("td",{className:"cell-small",children:t.section}),Object(j.jsx)("td",{className:"cell-status",children:Object(j.jsx)(B,{status:t.status})}),Object(j.jsx)("td",{className:"cell-actions",children:Object(j.jsxs)("div",{className:"action-buttons",children:[Object(j.jsx)("button",{className:"btn-icon",onClick:()=>e("/students/".concat(t.emailKey||t.id,"/edit")),title:"Edit","aria-label":"Edit student",children:Object(j.jsx)(g.q,{size:18})}),Object(j.jsx)("button",{className:"btn-icon btn-danger",onClick:()=>{w(t.emailKey),y(!0)},title:"Delete","aria-label":"Delete student",children:Object(j.jsx)(g.I,{size:18})})]})})]},t.key))})]})}),!x&&J.length>0&&Object(j.jsx)(G,{currentPage:L,totalPages:W,onPageChange:D}),Object(j.jsx)(R.a,{isOpen:f,onRequestClose:()=>!k&&y(!1),className:"modal",overlayClassName:"modal-overlay",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h3",{children:"Delete Student"}),Object(j.jsx)("p",{children:"Are you sure you want to delete this student? This action cannot be undone."}),A&&Object(j.jsx)("div",{className:"alert alert-error",style:{marginBottom:16},children:A}),Object(j.jsxs)("div",{className:"modal-actions",children:[Object(j.jsx)("button",{className:"btn-secondary",onClick:()=>y(!1),disabled:k,children:"Cancel"}),Object(j.jsx)("button",{className:"btn-danger",disabled:k,onClick:async()=>{if(S){E(!0),T("");try{const e=encodeURIComponent(S),s=r("/midland/admin/students/delete/".concat(e)),c=await fetch(s,{method:"DELETE",headers:d(t)});if(!c.ok){const e=await c.text().catch(()=>"");throw new Error(e||"Failed to delete: ".concat(c.status))}y(!1),a.success("Student deleted successfully"),F()}catch(e){const t=e.message||"Failed to delete student";T(t),a.error(t)}finally{E(!1)}}},children:k?"Deleting\u2026":"Delete"})]})]})})]})}var J=a(3);function W(){const e=Object(n.q)(),{token:t}=u(),a=C(),[c,l]=Object(s.useState)({username:"",password:"",fullName:"",gender:"",dateOfBirth:"",bloodGroup:"",nationality:"",motherTongue:"",languagePreference:"",gradeLevel:"",section:"",academicYear:"",admissionDate:"",status:"Active",admissionNumber:"",rollNo:"",phoneNumber:"",schoolEmail:"",personalEmail:"",guardianName:"",guardianRelation:"",guardianContact:"",schoolCode:""}),[i,o]=Object(s.useState)(!1),[b,m]=Object(s.useState)(""),[h,O]=Object(s.useState)({}),x=(e,t)=>{l(Object(J.a)(Object(J.a)({},c),{},{[e]:t})),h[e]&&O(Object(J.a)(Object(J.a)({},h),{},{[e]:""}))};return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Create New Student"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/students"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),b&&Object(j.jsx)("div",{className:"alert alert-error",children:b}),Object(j.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),m(""),o(!0);try{const s={username:String(c.username||"").trim(),password:String(c.password||"").trim(),fullName:String(c.fullName||"").trim(),gender:String(c.gender||"").trim(),dateOfBirth:String(c.dateOfBirth||"").trim(),bloodGroup:String(c.bloodGroup||"").trim(),nationality:String(c.nationality||"").trim(),motherTongue:String(c.motherTongue||"").trim(),languagePreference:String(c.languagePreference||"").trim(),gradeLevel:String(c.gradeLevel||"").trim(),section:String(c.section||"").trim(),academicYear:String(c.academicYear||"").trim(),admissionDate:String(c.admissionDate||"").trim(),status:String(c.status||"Active").trim(),admissionNumber:String(c.admissionNumber||"").trim(),rollNo:String(c.rollNo||"").trim(),phoneNumber:String(c.phoneNumber||"").trim(),schoolEmail:String(c.schoolEmail||"").trim(),personalEmail:String(c.personalEmail||"").trim(),guardianName:String(c.guardianName||"").trim(),guardianRelation:String(c.guardianRelation||"").trim(),guardianContact:String(c.guardianContact||"").trim(),schoolCode:String(c.schoolCode||"").trim()},l=r("/midland/admin/students/create"),i=await fetch(l,{method:"POST",headers:d(t),body:JSON.stringify(s)});if(!i.ok){const e=await i.text().catch(()=>"");throw new Error(e||"Failed to create: ".concat(i.status))}a.success("Student created successfully"),e("/students",{replace:!0})}catch(l){const e=l.message||"Failed to create student";m(e),a.error(e)}finally{o(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:c.username,onChange:e=>x("username",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Password *",Object(j.jsx)("input",{type:"password",value:c.password,onChange:e=>x("password",e.target.value),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:c.fullName,onChange:e=>x("fullName",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:c.gender,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:c.dateOfBirth,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{dateOfBirth:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Blood Group",Object(j.jsx)("input",{value:c.bloodGroup,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{bloodGroup:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Nationality",Object(j.jsx)("input",{value:c.nationality,onChange:e=>x("nationality",e.target.value)})]}),Object(j.jsxs)("label",{children:["Mother Tongue",Object(j.jsx)("input",{value:c.motherTongue,onChange:e=>x("motherTongue",e.target.value)})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.i,{}),"Academic Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:c.schoolCode,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{schoolCode:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Class *",Object(j.jsx)("input",{value:c.gradeLevel,onChange:e=>x("gradeLevel",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Section *",Object(j.jsx)("input",{value:c.section,onChange:e=>x("section",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Academic Year *",Object(j.jsx)("input",{value:c.academicYear,onChange:e=>x("academicYear",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Admission Date *",Object(j.jsx)("input",{type:"date",value:c.admissionDate,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{admissionDate:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Status",Object(j.jsxs)("select",{value:c.status,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{status:e.target.value})),children:[Object(j.jsx)("option",{value:"Active",children:"Active"}),Object(j.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),Object(j.jsxs)("label",{children:["Admission No *",Object(j.jsx)("input",{value:c.admissionNumber,onChange:e=>x("admissionNumber",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Roll No *",Object(j.jsx)("input",{value:c.rollNo,onChange:e=>x("rollNo",e.target.value),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:c.phoneNumber,onChange:e=>x("phoneNumber",e.target.value)})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:c.schoolEmail,onChange:e=>x("schoolEmail",e.target.value),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:c.personalEmail,onChange:e=>x("personalEmail",e.target.value)})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.N,{}),"Guardian Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Guardian Name",Object(j.jsx)("input",{value:c.guardianName,onChange:e=>x("guardianName",e.target.value)})]}),Object(j.jsxs)("label",{children:["Guardian Relation",Object(j.jsx)("input",{value:c.guardianRelation,onChange:e=>x("guardianRelation",e.target.value)})]}),Object(j.jsxs)("label",{children:["Guardian Contact",Object(j.jsx)("input",{value:c.guardianContact,onChange:e=>x("guardianContact",e.target.value)})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/students"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Creating...":"Create Student"})]})]})]})}function Y(){const e=Object(n.q)(),{id:t}=Object(n.s)(),{token:a}=u(),c=C(),[l,i]=Object(s.useState)({}),[o,b]=Object(s.useState)(!0),[m,h]=Object(s.useState)(!1),[O,x]=Object(s.useState)("");if(Object(s.useEffect)(()=>{let e=!0;return async function(){b(!0),x("");try{const s=r("/midland/admin/students/all"),l=await fetch(s,{headers:d(a)});if(!l.ok)throw new Error("Failed to load student");const n=await l.json(),o=(Array.isArray(n)?n:[]).find(e=>String(e.schoolEmail)===t||String(e.personalEmail)===t||String(e.admissionNumber)===t||String(e.rollNo)===t);e&&(o?i(o):(x("Student not found"),c.error("Student not found")))}catch(s){const t=s.message||"Failed to load student";e&&x(t),c.error(t)}finally{e&&b(!1)}}(),()=>{e=!1}},[t,a,c]),o)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(z,{})});if(O&&!l.schoolEmail)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:O})});const v=l.schoolEmail||l.personalEmail||t;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Edit Student"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/students"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),O&&Object(j.jsx)("div",{className:"alert alert-error",children:O}),Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),x(""),h(!0);try{const t=Object(J.a)({},l),s=r("/midland/admin/students/update/".concat(encodeURIComponent(v))),i=await fetch(s,{method:"PUT",headers:d(a),body:JSON.stringify(t)});if(!i.ok){const e=await i.text().catch(()=>"");throw new Error(e||"Failed to update: ".concat(i.status))}c.success("Student updated successfully"),e("/students",{replace:!0})}catch(s){const e=s.message||"Failed to update student";x(e),c.error(e)}finally{h(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Account"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:l.username||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{type:"password",value:l.password||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{password:e.target.value})),placeholder:"Leave blank to keep current password"})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Personal Info"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:l.fullName||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:l.gender||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:l.dateOfBirth||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{dateOfBirth:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Blood Group",Object(j.jsx)("input",{value:l.bloodGroup||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{bloodGroup:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Nationality",Object(j.jsx)("input",{value:l.nationality||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{nationality:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Mother Tongue",Object(j.jsx)("input",{value:l.motherTongue||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{motherTongue:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Academic Info"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:l.schoolCode||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{schoolCode:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Class *",Object(j.jsx)("input",{value:l.gradeLevel||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{gradeLevel:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Section *",Object(j.jsx)("input",{value:l.section||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{section:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Academic Year *",Object(j.jsx)("input",{value:l.academicYear||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{academicYear:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Admission Date *",Object(j.jsx)("input",{type:"date",value:l.admissionDate||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{admissionDate:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Status",Object(j.jsxs)("select",{value:l.status||"Active",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{status:e.target.value})),children:[Object(j.jsx)("option",{value:"Active",children:"Active"}),Object(j.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),Object(j.jsxs)("label",{children:["Admission No *",Object(j.jsx)("input",{value:l.admissionNumber||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{admissionNumber:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Roll No *",Object(j.jsx)("input",{value:l.rollNo||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{rollNo:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Contact Details"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:l.phoneNumber||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:l.schoolEmail||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:l.personalEmail||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Guardian Info"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Guardian Name",Object(j.jsx)("input",{value:l.guardianName||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{guardianName:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Guardian Relation",Object(j.jsx)("input",{value:l.guardianRelation||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{guardianRelation:e.target.value}))})]}),Object(j.jsxs)("label",{children:["Guardian Contact",Object(j.jsx)("input",{value:l.guardianContact||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{guardianContact:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/students"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Updating...":"Update Student"})]})]})]})}a(43);function _(){const{id:e}=Object(n.s)(),t=Object(n.q)(),{token:a}=u(),c=C(),[l,i]=Object(s.useState)(null),[o,b]=Object(s.useState)(!0),[m,h]=Object(s.useState)(""),[O,x]=Object(s.useState)("basic");Object(s.useEffect)(()=>{let t=!0;return async function(){b(!0),h("");try{let l=null;try{const t=r("/midland/admin/students/admission/".concat(e)),s=await fetch(t,{headers:d(a)});s.ok&&(l=await s.json())}catch(s){}if(!l){const t=r("/midland/admin/students/all"),s=await fetch(t,{headers:d(a)});if(!s.ok)throw new Error("Failed to load student");const c=await s.json(),i=Array.isArray(c)?c:[];l=i.find(t=>String(t.studentUid)===e||String(t.admissionNumber)===e||String(t.rollNo)===e||String(t.schoolEmail)===e||String(t.personalEmail)===e)||null}t&&(i(l),l||(h("Student not found"),c.error("Student not found")))}catch(s){const e=s.message||"Failed to load student";t&&h(e),c.error(e)}finally{t&&b(!1)}}(),()=>{t=!1}},[e,a,c]);const v=Object(s.useMemo)(()=>{const e=((null===l||void 0===l?void 0:l.fullName)||"").trim();if(!e)return"??";const t=e.split(/\s+/);return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},[l]);if(o)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(P,{})});if(m||!l)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:m||"Student not found"})});const p=l.phoneNumber||"",N=l.schoolEmail||l.personalEmail||"",f=p?"tel:".concat(String(p).replace(/\s+/g,"")):null,y=N?"mailto:".concat(N):null,S=[{id:"basic",label:"Basic",icon:g.L},{id:"academic",label:"Academic",icon:g.j},{id:"contact",label:"Contact",icon:g.D},{id:"guardian",label:"Guardian",icon:g.N}];return Object(j.jsxs)("div",{className:"page student-profile-page",children:[Object(j.jsxs)("div",{className:"profile-header-section",children:[Object(j.jsxs)("div",{className:"profile-header-left",children:[Object(j.jsx)("button",{className:"back-button",onClick:()=>t("/students"),children:Object(j.jsx)(g.e,{size:20})}),Object(j.jsx)("h1",{children:"Student Profile"})]}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>t("/students/".concat(e,"/edit")),children:[Object(j.jsx)(g.q,{size:16,style:{marginRight:8}}),"Edit Profile"]})]}),Object(j.jsxs)("div",{className:"profile-top-card",children:[Object(j.jsx)("div",{className:"profile-avatar-large",children:v}),Object(j.jsxs)("div",{className:"profile-info-main",children:[Object(j.jsx)("h2",{className:"profile-name",children:l.fullName||"-"}),Object(j.jsxs)("div",{className:"profile-badges",children:[Object(j.jsxs)("div",{className:"info-badge purple",children:[Object(j.jsx)(g.l,{size:14}),Object(j.jsxs)("span",{children:["Class ",l.gradeLevel||"-"," \u2022 Sec ",l.section||"-"]})]}),Object(j.jsx)(B,{status:l.status||"Active"}),Object(j.jsxs)("div",{className:"info-badge orange",children:[Object(j.jsx)(g.u,{size:14}),Object(j.jsxs)("span",{children:["# ",l.admissionNumber||l.rollNo||"-"]})]})]}),Object(j.jsxs)("div",{className:"contact-cards",children:[Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.C,{size:18}),p?Object(j.jsx)("a",{className:"contact-card-link",href:f,children:p}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.z,{size:18}),N?Object(j.jsx)("a",{className:"contact-card-link",href:y,children:N}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.v,{size:18}),Object(j.jsx)("span",{children:l.address||"N/A"})]})]})]})]}),Object(j.jsxs)("div",{className:"profile-metrics-grid",children:[Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"CLASS"}),Object(j.jsx)("div",{className:"metric-value",children:l.gradeLevel||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SECTION"}),Object(j.jsx)("div",{className:"metric-value",children:l.section||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"ACADEMIC YEAR"}),Object(j.jsx)("div",{className:"metric-value",children:l.academicYear||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"STATUS"}),Object(j.jsx)("div",{className:"metric-value",children:l.status||"Active"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"ATTENDANCE"}),Object(j.jsx)("div",{className:"metric-value",children:"86%"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"FEES DUE"}),Object(j.jsx)("div",{className:"metric-value",children:"\u20b9 0"})]})]}),Object(j.jsxs)("div",{className:"profile-content-layout",children:[Object(j.jsxs)("div",{className:"profile-tabs-section",children:[Object(j.jsx)("div",{className:"profile-tabs",children:S.map(e=>{const t=e.icon;return Object(j.jsxs)("button",{className:"profile-tab ".concat(O===e.id?"active":""),onClick:()=>x(e.id),type:"button",children:[Object(j.jsx)(t,{size:16}),Object(j.jsx)("span",{children:e.label})]},e.id)})}),Object(j.jsxs)("div",{className:"profile-tab-content",children:["basic"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Full Name"}),Object(j.jsx)("div",{className:"field-value",children:l.fullName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Gender"}),Object(j.jsx)("div",{className:"field-value",children:l.gender||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Date of Birth"}),Object(j.jsx)("div",{className:"field-value",children:l.dateOfBirth||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Blood Group"}),Object(j.jsx)("div",{className:"field-value",children:l.bloodGroup||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Nationality"}),Object(j.jsx)("div",{className:"field-value",children:l.nationality||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Mother Tongue"}),Object(j.jsx)("div",{className:"field-value",children:l.motherTongue||"-"})]})]}),"academic"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Admission Number"}),Object(j.jsx)("div",{className:"field-value",children:l.admissionNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Roll No"}),Object(j.jsx)("div",{className:"field-value",children:l.rollNo||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Class"}),Object(j.jsx)("div",{className:"field-value",children:l.gradeLevel||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Section"}),Object(j.jsx)("div",{className:"field-value",children:l.section||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Academic Year"}),Object(j.jsx)("div",{className:"field-value",children:l.academicYear||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Admission Date"}),Object(j.jsx)("div",{className:"field-value",children:l.admissionDate||"-"})]})]}),"contact"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Phone Number"}),Object(j.jsx)("div",{className:"field-value",children:l.phoneNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Email"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Personal Email"}),Object(j.jsx)("div",{className:"field-value",children:l.personalEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Address"}),Object(j.jsx)("div",{className:"field-value",children:l.address||"-"})]})]}),"guardian"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Guardian Name"}),Object(j.jsx)("div",{className:"field-value",children:l.guardianName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Relation"}),Object(j.jsx)("div",{className:"field-value",children:l.guardianRelation||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Guardian Contact"}),Object(j.jsx)("div",{className:"field-value",children:l.guardianContact||"-"})]})]})]})]}),Object(j.jsxs)("div",{className:"attendance-summary-card",children:[Object(j.jsx)("h3",{children:"Attendance Summary"}),Object(j.jsxs)("div",{className:"attendance-percentage",children:[Object(j.jsx)("strong",{children:"86%"}),Object(j.jsx)("span",{children:"Overall attendance"})]}),Object(j.jsxs)("div",{className:"attendance-bars",children:[Object(j.jsxs)("div",{className:"attendance-bar-item",children:[Object(j.jsx)("div",{className:"bar-label",children:"PRESENT"}),Object(j.jsx)("div",{className:"bar-container",children:Object(j.jsx)("div",{className:"bar-fill present",style:{width:"86%"}})})]}),Object(j.jsxs)("div",{className:"attendance-bar-item",children:[Object(j.jsx)("div",{className:"bar-label",children:"ABSENT"}),Object(j.jsx)("div",{className:"bar-container",children:Object(j.jsx)("div",{className:"bar-fill absent",style:{width:"14%"}})})]})]})]})]})]})}function V(){const e=Object(n.q)(),{token:t}=u(),a=C(),[c,l]=Object(s.useState)(""),[i,o]=Object(s.useState)(""),[b,m]=Object(s.useState)(""),[h,O]=Object(s.useState)([]),[x,v]=Object(s.useState)(!1),[p,N]=Object(s.useState)(""),[f,y]=Object(s.useState)(!1),[S,w]=Object(s.useState)(""),[k,E]=Object(s.useState)(!1),[A,T]=Object(s.useState)(""),[L,D]=Object(s.useState)(1),[z,P]=Object(s.useState)({key:null,direction:"asc"}),F=Object(s.useCallback)(async()=>{v(!0),N("");try{const e=r("/midland/admin/teachers/all"),a=await fetch(e,{headers:d(t)});if(!a.ok)throw new Error("Failed to load teachers: ".concat(a.status," ").concat(a.statusText));const s=await a.json();O(Array.isArray(s)?s:[])}catch(e){const t=e.message||"Failed to load teachers";N(t),a.error(t)}finally{v(!1)}},[t,a]);Object(s.useEffect)(()=>{F()},[F]),Object(s.useEffect)(()=>{try{R.a.setAppElement("#root")}catch(e){}},[]);const I=Object(s.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.department||"").trim()).filter(Boolean))),[h]),M=Object(s.useMemo)(()=>Array.from(new Set(h.map(e=>String(e.designation||"").trim()).filter(Boolean))),[h]),H=(e,t)=>{P({key:e,direction:t}),D(1)},J=Object(s.useMemo)(()=>{const e=c.trim().toLowerCase();let t=h.filter(t=>{const a=String(t.fullName||"").toLowerCase(),s=String(t.schoolEmail||t.personalEmail||"").toLowerCase(),c=!e||a.includes(e)||s.includes(e),l=!i||String(t.department||"")===i,n=!b||String(t.designation||"")===b;return c&&l&&n}).map(e=>({key:e.teacherCode||e.schoolEmail||Math.random(),id:e.teacherCode||e.schoolEmail||"-",name:e.fullName||"-",email:e.schoolEmail||e.personalEmail||"-",department:e.department||"-",designation:e.designation||"-",status:e.status||"Active",emailKey:e.schoolEmail||e.personalEmail||""}));return z.key&&t.sort((e,t)=>{let a=e[z.key],s=t[z.key];return"string"===typeof a&&(a=a.toLowerCase(),s=s.toLowerCase()),a<s?"asc"===z.direction?-1:1:a>s?"asc"===z.direction?1:-1:0}),t},[h,c,i,b,z]),W=Math.ceil(J.length/6),Y=6*(L-1),_=Y+6,V=J.slice(Y,_);return Object(s.useEffect)(()=>{L>W&&W>0&&D(1)},[W,L]),Object(j.jsxs)("div",{className:"page teachers",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Teachers"}),Object(j.jsx)("div",{className:"meta",children:x?"Loading\u2026":"".concat(J.length," teacher").concat(1!==J.length?"s":"")})]}),Object(j.jsxs)("button",{className:"btn-primary",onClick:()=>e("/teachers/create"),children:[Object(j.jsx)(g.E,{size:18,style:{marginRight:8}}),"Add Teacher"]})]}),p&&Object(j.jsx)("div",{className:"alert alert-error",children:p}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsxs)("div",{className:"filter-input-wrapper",children:[Object(j.jsx)(g.F,{className:"filter-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:e=>l(e.target.value),className:"filter-input"})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.k,{className:"filter-icon"}),Object(j.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Departments"}),I.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.H,{className:"filter-icon"}),Object(j.jsxs)("select",{value:b,onChange:e=>m(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Designations"}),M.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]})]}),x?Object(j.jsx)(q,{rows:5,columns:5}):0===J.length?Object(j.jsx)(U,{type:"teachers",actionLabel:"Add Teacher",onAction:()=>e("/teachers/create")}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(K,{sortKey:"id",currentSort:z,onSort:H,children:"ID"}),Object(j.jsx)(K,{sortKey:"name",currentSort:z,onSort:H,children:"Name"}),Object(j.jsx)(K,{sortKey:"email",currentSort:z,onSort:H,children:"Email"}),Object(j.jsx)(K,{sortKey:"department",currentSort:z,onSort:H,children:"Department"}),Object(j.jsx)(K,{sortKey:"designation",currentSort:z,onSort:H,children:"Designation"}),Object(j.jsx)(K,{sortKey:"status",currentSort:z,onSort:H,children:"Status"}),Object(j.jsx)(K,{className:"actions-column",children:"Actions"})]})}),Object(j.jsx)("tbody",{children:V.map(t=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"cell-id",children:t.id}),Object(j.jsx)("td",{className:"cell-name",children:Object(j.jsx)("button",{className:"name-link",onClick:()=>e("/teachers/".concat(t.emailKey||t.id)),title:"View Profile",children:t.name})}),Object(j.jsx)("td",{className:"cell-email",children:t.email}),Object(j.jsx)("td",{className:"cell-small",children:t.department}),Object(j.jsx)("td",{className:"cell-small",children:t.designation}),Object(j.jsx)("td",{className:"cell-status",children:Object(j.jsx)(B,{status:t.status})}),Object(j.jsx)("td",{className:"cell-actions",children:Object(j.jsxs)("div",{className:"action-buttons",children:[Object(j.jsx)("button",{className:"btn-icon",onClick:()=>e("/teachers/".concat(t.emailKey||t.key,"/edit")),title:"Edit","aria-label":"Edit teacher",children:Object(j.jsx)(g.q,{size:18})}),Object(j.jsx)("button",{className:"btn-icon btn-danger",onClick:()=>{w(t.emailKey),y(!0)},title:"Delete","aria-label":"Delete teacher",children:Object(j.jsx)(g.I,{size:18})})]})})]},t.key))})]})}),!x&&J.length>0&&Object(j.jsx)(G,{currentPage:L,totalPages:W,onPageChange:D}),Object(j.jsx)(R.a,{isOpen:f,onRequestClose:()=>!k&&y(!1),className:"modal",overlayClassName:"modal-overlay",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h3",{children:"Delete Teacher"}),Object(j.jsx)("p",{children:"Are you sure you want to delete this teacher? This action cannot be undone."}),A&&Object(j.jsx)("div",{className:"alert alert-error",style:{marginBottom:16},children:A}),Object(j.jsxs)("div",{className:"modal-actions",children:[Object(j.jsx)("button",{className:"btn-secondary",onClick:()=>y(!1),disabled:k,children:"Cancel"}),Object(j.jsx)("button",{className:"btn-danger",disabled:k,onClick:async()=>{if(S){E(!0),T("");try{const e=encodeURIComponent(S),a=r("/midland/admin/teachers/delete/".concat(e)),s=await fetch(a,{method:"DELETE",headers:d(t)});if(!s.ok){const e=await s.text().catch(()=>"");throw new Error(e||"Failed to delete: ".concat(s.status))}y(!1),F()}catch(e){T(e.message||"Failed to delete teacher")}finally{E(!1)}}},children:k?"Deleting\u2026":"Delete"})]})]})})]})}function Q(){const e=Object(n.q)(),{token:t}=u(),a=C(),[c,l]=Object(s.useState)({username:"",password:"",fullName:"",gender:"",dateOfBirth:"",department:"",designation:"",teacherCode:"",schoolEmail:"",personalEmail:"",phoneNumber:"",schoolCode:""}),[i,o]=Object(s.useState)(!1),[b,m]=Object(s.useState)("");return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Create New Teacher"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/teachers"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),b&&Object(j.jsx)("div",{className:"alert alert-error",children:b}),Object(j.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),m(""),o(!0);try{const s={username:String(c.username||"").trim(),password:String(c.password||"").trim(),fullName:String(c.fullName||"").trim(),gender:String(c.gender||"").trim(),dateOfBirth:String(c.dateOfBirth||"").trim(),department:String(c.department||"").trim(),designation:String(c.designation||"").trim(),teacherCode:String(c.teacherCode||"").trim(),schoolEmail:String(c.schoolEmail||"").trim(),personalEmail:String(c.personalEmail||"").trim(),phoneNumber:String(c.phoneNumber||"").trim(),schoolCode:String(c.schoolCode||"").trim()},l=r("/midland/admin/teachers/create"),i=await fetch(l,{method:"POST",headers:d(t),body:JSON.stringify(s)});if(!i.ok){const e=await i.text().catch(()=>"");throw new Error(e||"Failed to create: ".concat(i.status))}a.success("Teacher created successfully"),e("/teachers",{replace:!0})}catch(l){const e=l.message||"Failed to create teacher";m(e),a.error(e)}finally{o(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:c.username,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password *",Object(j.jsx)("input",{type:"password",value:c.password,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{password:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:c.fullName,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:c.gender,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:c.dateOfBirth,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{dateOfBirth:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.k,{}),"Professional Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Department *",Object(j.jsx)("input",{value:c.department,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{department:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:c.designation,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{designation:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Teacher Code *",Object(j.jsx)("input",{value:c.teacherCode,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{teacherCode:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:c.schoolCode,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{schoolCode:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:c.phoneNumber,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:c.schoolEmail,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:c.personalEmail,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/teachers"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Creating...":"Create Teacher"})]})]})]})}function $(){const e=Object(n.q)(),{id:t}=Object(n.s)(),{token:a}=u(),c=C(),[l,i]=Object(s.useState)({}),[o,b]=Object(s.useState)(!0),[m,h]=Object(s.useState)(!1),[O,x]=Object(s.useState)("");if(Object(s.useEffect)(()=>{let e=!0;return async function(){b(!0),x("");try{const s=r("/midland/admin/teachers/all"),l=await fetch(s,{headers:d(a)});if(!l.ok)throw new Error("Failed to load teacher");const n=await l.json(),o=(Array.isArray(n)?n:[]).find(e=>String(e.schoolEmail)===t||String(e.personalEmail)===t||String(e.teacherCode)===t);e&&(o?i(o):(x("Teacher not found"),c.error("Teacher not found")))}catch(s){const t=s.message||"Failed to load teacher";e&&x(t),c.error(t)}finally{e&&b(!1)}}(),()=>{e=!1}},[t,a,c]),o)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(z,{})});if(O&&!l.schoolEmail)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:O})});const v=l.schoolEmail||l.personalEmail||t;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Edit Teacher"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/teachers"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),O&&Object(j.jsx)("div",{className:"alert alert-error",children:O}),Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),x(""),h(!0);try{const t=Object(J.a)({},l),s=r("/midland/admin/teachers/update/".concat(encodeURIComponent(v))),i=await fetch(s,{method:"PUT",headers:d(a),body:JSON.stringify(t)});if(!i.ok){const e=await i.text().catch(()=>"");throw new Error(e||"Failed to update: ".concat(i.status))}c.success("Teacher updated successfully"),e("/teachers",{replace:!0})}catch(s){const e=s.message||"Failed to update teacher";x(e),c.error(e)}finally{h(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Account"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:l.username||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{type:"password",value:l.password||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{password:e.target.value})),placeholder:"Leave blank to keep current password"})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Personal Info"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:l.fullName||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:l.gender||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Date of Birth *",Object(j.jsx)("input",{type:"date",value:l.dateOfBirth||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{dateOfBirth:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Professional Info"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Department *",Object(j.jsx)("input",{value:l.department||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{department:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:l.designation||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{designation:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Teacher Code *",Object(j.jsx)("input",{value:l.teacherCode||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{teacherCode:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:l.schoolCode||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{schoolCode:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Contact Details"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:l.phoneNumber||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:l.schoolEmail||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:l.personalEmail||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/teachers"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Updating...":"Update Teacher"})]})]})]})}a(44);function X(){const{id:e}=Object(n.s)(),t=Object(n.q)(),{token:a}=u(),c=C(),[l,i]=Object(s.useState)(null),[o,b]=Object(s.useState)(!0),[m,h]=Object(s.useState)(""),[O,x]=Object(s.useState)("basic");Object(s.useEffect)(()=>{let t=!0;return async function(){b(!0),h("");try{const s=r("/midland/admin/teachers/all"),l=await fetch(s,{headers:d(a)});if(!l.ok)throw new Error("Failed to load teacher");const n=await l.json(),o=(Array.isArray(n)?n:[]).find(t=>String(t.schoolEmail)===e||String(t.personalEmail)===e||String(t.teacherCode)===e);t&&(i(o||null),o||(h("Teacher not found"),c.error("Teacher not found")))}catch(s){const e=s.message||"Failed to load teacher";t&&h(e),c.error(e)}finally{t&&b(!1)}}(),()=>{t=!1}},[e,a,c]);const v=Object(s.useMemo)(()=>{const e=((null===l||void 0===l?void 0:l.fullName)||"").trim();if(!e)return"??";const t=e.split(/\s+/);return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},[l]);if(o)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(P,{})});if(m||!l)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:m||"Teacher not found"})});const p=l.phoneNumber||"",N=l.schoolEmail||l.personalEmail||"",f=p?"tel:".concat(String(p).replace(/\s+/g,"")):null,y=N?"mailto:".concat(N):null,S=[{id:"basic",label:"Basic",icon:g.L},{id:"professional",label:"Professional",icon:g.k},{id:"contact",label:"Contact",icon:g.D}],w=[{label:"Status",value:l.status||"Active"},{label:"School Code",value:l.schoolCode||"-"},{label:"Joined",value:l.joinDate||"N/A"}];return Object(j.jsxs)("div",{className:"page teacher-profile-page",children:[Object(j.jsxs)("div",{className:"profile-header-section",children:[Object(j.jsxs)("div",{className:"profile-header-left",children:[Object(j.jsx)("button",{className:"back-button",onClick:()=>t("/teachers"),children:Object(j.jsx)(g.e,{size:20})}),Object(j.jsx)("h1",{children:"Teacher Profile"})]}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>t("/teachers/".concat(e,"/edit")),children:[Object(j.jsx)(g.q,{size:16,style:{marginRight:8}}),"Edit Profile"]})]}),Object(j.jsxs)("div",{className:"profile-top-card",children:[Object(j.jsx)("div",{className:"profile-avatar-large",children:v}),Object(j.jsxs)("div",{className:"profile-info-main",children:[Object(j.jsx)("h2",{className:"profile-name",children:l.fullName||"-"}),Object(j.jsxs)("div",{className:"profile-badges",children:[Object(j.jsxs)("div",{className:"info-badge purple",children:[Object(j.jsx)(g.k,{size:14}),Object(j.jsxs)("span",{children:[l.department||"-"," \u2022 ",l.designation||"-"]})]}),Object(j.jsx)(B,{status:l.status||"Active"}),Object(j.jsxs)("div",{className:"info-badge orange",children:[Object(j.jsx)(g.u,{size:14}),Object(j.jsxs)("span",{children:["# ",l.teacherCode||"-"]})]})]}),Object(j.jsxs)("div",{className:"contact-cards",children:[Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.C,{size:18}),p?Object(j.jsx)("a",{className:"contact-card-link",href:f,children:p}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.z,{size:18}),N?Object(j.jsx)("a",{className:"contact-card-link",href:y,children:N}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.v,{size:18}),Object(j.jsx)("span",{children:l.address||"N/A"})]})]})]})]}),Object(j.jsxs)("div",{className:"profile-metrics-grid",children:[Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.k,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"DEPARTMENT"}),Object(j.jsx)("div",{className:"metric-value",children:l.department||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"DESIGNATION"}),Object(j.jsx)("div",{className:"metric-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.u,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"TEACHER CODE"}),Object(j.jsx)("div",{className:"metric-value",children:l.teacherCode||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.H,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"STATUS"}),Object(j.jsx)("div",{className:"metric-value",children:l.status||"Active"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SCHOOL CODE"}),Object(j.jsx)("div",{className:"metric-value",children:l.schoolCode||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.l,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"JOIN DATE"}),Object(j.jsx)("div",{className:"metric-value",children:l.joinDate||"-"})]})]}),Object(j.jsxs)("div",{className:"profile-content-layout",children:[Object(j.jsxs)("div",{className:"profile-tabs-section",children:[Object(j.jsx)("div",{className:"profile-tabs",children:S.map(e=>{const t=e.icon;return Object(j.jsxs)("button",{className:"profile-tab ".concat(O===e.id?"active":""),onClick:()=>x(e.id),type:"button",children:[Object(j.jsx)(t,{size:16}),Object(j.jsx)("span",{children:e.label})]},e.id)})}),Object(j.jsxs)("div",{className:"profile-tab-content",children:["basic"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Full Name"}),Object(j.jsx)("div",{className:"field-value",children:l.fullName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Gender"}),Object(j.jsx)("div",{className:"field-value",children:l.gender||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Date of Birth"}),Object(j.jsx)("div",{className:"field-value",children:l.dateOfBirth||"-"})]})]}),"professional"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Teacher Code"}),Object(j.jsx)("div",{className:"field-value",children:l.teacherCode||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Department"}),Object(j.jsx)("div",{className:"field-value",children:l.department||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Designation"}),Object(j.jsx)("div",{className:"field-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Code"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolCode||"-"})]})]}),"contact"===O&&Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Phone Number"}),Object(j.jsx)("div",{className:"field-value",children:l.phoneNumber||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Email"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Personal Email"}),Object(j.jsx)("div",{className:"field-value",children:l.personalEmail||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Address"}),Object(j.jsx)("div",{className:"field-value",children:l.address||"-"})]})]})]})]}),Object(j.jsxs)("div",{className:"attendance-summary-card teacher-summary-card",children:[Object(j.jsx)("h3",{children:"Profile Highlights"}),Object(j.jsx)("ul",{className:"summary-list",children:w.map(e=>Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:e.label}),Object(j.jsx)("strong",{children:e.value})]},e.label))})]})]})]})}function Z(){const e=Object(n.q)(),{token:t}=u(),a=C(),[c,l]=Object(s.useState)(""),[i,o]=Object(s.useState)(""),[b,m]=Object(s.useState)([]),[h,O]=Object(s.useState)(!1),[x,v]=Object(s.useState)(""),[p,N]=Object(s.useState)(!1),[f,y]=Object(s.useState)(""),[S,w]=Object(s.useState)(!1),[k,E]=Object(s.useState)(""),[A,T]=Object(s.useState)(1),[L,D]=Object(s.useState)({key:null,direction:"asc"}),z=Object(s.useCallback)(async()=>{O(!0),v("");try{const e=r("/midland/admin/all"),a=await fetch(e,{headers:d(t)});if(!a.ok)throw new Error("Failed to load admins: ".concat(a.status," ").concat(a.statusText));const s=await a.json();m(Array.isArray(s)?s:[])}catch(e){const t=e.message||"Failed to load admins";v(t),a.error(t)}finally{O(!1)}},[t,a]);Object(s.useEffect)(()=>{z()},[z]),Object(s.useEffect)(()=>{try{R.a.setAppElement("#root")}catch(e){}},[]);const P=Object(s.useMemo)(()=>Array.from(new Set(b.map(e=>String(e.designation||"").trim()).filter(Boolean))),[b]),F=(e,t)=>{D({key:e,direction:t}),T(1)},I=Object(s.useMemo)(()=>{const e=c.trim().toLowerCase();let t=b.filter(t=>{const a=String(t.fullName||"").toLowerCase(),s=String(t.schoolEmail||t.personalEmail||"").toLowerCase(),c=!e||a.includes(e)||s.includes(e),l=!i||String(t.designation||"")===i;return c&&l}).map(e=>({key:e.schoolEmail||e.personalEmail||Math.random(),id:e.adminCode||e.schoolEmail||"-",name:e.fullName||"-",email:e.schoolEmail||e.personalEmail||"-",designation:e.designation||"-",schoolCode:e.schoolCode||"-",status:e.status||"Active",emailKey:e.schoolEmail||e.personalEmail||""}));return L.key&&t.sort((e,t)=>{let a=e[L.key],s=t[L.key];return"string"===typeof a&&(a=a.toLowerCase(),s=s.toLowerCase()),a<s?"asc"===L.direction?-1:1:a>s?"asc"===L.direction?1:-1:0}),t},[b,c,i,L]),M=Math.ceil(I.length/6),H=6*(A-1),J=H+6,W=I.slice(H,J);return Object(s.useEffect)(()=>{A>M&&M>0&&T(1)},[M,A]),Object(j.jsxs)("div",{className:"page admins",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Administrators"}),Object(j.jsx)("div",{className:"meta",children:h?"Loading\u2026":"".concat(I.length," admin").concat(1!==I.length?"s":"")})]}),Object(j.jsxs)("button",{className:"btn-primary",onClick:()=>e("/admin/create"),children:[Object(j.jsx)(g.E,{size:18,style:{marginRight:8}}),"Add Admin"]})]}),x&&Object(j.jsx)("div",{className:"alert alert-error",children:x}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsxs)("div",{className:"filter-input-wrapper",children:[Object(j.jsx)(g.F,{className:"filter-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:e=>l(e.target.value),className:"filter-input"})]}),Object(j.jsxs)("div",{className:"filter-select-wrapper",children:[Object(j.jsx)(g.k,{className:"filter-icon"}),Object(j.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Designations"}),P.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]})]}),h?Object(j.jsx)(q,{rows:5,columns:4}):0===I.length?Object(j.jsx)(U,{type:"admins",actionLabel:"Add Admin",onAction:()=>e("/admin/create")}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(K,{sortKey:"id",currentSort:L,onSort:F,children:"ID"}),Object(j.jsx)(K,{sortKey:"name",currentSort:L,onSort:F,children:"Name"}),Object(j.jsx)(K,{sortKey:"email",currentSort:L,onSort:F,children:"Email"}),Object(j.jsx)(K,{sortKey:"designation",currentSort:L,onSort:F,children:"Designation"}),Object(j.jsx)(K,{sortKey:"schoolCode",currentSort:L,onSort:F,children:"School Code"}),Object(j.jsx)(K,{sortKey:"status",currentSort:L,onSort:F,children:"Status"}),Object(j.jsx)(K,{className:"actions-column",children:"Actions"})]})}),Object(j.jsx)("tbody",{children:W.map(t=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"cell-id",children:t.id}),Object(j.jsx)("td",{className:"cell-name",children:Object(j.jsx)("button",{className:"name-link",onClick:()=>e("/admin/".concat(encodeURIComponent(t.emailKey||t.id))),title:"View Profile",children:t.name})}),Object(j.jsx)("td",{className:"cell-email",children:t.email}),Object(j.jsx)("td",{className:"cell-small",children:t.designation}),Object(j.jsx)("td",{className:"cell-small",children:t.schoolCode}),Object(j.jsx)("td",{className:"cell-status",children:Object(j.jsx)(B,{status:t.status})}),Object(j.jsx)("td",{className:"cell-actions",children:Object(j.jsxs)("div",{className:"action-buttons",children:[Object(j.jsx)("button",{className:"btn-icon",onClick:()=>e("/admin/".concat(encodeURIComponent(t.emailKey||t.id),"/edit")),title:"Edit","aria-label":"Edit admin",children:Object(j.jsx)(g.q,{size:18})}),Object(j.jsx)("button",{className:"btn-icon btn-danger",onClick:()=>{y(t.emailKey),N(!0)},title:"Delete","aria-label":"Delete admin",children:Object(j.jsx)(g.I,{size:18})})]})})]},t.key))})]})}),!h&&I.length>0&&Object(j.jsx)(G,{currentPage:A,totalPages:M,onPageChange:T}),Object(j.jsx)(R.a,{isOpen:p,onRequestClose:()=>!S&&N(!1),className:"modal",overlayClassName:"modal-overlay",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h3",{children:"Delete Administrator"}),Object(j.jsx)("p",{children:"Are you sure you want to delete this administrator? This action cannot be undone."}),k&&Object(j.jsx)("div",{className:"alert alert-error",style:{marginBottom:16},children:k}),Object(j.jsxs)("div",{className:"modal-actions",children:[Object(j.jsx)("button",{className:"btn-secondary",onClick:()=>N(!1),disabled:S,children:"Cancel"}),Object(j.jsx)("button",{className:"btn-danger",disabled:S,onClick:async()=>{if(f){w(!0),E("");try{const e=encodeURIComponent(f),s=r("/midland/admin/delete/".concat(e)),c=await fetch(s,{method:"DELETE",headers:d(t)});if(!c.ok){const e=await c.text().catch(()=>"");throw new Error(e||"Failed to delete: ".concat(c.status))}N(!1),a.success("Administrator deleted successfully"),z()}catch(e){const t=e.message||"Failed to delete admin";E(t),a.error(t)}finally{w(!1)}}},children:S?"Deleting\u2026":"Delete"})]})]})})]})}function ee(){const e=Object(n.q)(),{token:t}=u(),a=C(),[c,l]=Object(s.useState)({username:"",password:"",fullName:"",gender:"",designation:"",schoolEmail:"",personalEmail:"",phoneNumber:"",schoolCode:""}),[i,o]=Object(s.useState)(!1),[b,m]=Object(s.useState)("");return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Create New Administrator"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/admin"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),b&&Object(j.jsx)("div",{className:"alert alert-error",children:b}),Object(j.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),m(""),o(!0);try{const s={username:String(c.username||"").trim(),password:String(c.password||"").trim(),fullName:String(c.fullName||"").trim(),gender:String(c.gender||"").trim(),designation:String(c.designation||"").trim(),schoolEmail:String(c.schoolEmail||"").trim(),personalEmail:String(c.personalEmail||"").trim(),phoneNumber:String(c.phoneNumber||"").trim(),schoolCode:String(c.schoolCode||"").trim()},l=r("/midland/admin/create"),i=await fetch(l,{method:"POST",headers:d(t),body:JSON.stringify(s)});if(!i.ok){const e=await i.text().catch(()=>"");throw new Error(e||"Failed to create: ".concat(i.status))}a.success("Administrator created successfully"),e("/admin",{replace:!0})}catch(l){const e=l.message||"Failed to create admin";m(e),a.error(e)}finally{o(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Account"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:c.username,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password *",Object(j.jsx)("input",{type:"password",value:c.password,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{password:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.L,{}),"Personal Info"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:c.fullName,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:c.gender,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:c.designation,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{designation:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:c.schoolCode,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{schoolCode:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsxs)("h3",{children:[Object(j.jsx)(g.z,{}),"Contact Details"]}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:c.phoneNumber,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:c.schoolEmail,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:c.personalEmail,onChange:e=>l(Object(J.a)(Object(J.a)({},c),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/admin"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Creating...":"Create Administrator"})]})]})]})}function te(){const e=Object(n.q)(),{id:t}=Object(n.s)(),{token:a}=u(),c=C(),[l,i]=Object(s.useState)({}),[o,b]=Object(s.useState)(!0),[m,h]=Object(s.useState)(!1),[O,x]=Object(s.useState)("");if(Object(s.useEffect)(()=>{let e=!0;return async function(){b(!0),x("");try{const s=r("/midland/admin/all"),l=await fetch(s,{headers:d(a)});if(!l.ok)throw new Error("Failed to load admin");const n=await l.json(),o=(Array.isArray(n)?n:[]).find(e=>String(e.schoolEmail)===t||String(e.personalEmail)===t);e&&(o?i(o):(x("Admin not found"),c.error("Admin not found")))}catch(s){const t=s.message||"Failed to load admin";e&&x(t),c.error(t)}finally{e&&b(!1)}}(),()=>{e=!1}},[t,a,c]),o)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(z,{})});if(O&&!l.schoolEmail)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:O})});const v=l.schoolEmail||l.personalEmail||t;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsxs)("div",{className:"page-header",children:[Object(j.jsx)("h2",{children:"Edit Administrator"}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>e("/admin"),children:[Object(j.jsx)(g.e,{size:16,style:{marginRight:8}}),"Back to List"]})]}),O&&Object(j.jsx)("div",{className:"alert alert-error",children:O}),Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),x(""),h(!0);try{const t=Object(J.a)({},l),s=r("/midland/admin/update/".concat(encodeURIComponent(v))),i=await fetch(s,{method:"PUT",headers:d(a),body:JSON.stringify(t)});if(!i.ok){const e=await i.text().catch(()=>"");throw new Error(e||"Failed to update: ".concat(i.status))}c.success("Administrator updated successfully"),e("/admin",{replace:!0})}catch(s){const e=s.message||"Failed to update admin";x(e),c.error(e)}finally{h(!1)}},children:[Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Account"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Username *",Object(j.jsx)("input",{value:l.username||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{username:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{type:"password",value:l.password||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{password:e.target.value})),placeholder:"Leave blank to keep current password"})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Personal Info"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Full Name *",Object(j.jsx)("input",{value:l.fullName||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{fullName:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Gender *",Object(j.jsxs)("select",{value:l.gender||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{gender:e.target.value})),required:!0,children:[Object(j.jsx)("option",{value:"",children:"Select"}),Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"}),Object(j.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(j.jsxs)("label",{children:["Designation *",Object(j.jsx)("input",{value:l.designation||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{designation:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["School Code *",Object(j.jsx)("input",{value:l.schoolCode||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{schoolCode:e.target.value})),required:!0})]})]})]}),Object(j.jsxs)("div",{className:"form-section",children:[Object(j.jsx)("h3",{children:"Contact Details"}),Object(j.jsxs)("div",{className:"form-grid",children:[Object(j.jsxs)("label",{children:["Phone Number",Object(j.jsx)("input",{value:l.phoneNumber||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{phoneNumber:e.target.value}))})]}),Object(j.jsxs)("label",{children:["School Email *",Object(j.jsx)("input",{type:"email",value:l.schoolEmail||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{schoolEmail:e.target.value})),required:!0})]}),Object(j.jsxs)("label",{children:["Personal Email",Object(j.jsx)("input",{type:"email",value:l.personalEmail||"",onChange:e=>i(Object(J.a)(Object(J.a)({},l),{},{personalEmail:e.target.value}))})]})]})]}),Object(j.jsxs)("div",{className:"form-actions",children:[Object(j.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>e("/admin"),children:"Cancel"}),Object(j.jsx)("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Updating...":"Update Administrator"})]})]})]})}a(45);function ae(){const{id:e}=Object(n.s)(),t=Object(n.q)(),{token:a}=u(),c=C(),[l,i]=Object(s.useState)(null),[o,b]=Object(s.useState)(!0),[m,h]=Object(s.useState)("");Object(s.useEffect)(()=>{let t=!0;return async function(){b(!0),h("");try{const s=r("/midland/admin/all"),l=await fetch(s,{headers:d(a)});if(!l.ok)throw new Error("Failed to load administrator");const n=await l.json(),o=(Array.isArray(n)?n:[]).find(t=>String(t.schoolEmail)===e||String(t.personalEmail)===e||String(t.adminCode)===e);t&&(i(o||null),o||(h("Administrator not found"),c.error("Administrator not found")))}catch(s){const e=s.message||"Failed to load administrator";t&&h(e),c.error(e)}finally{t&&b(!1)}}(),()=>{t=!1}},[e,a,c]);const O=Object(s.useMemo)(()=>{const e=((null===l||void 0===l?void 0:l.fullName)||"").trim();if(!e)return"??";const t=e.split(/\s+/);return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},[l]);if(o)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)(P,{})});if(m||!l)return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"alert alert-error",children:m||"Administrator not found"})});const x=l.schoolEmail||l.personalEmail||"",v=l.phoneNumber?"tel:".concat(String(l.phoneNumber).replace(/\s+/g,"")):null,p=x?"mailto:".concat(x):null;return Object(j.jsxs)("div",{className:"page admin-profile-page",children:[Object(j.jsxs)("div",{className:"profile-header-section",children:[Object(j.jsxs)("div",{className:"profile-header-left",children:[Object(j.jsx)("button",{className:"back-button",onClick:()=>t("/admin"),children:Object(j.jsx)(g.e,{size:20})}),Object(j.jsx)("h1",{children:"Administrator Profile"})]}),Object(j.jsxs)("button",{className:"btn-secondary",onClick:()=>t("/admin/".concat(encodeURIComponent(x||l.adminCode||e),"/edit")),children:[Object(j.jsx)(g.q,{size:16,style:{marginRight:8}}),"Edit Profile"]})]}),Object(j.jsxs)("div",{className:"profile-top-card",children:[Object(j.jsx)("div",{className:"profile-avatar-large",children:O}),Object(j.jsxs)("div",{className:"profile-info-main",children:[Object(j.jsx)("h2",{className:"profile-name",children:l.fullName||"-"}),Object(j.jsxs)("div",{className:"profile-badges",children:[Object(j.jsxs)("div",{className:"info-badge purple",children:[Object(j.jsx)(g.k,{size:14}),Object(j.jsx)("span",{children:l.designation||"Administrator"})]}),Object(j.jsx)(B,{status:l.status||"Active"}),Object(j.jsxs)("div",{className:"info-badge orange",children:[Object(j.jsx)(g.u,{size:14}),Object(j.jsxs)("span",{children:["# ",l.adminCode||"-"]})]})]}),Object(j.jsxs)("div",{className:"contact-cards",children:[Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.C,{size:18}),l.phoneNumber?Object(j.jsx)("a",{className:"contact-card-link",href:v,children:l.phoneNumber}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.z,{size:18}),x?Object(j.jsx)("a",{className:"contact-card-link",href:p,children:x}):Object(j.jsx)("span",{children:"N/A"})]}),Object(j.jsxs)("div",{className:"contact-card",children:[Object(j.jsx)(g.v,{size:18}),Object(j.jsx)("span",{children:l.address||"N/A"})]})]})]})]}),Object(j.jsxs)("div",{className:"profile-metrics-grid",children:[Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.L,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"USERNAME"}),Object(j.jsx)("div",{className:"metric-value",children:l.username||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.k,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"DESIGNATION"}),Object(j.jsx)("div",{className:"metric-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.u,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SCHOOL CODE"}),Object(j.jsx)("div",{className:"metric-value",children:l.schoolCode||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.z,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"SCHOOL EMAIL"}),Object(j.jsx)("div",{className:"metric-value",children:l.schoolEmail||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.z,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"PERSONAL EMAIL"}),Object(j.jsx)("div",{className:"metric-value",children:l.personalEmail||"-"})]}),Object(j.jsxs)("div",{className:"metric-card",children:[Object(j.jsx)("div",{className:"metric-icon",children:Object(j.jsx)(g.C,{size:20})}),Object(j.jsx)("div",{className:"metric-label",children:"PHONE"}),Object(j.jsx)("div",{className:"metric-value",children:l.phoneNumber||"-"})]})]}),Object(j.jsxs)("div",{className:"profile-content-layout",children:[Object(j.jsxs)("div",{className:"profile-tabs-section",children:[Object(j.jsx)("div",{className:"profile-tabs single",children:Object(j.jsx)("button",{className:"profile-tab active",type:"button",children:"Overview"})}),Object(j.jsx)("div",{className:"profile-tab-content",children:Object(j.jsxs)("div",{className:"tab-panel",children:[Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Full Name"}),Object(j.jsx)("div",{className:"field-value",children:l.fullName||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Gender"}),Object(j.jsx)("div",{className:"field-value",children:l.gender||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"Designation"}),Object(j.jsx)("div",{className:"field-value",children:l.designation||"-"})]}),Object(j.jsxs)("div",{className:"form-field-display",children:[Object(j.jsx)("label",{children:"School Code"}),Object(j.jsx)("div",{className:"field-value",children:l.schoolCode||"-"})]})]})})]}),Object(j.jsxs)("div",{className:"admin-summary-card",children:[Object(j.jsx)("h3",{children:"Profile Highlights"}),Object(j.jsxs)("ul",{className:"summary-list",children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Status"}),Object(j.jsx)("strong",{children:l.status||"Active"})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Username"}),Object(j.jsx)("strong",{children:l.username||"-"})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:"Created"}),Object(j.jsx)("strong",{children:l.createdAt?new Date(l.createdAt).toLocaleDateString():"\u2014"})]})]})]})]})]})}function se(){const{token:e}=u(),t=C(),[a,c]=Object(s.useState)("TCH2025"),[l,i]=Object(s.useState)(""),[n,o]=Object(s.useState)([]),[b,m]=Object(s.useState)(!1),[h,O]=Object(s.useState)(""),x=Object(s.useCallback)(async()=>{m(!0),O("");try{const t=r("/midland/users/timetables/teacher/".concat(encodeURIComponent(a))),s=await fetch(t,{headers:d(e)});if(!s.ok)throw new Error("HTTP ".concat(s.status));const c=await s.json();o(Array.isArray(c)?c:[])}catch(s){const e=s.message||"Failed to load timetable";O(e),t.error(e)}finally{m(!1)}},[a,e,t]);Object(s.useEffect)(()=>{x()},[x]);const v=Object(s.useMemo)(()=>Array.from(new Set(n.map(e=>e.dayOfWeek))),[n]),g=Object(s.useMemo)(()=>{const e=l.trim();return n.filter(t=>!e||t.dayOfWeek===e).sort((e,t)=>e.dayOfWeek.localeCompare(t.dayOfWeek)||e.periodNumber-t.periodNumber)},[n,l]);return Object(j.jsxs)("div",{className:"page timetable",children:[Object(j.jsx)("div",{className:"page-header",children:Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Timetable"}),Object(j.jsx)("div",{className:"meta",children:b?"Loading\u2026":"".concat(g.length," periods")})]})}),h&&Object(j.jsx)("div",{className:"alert alert-error",children:h}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsx)("input",{value:a,onChange:e=>c(e.target.value),placeholder:"Teacher Code (e.g., TCH2025)",className:"filter-input"}),Object(j.jsxs)("select",{value:l,onChange:e=>i(e.target.value),disabled:b,className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Days"}),v.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),b?Object(j.jsx)(q,{rows:5,columns:7}):0===g.length?Object(j.jsx)(U,{type:"timetable"}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Day"}),Object(j.jsx)("th",{children:"Period"}),Object(j.jsx)("th",{children:"Time"}),Object(j.jsx)("th",{children:"Subject"}),Object(j.jsx)("th",{children:"Class"}),Object(j.jsx)("th",{children:"Section"}),Object(j.jsx)("th",{children:"Room"})]})}),Object(j.jsx)("tbody",{children:g.map((e,t)=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.dayOfWeek||"-"}),Object(j.jsx)("td",{children:e.periodNumber||"-"}),Object(j.jsx)("td",{children:e.startTime&&e.endTime?"".concat(e.startTime," - ").concat(e.endTime):"-"}),Object(j.jsx)("td",{children:e.subjectName||e.subjectCode||"-"}),Object(j.jsx)("td",{children:e.gradeLevel||"-"}),Object(j.jsx)("td",{children:e.section||"-"}),Object(j.jsx)("td",{children:e.roomNumber||"-"})]},t))})]})})]})}function ce(){const{token:e}=u(),t=C(),[a,c]=Object(s.useState)(""),[l,i]=Object(s.useState)(""),[n,o]=Object(s.useState)(""),[b,m]=Object(s.useState)([]),[h,O]=Object(s.useState)(!1),[x,v]=Object(s.useState)("");Object(s.useEffect)(()=>{let a=!0;return async function(){O(!0),v("");try{const t=r("/midland/users/subjects/all"),s=await fetch(t,{headers:d(e)});if(!s.ok)throw new Error("Request failed ".concat(s.status));const c=await s.json();a&&m(Array.isArray(c)?c:[])}catch(s){const e=s.message||"Failed to load subjects";a&&v(e),t.error(e)}finally{a&&O(!1)}}(),()=>{a=!1}},[e,t]);const g=Object(s.useMemo)(()=>Array.from(new Set(b.map(e=>String(e.gradeLevel||"").trim()).filter(Boolean))),[b]),p=Object(s.useMemo)(()=>Array.from(new Set(b.map(e=>String(e.curriculumType||"").trim()).filter(Boolean))),[b]),N=Object(s.useMemo)(()=>{const e=a.trim().toLowerCase();return b.filter(t=>{const a=String(t.subjectName||"").toLowerCase(),s=String(t.subjectCode||"").toLowerCase(),c=!l||String(t.gradeLevel||"")===l,i=!n||String(t.curriculumType||"")===n,r=!e||a.includes(e)||s.includes(e);return c&&i&&r}).map(e=>({key:e.subjectCode||e.subjectName,subjectName:e.subjectName||"-",subjectCode:e.subjectCode||"-",curriculumType:e.curriculumType||"-",gradeLevel:e.gradeLevel||"-",teacherCode:e.teacherCode||"-"}))},[b,a,l,n]);return Object(j.jsxs)("div",{className:"page subjects",children:[Object(j.jsx)("div",{className:"page-header",children:Object(j.jsxs)("div",{className:"header-main",children:[Object(j.jsx)("h2",{children:"Subjects"}),Object(j.jsx)("div",{className:"meta",children:h?"Loading\u2026":"".concat(N.length," subject").concat(1!==N.length?"s":"")})]})}),x&&Object(j.jsx)("div",{className:"alert alert-error",children:x}),Object(j.jsxs)("div",{className:"filters",children:[Object(j.jsx)("input",{type:"text",placeholder:"Search by name or code...",value:a,onChange:e=>c(e.target.value),className:"filter-input"}),Object(j.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Grades"}),g.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]}),Object(j.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"filter-select",children:[Object(j.jsx)("option",{value:"",children:"All Curricula"}),p.map(e=>Object(j.jsx)("option",{value:e,children:e},e))]})]}),h?Object(j.jsx)(q,{rows:5,columns:5}):0===N.length?Object(j.jsx)(U,{type:"subjects"}):Object(j.jsx)("div",{className:"table-container",children:Object(j.jsxs)("table",{className:"data-table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Subject Name"}),Object(j.jsx)("th",{children:"Subject Code"}),Object(j.jsx)("th",{children:"Grade Level"}),Object(j.jsx)("th",{children:"Curriculum"}),Object(j.jsx)("th",{children:"Teacher Code"})]})}),Object(j.jsx)("tbody",{children:N.map(e=>Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.subjectName}),Object(j.jsx)("td",{children:e.subjectCode}),Object(j.jsx)("td",{children:e.gradeLevel}),Object(j.jsx)("td",{children:e.curriculumType}),Object(j.jsx)("td",{children:e.teacherCode})]},e.key))})]})})]})}function le(e){let{children:t}=e;const{logout:a}=u(),{toggleTheme:c,isDark:l}=function(){const e=Object(s.useContext)(x);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}(),r=Object(n.q)(),d=Object(n.o)(),[b,m]=Object(s.useState)(""),[h,O]=Object(s.useState)(window.innerWidth>=768),[v,p]=Object(s.useState)(window.innerWidth<768);Object(s.useEffect)(()=>{const e=()=>{const e=window.innerWidth<768;p(e),e&&h&&O(!1),e||h||O(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[h]);const N=[{path:"/",label:"Dashboard",icon:g.v},{path:"/students",label:"Students",icon:g.N},{path:"/teachers",label:"Teachers",icon:g.M},{path:"/admin",label:"Admins",icon:g.L},{path:"/subjects",label:"Subjects",icon:g.i},{path:"/timetable",label:"Timetable",icon:g.l}],f=()=>{O(!h)};return Object(j.jsxs)("div",{className:"dashboard-layout ".concat(l?"dark-theme":"light-theme"," ").concat(h?"sidebar-open":"sidebar-closed"),children:[h&&v&&Object(j.jsx)("div",{className:"sidebar-overlay",onClick:f}),Object(j.jsxs)("aside",{className:"dashboard-sidebar ".concat(h?"open":"closed"),children:[Object(j.jsx)("div",{className:"dashboard-sidebar-header",children:Object(j.jsxs)("div",{className:"dashboard-logo-container",children:[Object(j.jsx)("img",{src:o("Images/logo.png"),alt:"Midland International School",className:"dashboard-logo dashboard-logo-big"}),Object(j.jsx)("img",{src:o("Images/sideLogo.png"),alt:"Midland International School",className:"dashboard-logo dashboard-logo-small"})]})}),Object(j.jsx)("nav",{className:"dashboard-sidebar-nav",children:N.map(e=>{const t=e.icon,a="/"===e.path?"/"===d.pathname:d.pathname.startsWith(e.path);return Object(j.jsxs)(i.b,{to:e.path,className:"dashboard-nav-link ".concat(a?"active":""),title:e.label,onClick:t=>{d.pathname===e.path&&t.preventDefault(),v&&O(!1)},children:[Object(j.jsx)(t,{size:20}),Object(j.jsx)("span",{children:e.label})]},e.path)})}),Object(j.jsx)("div",{className:"dashboard-sidebar-footer",children:Object(j.jsxs)("button",{onClick:()=>{a(),r("/login")},className:"dashboard-logout-btn",title:"Logout",children:[Object(j.jsx)("span",{children:"Logout"}),Object(j.jsx)(g.f,{size:16})]})})]}),Object(j.jsxs)("div",{className:"dashboard-content-wrapper",children:[Object(j.jsxs)("header",{className:"dashboard-topbar",children:[Object(j.jsxs)("div",{className:"topbar-left",children:[Object(j.jsx)("button",{className:"topbar-menu-btn","aria-label":"Menu",onClick:f,children:Object(j.jsx)(g.A,{size:20})}),Object(j.jsxs)("div",{className:"topbar-search",children:[Object(j.jsx)(g.F,{size:18,className:"search-icon"}),Object(j.jsx)("input",{type:"text",placeholder:"Search",value:b,onChange:e=>m(e.target.value),className:"search-input"})]})]}),Object(j.jsxs)("div",{className:"topbar-right",children:[Object(j.jsx)("button",{className:"topbar-icon-btn","aria-label":"Grid",children:Object(j.jsx)(g.t,{size:20})}),Object(j.jsx)("button",{className:"topbar-icon-btn theme-toggle",onClick:c,"aria-label":"Toggle theme",children:l?Object(j.jsx)(g.G,{size:20}):Object(j.jsx)(g.B,{size:20})})]})]}),Object(j.jsx)("main",{className:"dashboard-main",children:t})]})]})}a(46);var ie=function(){return Object(j.jsx)(v,{children:Object(j.jsx)(y,{children:Object(j.jsx)(h,{children:Object(j.jsx)(i.a,{children:Object(j.jsxs)(n.d,{children:[Object(j.jsx)(n.b,{path:"/login",element:Object(j.jsx)(k,{})}),Object(j.jsx)(n.b,{path:"/register",element:Object(j.jsx)(L,{})}),Object(j.jsx)(n.b,{path:"/*",element:Object(j.jsx)(O,{children:Object(j.jsx)(le,{children:Object(j.jsxs)(n.d,{children:[Object(j.jsx)(n.b,{path:"/",element:Object(j.jsx)(F,{})}),Object(j.jsx)(n.b,{path:"/students",element:Object(j.jsx)(H,{})}),Object(j.jsx)(n.b,{path:"/students/create",element:Object(j.jsx)(W,{})}),Object(j.jsx)(n.b,{path:"/students/:id",element:Object(j.jsx)(_,{})}),Object(j.jsx)(n.b,{path:"/students/:id/edit",element:Object(j.jsx)(Y,{})}),Object(j.jsx)(n.b,{path:"/teachers",element:Object(j.jsx)(V,{})}),Object(j.jsx)(n.b,{path:"/teachers/create",element:Object(j.jsx)(Q,{})}),Object(j.jsx)(n.b,{path:"/teachers/:id",element:Object(j.jsx)(X,{})}),Object(j.jsx)(n.b,{path:"/teachers/:id/edit",element:Object(j.jsx)($,{})}),Object(j.jsx)(n.b,{path:"/admin",element:Object(j.jsx)(Z,{})}),Object(j.jsx)(n.b,{path:"/admin/create",element:Object(j.jsx)(ee,{})}),Object(j.jsx)(n.b,{path:"/admin/:id",element:Object(j.jsx)(ae,{})}),Object(j.jsx)(n.b,{path:"/admin/:id/edit",element:Object(j.jsx)(te,{})}),Object(j.jsx)(n.b,{path:"/timetable",element:Object(j.jsx)(se,{})}),Object(j.jsx)(n.b,{path:"/subjects",element:Object(j.jsx)(ce,{})}),Object(j.jsx)(n.b,{path:"*",element:Object(j.jsx)(n.a,{to:"/",replace:!0})})]})})})})]})})})})})};l.a.createRoot(document.getElementById("root")).render(Object(j.jsx)(ie,{}))}],[[47,1,2]]]);