{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{useTheme}from'../context/ThemeContext';import{publicAsset}from'../config';import{FiHome,FiUsers,FiUserCheck,FiUser,FiCalendar,FiBook,FiMenu,FiSearch,FiSun,FiMoon,FiGrid,FiArrowRight}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function DashboardLayout(_ref){let{children}=_ref;const{logout}=useAuth();const{toggleTheme,isDark}=useTheme();const navigate=useNavigate();const location=useLocation();const[searchQuery,setSearchQuery]=useState('');const[sidebarOpen,setSidebarOpen]=useState(window.innerWidth>=768);const[isMobile,setIsMobile]=useState(window.innerWidth<768);useEffect(()=>{const handleResize=()=>{const mobile=window.innerWidth<768;setIsMobile(mobile);// Auto-close sidebar on mobile when resizing to mobile\nif(mobile&&sidebarOpen){setSidebarOpen(false);}// Auto-open sidebar on desktop when resizing to desktop\nif(!mobile&&!sidebarOpen){setSidebarOpen(true);}};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[sidebarOpen]);const handleLogout=()=>{logout();navigate('/login');};const navItems=[{path:'/',label:'Dashboard',icon:FiHome},{path:'/students',label:'Students',icon:FiUsers},{path:'/teachers',label:'Teachers',icon:FiUserCheck},{path:'/admin',label:'Admins',icon:FiUser},{path:'/subjects',label:'Subjects',icon:FiBook},{path:'/timetable',label:'Timetable',icon:FiCalendar}];const toggleSidebar=()=>{setSidebarOpen(!sidebarOpen);};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout \".concat(isDark?'dark-theme':'light-theme',\" \").concat(sidebarOpen?'sidebar-open':'sidebar-closed'),children:[sidebarOpen&&isMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-overlay\",onClick:toggleSidebar}),/*#__PURE__*/_jsxs(\"aside\",{className:\"dashboard-sidebar \".concat(sidebarOpen?'open':'closed'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-sidebar-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-logo-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:publicAsset('Images/logo.png'),alt:\"Midland International School\",className:\"dashboard-logo dashboard-logo-big\"}),/*#__PURE__*/_jsx(\"img\",{src:publicAsset('Images/sideLogo.png'),alt:\"Midland International School\",className:\"dashboard-logo dashboard-logo-small\"})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"dashboard-sidebar-nav\",children:navItems.map(item=>{const Icon=item.icon;// Improved active state detection for nested routes\nconst isActive=item.path==='/'?location.pathname==='/':location.pathname.startsWith(item.path);return/*#__PURE__*/_jsxs(Link,{to:item.path,className:\"dashboard-nav-link \".concat(isActive?'active':''),title:item.label,onClick:e=>{// Ensure navigation works properly\nif(location.pathname===item.path){e.preventDefault();}// Close sidebar on mobile when clicking a link\nif(isMobile){setSidebarOpen(false);}},children:[/*#__PURE__*/_jsx(Icon,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:item.label})]},item.path);})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-sidebar-footer\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"dashboard-logout-btn\",title:\"Logout\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"}),/*#__PURE__*/_jsx(FiArrowRight,{size:16})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-topbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"topbar-menu-btn\",\"aria-label\":\"Menu\",onClick:toggleSidebar,children:/*#__PURE__*/_jsx(FiMenu,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-search\",children:[/*#__PURE__*/_jsx(FiSearch,{size:18,className:\"search-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"search-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-right\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"topbar-icon-btn\",\"aria-label\":\"Grid\",children:/*#__PURE__*/_jsx(FiGrid,{size:20})}),/*#__PURE__*/_jsx(\"button\",{className:\"topbar-icon-btn theme-toggle\",onClick:toggleTheme,\"aria-label\":\"Toggle theme\",children:isDark?/*#__PURE__*/_jsx(FiSun,{size:20}):/*#__PURE__*/_jsx(FiMoon,{size:20})})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"dashboard-main\",children:children})]})]});}","map":null,"metadata":{},"sourceType":"module"}