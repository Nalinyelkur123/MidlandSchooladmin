{"ast":null,"code":"var _jsxFileName = \"/Users/nalinr/MidlandAdmin/schooladmin/src/context/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useCallback, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getApiUrl } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nconst idleMs = 30 * 60 * 1000; // 30 minutes\n\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  const [isReady, setIsReady] = useState(false);\n  const idleTimerRef = useRef(null);\n  const lastActivityRef = useRef(Date.now());\n  useEffect(() => {\n    try {\n      const storedToken = window.sessionStorage.getItem('authToken');\n      const storedUser = window.sessionStorage.getItem('authUser');\n      if (storedToken) {\n        setToken(storedToken);\n      }\n      if (storedUser) {\n        try {\n          setUser(JSON.parse(storedUser));\n        } catch (e) {\n          setUser(null);\n        }\n      }\n    } catch (e) {\n      setUser(null);\n    }\n    setIsReady(true);\n  }, []);\n\n  // Handle tab/window close - ensure session is cleared\n  useEffect(() => {\n    if (!token) return;\n    const shouldForceClearOnUnload = process.env.NODE_ENV === 'production';\n    if (!shouldForceClearOnUnload) {\n      return undefined;\n    }\n    const handleBeforeUnload = () => {\n      // Explicitly clear auth data when tab/window is closing\n      window.sessionStorage.removeItem('authToken');\n      window.sessionStorage.removeItem('authUser');\n    };\n\n    // Listen for page unload events\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [token]);\n  const login = useCallback(async (email, password) => {\n    const loginUrl = process.env.REACT_APP_LOGIN_ENDPOINT || getApiUrl('/midland/auth/admin/login');\n    try {\n      const res = await fetch(loginUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) {\n        const errorText = await res.text().catch(() => '');\n        if (res.status === 404) {\n          throw new Error(`Login endpoint not found (404). URL: ${loginUrl}. Please check the API endpoint configuration.`);\n        }\n        if (res.status === 403) {\n          throw new Error('Access forbidden (403). The server rejected the request. This may be a CORS or authentication issue. Check backend configuration.');\n        }\n        try {\n          const errorData = JSON.parse(errorText);\n          throw new Error(errorData.message || errorData.error || `Login failed: ${res.status} ${res.statusText}`);\n        } catch {\n          throw new Error(errorText || `Login failed: ${res.status} ${res.statusText}`);\n        }\n      }\n      const data = await res.json();\n      if (!data) {\n        throw new Error('No response from server');\n      }\n      const receivedToken = data.token || data.accessToken || data.jwt;\n      const usernameFromResponse = data.username;\n      const roleFromResponse = data.role;\n      const receivedUser = {\n        email: email,\n        username: usernameFromResponse || email,\n        role: roleFromResponse || 'USER'\n      };\n      if (!receivedToken) {\n        throw new Error('No token returned by server');\n      }\n      window.sessionStorage.setItem('authToken', receivedToken);\n      window.sessionStorage.setItem('authUser', JSON.stringify(receivedUser));\n      setToken(receivedToken);\n      setUser(receivedUser);\n      return true;\n    } catch (err) {\n      throw err;\n    }\n  }, []);\n  const register = useCallback(async (email, password) => {\n    return login(email, password);\n  }, [login]);\n  const logout = useCallback(() => {\n    // Clear auth data from session and local storage\n    window.sessionStorage.removeItem('authToken');\n    window.sessionStorage.removeItem('authUser');\n    window.localStorage.removeItem('authToken');\n    window.localStorage.removeItem('authUser');\n    setToken(null);\n    setUser(null);\n  }, []);\n  useEffect(() => {\n    if (!token) {\n      if (idleTimerRef.current) {\n        clearTimeout(idleTimerRef.current);\n        idleTimerRef.current = null;\n      }\n      return undefined;\n    }\n    const resetIdleTimer = () => {\n      lastActivityRef.current = Date.now();\n      if (idleTimerRef.current) clearTimeout(idleTimerRef.current);\n      idleTimerRef.current = setTimeout(() => {\n        if (Date.now() - lastActivityRef.current >= idleMs) {\n          logout();\n        }\n      }, idleMs);\n    };\n    const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];\n    events.forEach(e => window.addEventListener(e, resetIdleTimer, true));\n    resetIdleTimer();\n    return () => {\n      events.forEach(e => window.removeEventListener(e, resetIdleTimer, true));\n      if (idleTimerRef.current) clearTimeout(idleTimerRef.current);\n    };\n  }, [token, logout]);\n  const value = {\n    token,\n    user,\n    isReady,\n    login,\n    register,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 10\n  }, this);\n}\n_s(AuthProvider, \"8b8xRoOIHEz1FnpRMk5ay++0/PM=\");\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n}\n_s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nexport function RequireAuth({\n  children\n}) {\n  _s3();\n  const {\n    token,\n    isReady\n  } = useAuth();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (isReady && !token) {\n      navigate('/login', {\n        replace: true\n      });\n    }\n  }, [token, isReady, navigate]);\n  if (!isReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh'\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 12\n    }, this);\n  }\n  if (!token) {\n    return null;\n  }\n  return children;\n}\n_s3(RequireAuth, \"CuIxLxQPT/SoxykAL60sUneuX5w=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c2 = RequireAuth;\nvar _c, _c2;\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"RequireAuth\");","map":{"version":3,"names":["React","createContext","useContext","useState","useCallback","useEffect","useRef","useNavigate","getApiUrl","jsxDEV","_jsxDEV","AuthContext","idleMs","AuthProvider","children","_s","token","setToken","user","setUser","isReady","setIsReady","idleTimerRef","lastActivityRef","Date","now","storedToken","window","sessionStorage","getItem","storedUser","JSON","parse","e","shouldForceClearOnUnload","process","env","NODE_ENV","undefined","handleBeforeUnload","removeItem","addEventListener","removeEventListener","login","email","password","loginUrl","REACT_APP_LOGIN_ENDPOINT","res","fetch","method","headers","body","stringify","ok","errorText","text","catch","status","Error","errorData","message","error","statusText","data","json","receivedToken","accessToken","jwt","usernameFromResponse","username","roleFromResponse","role","receivedUser","setItem","err","register","logout","localStorage","current","clearTimeout","resetIdleTimer","setTimeout","events","forEach","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ctx","RequireAuth","_s3","navigate","replace","style","display","justifyContent","alignItems","height","_c2","$RefreshReg$"],"sources":["/Users/nalinr/MidlandAdmin/schooladmin/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useCallback, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getApiUrl } from '../config';\n\nconst AuthContext = createContext(null);\n\nconst idleMs = 30 * 60 * 1000; // 30 minutes\n\nexport function AuthProvider({ children }) {\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  const [isReady, setIsReady] = useState(false);\n  const idleTimerRef = useRef(null);\n  const lastActivityRef = useRef(Date.now());\n\n  useEffect(() => {\n    try {\n      const storedToken = window.sessionStorage.getItem('authToken');\n      const storedUser = window.sessionStorage.getItem('authUser');\n      if (storedToken) {\n        setToken(storedToken);\n      }\n      if (storedUser) {\n        try {\n          setUser(JSON.parse(storedUser));\n        } catch (e) {\n          setUser(null);\n        }\n      }\n    } catch (e) {\n      setUser(null);\n    }\n    setIsReady(true);\n  }, []);\n\n  // Handle tab/window close - ensure session is cleared\n  useEffect(() => {\n    if (!token) return;\n\n    const shouldForceClearOnUnload = process.env.NODE_ENV === 'production';\n    if (!shouldForceClearOnUnload) {\n      return undefined;\n    }\n\n    const handleBeforeUnload = () => {\n      // Explicitly clear auth data when tab/window is closing\n      window.sessionStorage.removeItem('authToken');\n      window.sessionStorage.removeItem('authUser');\n    };\n\n    // Listen for page unload events\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [token]);\n\n  const login = useCallback(async (email, password) => {\n    const loginUrl = process.env.REACT_APP_LOGIN_ENDPOINT || getApiUrl('/midland/auth/admin/login');\n\n    try {\n      const res = await fetch(loginUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n      });\n      \n      if (!res.ok) {\n        const errorText = await res.text().catch(() => '');\n        \n        if (res.status === 404) {\n          throw new Error(`Login endpoint not found (404). URL: ${loginUrl}. Please check the API endpoint configuration.`);\n        }\n        if (res.status === 403) {\n          throw new Error('Access forbidden (403). The server rejected the request. This may be a CORS or authentication issue. Check backend configuration.');\n        }\n        try {\n          const errorData = JSON.parse(errorText);\n          throw new Error(errorData.message || errorData.error || `Login failed: ${res.status} ${res.statusText}`);\n        } catch {\n          throw new Error(errorText || `Login failed: ${res.status} ${res.statusText}`);\n        }\n      }\n      \n      const data = await res.json();\n\n      if (!data) {\n        throw new Error('No response from server');\n      }\n\n      const receivedToken = data.token || data.accessToken || data.jwt;\n      const usernameFromResponse = data.username;\n      const roleFromResponse = data.role;\n\n      const receivedUser = {\n        email: email,\n        username: usernameFromResponse || email,\n        role: roleFromResponse || 'USER',\n      };\n      if (!receivedToken) {\n        throw new Error('No token returned by server');\n      }\n\n      window.sessionStorage.setItem('authToken', receivedToken);\n      window.sessionStorage.setItem('authUser', JSON.stringify(receivedUser));\n      setToken(receivedToken);\n      setUser(receivedUser);\n      return true;\n    } catch (err) {\n      throw err;\n    }\n  }, []);\n\n  const register = useCallback(async (email, password) => {\n    return login(email, password);\n  }, [login]);\n\n  const logout = useCallback(() => {\n    // Clear auth data from session and local storage\n    window.sessionStorage.removeItem('authToken');\n    window.sessionStorage.removeItem('authUser');\n    window.localStorage.removeItem('authToken');\n    window.localStorage.removeItem('authUser');\n    setToken(null);\n    setUser(null);\n  }, []);\n\n  useEffect(() => {\n    if (!token) {\n      if (idleTimerRef.current) {\n        clearTimeout(idleTimerRef.current);\n        idleTimerRef.current = null;\n      }\n      return undefined;\n    }\n\n    const resetIdleTimer = () => {\n      lastActivityRef.current = Date.now();\n      if (idleTimerRef.current) clearTimeout(idleTimerRef.current);\n      idleTimerRef.current = setTimeout(() => {\n        if (Date.now() - lastActivityRef.current >= idleMs) {\n          logout();\n        }\n      }, idleMs);\n    };\n\n    const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];\n    events.forEach(e => window.addEventListener(e, resetIdleTimer, true));\n    resetIdleTimer();\n\n    return () => {\n      events.forEach(e => window.removeEventListener(e, resetIdleTimer, true));\n      if (idleTimerRef.current) clearTimeout(idleTimerRef.current);\n    };\n  }, [token, logout]);\n\n  const value = {\n    token,\n    user,\n    isReady,\n    login,\n    register,\n    logout,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n}\n\nexport function RequireAuth({ children }) {\n  const { token, isReady } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isReady && !token) {\n      navigate('/login', { replace: true });\n    }\n  }, [token, isReady, navigate]);\n\n  if (!isReady) {\n    return <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>Loading...</div>;\n  }\n\n  if (!token) {\n    return null;\n  }\n\n  return children;\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}