{"ast":null,"code":"import _objectSpread from\"/Users/nalinr/MidlandAdmin/schooladmin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{getApiUrl,getAuthHeaders}from'../../config';import{useAuth}from'../../context/AuthContext';import{useToast}from'../../context/ToastContext';import{FiArrowLeft,FiUser,FiBook,FiMail,FiUsers}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function StudentCreate(){const navigate=useNavigate();const{token}=useAuth();const toast=useToast();const[form,setForm]=useState({username:'',password:'',fullName:'',gender:'',dateOfBirth:'',bloodGroup:'',nationality:'',motherTongue:'',languagePreference:'',gradeLevel:'',section:'',academicYear:'',admissionDate:'',status:'Active',admissionNumber:'',rollNo:'',phoneNumber:'',schoolEmail:'',personalEmail:'',guardianName:'',guardianRelation:'',guardianContact:'',schoolCode:''});const[submitting,setSubmitting]=useState(false);const[error,setError]=useState('');const[fieldErrors,setFieldErrors]=useState({});const handleFieldChange=(field,value)=>{setForm(_objectSpread(_objectSpread({},form),{},{[field]:value}));if(fieldErrors[field]){setFieldErrors(_objectSpread(_objectSpread({},fieldErrors),{},{[field]:''}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Student\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:()=>navigate('/students'),children:[/*#__PURE__*/_jsx(FiArrowLeft,{size:16,style:{marginRight:8}}),\"Back to List\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:async e=>{e.preventDefault();setError('');setSubmitting(true);try{const payload={username:String(form.username||'').trim(),password:String(form.password||'').trim(),fullName:String(form.fullName||'').trim(),gender:String(form.gender||'').trim(),dateOfBirth:String(form.dateOfBirth||'').trim(),bloodGroup:String(form.bloodGroup||'').trim(),nationality:String(form.nationality||'').trim(),motherTongue:String(form.motherTongue||'').trim(),languagePreference:String(form.languagePreference||'').trim(),gradeLevel:String(form.gradeLevel||'').trim(),section:String(form.section||'').trim(),academicYear:String(form.academicYear||'').trim(),admissionDate:String(form.admissionDate||'').trim(),status:String(form.status||'Active').trim(),admissionNumber:String(form.admissionNumber||'').trim(),rollNo:String(form.rollNo||'').trim(),phoneNumber:String(form.phoneNumber||'').trim(),schoolEmail:String(form.schoolEmail||'').trim(),personalEmail:String(form.personalEmail||'').trim(),guardianName:String(form.guardianName||'').trim(),guardianRelation:String(form.guardianRelation||'').trim(),guardianContact:String(form.guardianContact||'').trim(),schoolCode:String(form.schoolCode||'').trim()};const url=getApiUrl('/midland/admin/students/create');const res=await fetch(url,{method:'POST',headers:getAuthHeaders(token),body:JSON.stringify(payload)});if(!res.ok){const errorText=await res.text().catch(()=>'');throw new Error(errorText||\"Failed to create: \".concat(res.status));}toast.success('Student created successfully');navigate('/students',{replace:true});}catch(err){const errorMsg=err.message||'Failed to create student';setError(errorMsg);toast.error(errorMsg);}finally{setSubmitting(false);}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FiUser,{}),\"Account\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Username *\",/*#__PURE__*/_jsx(\"input\",{value:form.username,onChange:e=>handleFieldChange('username',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password *\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:form.password,onChange:e=>handleFieldChange('password',e.target.value),required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FiUser,{}),\"Personal Info\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Full Name *\",/*#__PURE__*/_jsx(\"input\",{value:form.fullName,onChange:e=>handleFieldChange('fullName',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Gender *\",/*#__PURE__*/_jsxs(\"select\",{value:form.gender,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{gender:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Date of Birth *\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.dateOfBirth,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{dateOfBirth:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Blood Group\",/*#__PURE__*/_jsx(\"input\",{value:form.bloodGroup,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{bloodGroup:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Nationality\",/*#__PURE__*/_jsx(\"input\",{value:form.nationality,onChange:e=>handleFieldChange('nationality',e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Mother Tongue\",/*#__PURE__*/_jsx(\"input\",{value:form.motherTongue,onChange:e=>handleFieldChange('motherTongue',e.target.value)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FiBook,{}),\"Academic Info\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"School Code *\",/*#__PURE__*/_jsx(\"input\",{value:form.schoolCode,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{schoolCode:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Class *\",/*#__PURE__*/_jsx(\"input\",{value:form.gradeLevel,onChange:e=>handleFieldChange('gradeLevel',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Section *\",/*#__PURE__*/_jsx(\"input\",{value:form.section,onChange:e=>handleFieldChange('section',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Academic Year *\",/*#__PURE__*/_jsx(\"input\",{value:form.academicYear,onChange:e=>handleFieldChange('academicYear',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Admission Date *\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.admissionDate,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{admissionDate:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Status\",/*#__PURE__*/_jsxs(\"select\",{value:form.status,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"Active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Inactive\",children:\"Inactive\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Admission No *\",/*#__PURE__*/_jsx(\"input\",{value:form.admissionNumber,onChange:e=>handleFieldChange('admissionNumber',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Roll No *\",/*#__PURE__*/_jsx(\"input\",{value:form.rollNo,onChange:e=>handleFieldChange('rollNo',e.target.value),required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FiMail,{}),\"Contact Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Phone Number\",/*#__PURE__*/_jsx(\"input\",{value:form.phoneNumber,onChange:e=>handleFieldChange('phoneNumber',e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"School Email *\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.schoolEmail,onChange:e=>handleFieldChange('schoolEmail',e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Personal Email\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.personalEmail,onChange:e=>handleFieldChange('personalEmail',e.target.value)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FiUsers,{}),\"Guardian Info\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Guardian Name\",/*#__PURE__*/_jsx(\"input\",{value:form.guardianName,onChange:e=>handleFieldChange('guardianName',e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Guardian Relation\",/*#__PURE__*/_jsx(\"input\",{value:form.guardianRelation,onChange:e=>handleFieldChange('guardianRelation',e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Guardian Contact\",/*#__PURE__*/_jsx(\"input\",{value:form.guardianContact,onChange:e=>handleFieldChange('guardianContact',e.target.value)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>navigate('/students'),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:submitting,children:submitting?'Creating...':'Create Student'})]})]})]});}","map":null,"metadata":{},"sourceType":"module"}