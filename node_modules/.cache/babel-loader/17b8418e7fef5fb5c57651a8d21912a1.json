{"ast":null,"code":"import React,{useEffect,useState,useMemo}from'react';import{useParams,useNavigate}from'react-router-dom';import{getApiUrl,getAuthHeaders}from'../../config';import{useAuth}from'../../context/AuthContext';import{useToast}from'../../context/ToastContext';import{SkeletonProfile}from'../../components/SkeletonLoader';import StatusBadge from'../../components/StatusBadge';import{FiArrowLeft,FiEdit2,FiPhone,FiMail,FiHome,FiHash,FiUser,FiBriefcase}from'react-icons/fi';import'./AdminProfile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminProfile(){const{id}=useParams();const navigate=useNavigate();const{token}=useAuth();const toast=useToast();const[admin,setAdmin]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{let isMounted=true;async function fetchAdmin(){setLoading(true);setError('');try{const url=getApiUrl('/midland/admin/all');const res=await fetch(url,{headers:getAuthHeaders(token)});if(!res.ok){throw new Error('Failed to load administrator');}const data=await res.json();const list=Array.isArray(data)?data:[];const match=list.find(a=>String(a.schoolEmail)===id||String(a.personalEmail)===id||String(a.adminCode)===id);if(isMounted){setAdmin(match||null);if(!match){setError('Administrator not found');toast.error('Administrator not found');}}}catch(err){const errorMsg=err.message||'Failed to load administrator';if(isMounted)setError(errorMsg);toast.error(errorMsg);}finally{if(isMounted)setLoading(false);}}fetchAdmin();return()=>{isMounted=false;};},[id,token,toast]);const initials=useMemo(()=>{const name=((admin===null||admin===void 0?void 0:admin.fullName)||'').trim();if(!name)return'??';const parts=name.split(/\\s+/);if(parts.length>=2){return(parts[0][0]+parts[parts.length-1][0]).toUpperCase();}return name.substring(0,2).toUpperCase();},[admin]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(SkeletonProfile,{})});if(error||!admin)return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error||'Administrator not found'})});const primaryEmail=admin.schoolEmail||admin.personalEmail||'';const phoneHref=admin.phoneNumber?\"tel:\".concat(String(admin.phoneNumber).replace(/\\s+/g,'')):null;const emailHref=primaryEmail?\"mailto:\".concat(primaryEmail):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"page admin-profile-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate('/admin'),children:/*#__PURE__*/_jsx(FiArrowLeft,{size:20})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Administrator Profile\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary\",onClick:()=>navigate(\"/admin/\".concat(encodeURIComponent(primaryEmail||admin.adminCode||id),\"/edit\")),children:[/*#__PURE__*/_jsx(FiEdit2,{size:16,style:{marginRight:8}}),\"Edit Profile\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-top-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-avatar-large\",children:initials}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-main\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"profile-name\",children:admin.fullName||'-'}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-badges\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-badge purple\",children:[/*#__PURE__*/_jsx(FiBriefcase,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:admin.designation||'Administrator'})]}),/*#__PURE__*/_jsx(StatusBadge,{status:admin.status||'Active'}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-badge orange\",children:[/*#__PURE__*/_jsx(FiHash,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[\"# \",admin.adminCode||'-']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contact-card\",children:[/*#__PURE__*/_jsx(FiPhone,{size:18}),admin.phoneNumber?/*#__PURE__*/_jsx(\"a\",{className:\"contact-card-link\",href:phoneHref,children:admin.phoneNumber}):/*#__PURE__*/_jsx(\"span\",{children:\"N/A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-card\",children:[/*#__PURE__*/_jsx(FiMail,{size:18}),primaryEmail?/*#__PURE__*/_jsx(\"a\",{className:\"contact-card-link\",href:emailHref,children:primaryEmail}):/*#__PURE__*/_jsx(\"span\",{children:\"N/A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-card\",children:[/*#__PURE__*/_jsx(FiHome,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:admin.address||'N/A'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-metrics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:/*#__PURE__*/_jsx(FiUser,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"USERNAME\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:admin.username||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:/*#__PURE__*/_jsx(FiBriefcase,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"DESIGNATION\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:admin.designation||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:/*#__PURE__*/_jsx(FiHash,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"SCHOOL CODE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:admin.schoolCode||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:/*#__PURE__*/_jsx(FiMail,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"SCHOOL EMAIL\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:admin.schoolEmail||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:/*#__PURE__*/_jsx(FiMail,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"PERSONAL EMAIL\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:admin.personalEmail||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:/*#__PURE__*/_jsx(FiPhone,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"PHONE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:admin.phoneNumber||'-'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-content-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-tabs-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-tabs single\",children:/*#__PURE__*/_jsx(\"button\",{className:\"profile-tab active\",type:\"button\",children:\"Overview\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-tab-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tab-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field-display\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field-value\",children:admin.fullName||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field-display\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field-value\",children:admin.gender||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field-display\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Designation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field-value\",children:admin.designation||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field-display\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"School Code\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field-value\",children:admin.schoolCode||'-'})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-summary-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Profile Highlights\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"summary-list\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"strong\",{children:admin.status||'Active'})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"strong\",{children:admin.username||'-'})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"strong\",{children:admin.createdAt?new Date(admin.createdAt).toLocaleDateString():'â€”'})]})]})]})]})]});}","map":null,"metadata":{},"sourceType":"module"}